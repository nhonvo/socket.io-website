"use strict";(self.webpackChunksample_website=self.webpackChunksample_website||[]).push([[9866],{5680:(e,t,n)=>{n.d(t,{xA:()=>c,yg:()=>g});var a=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),u=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(l.Provider,{value:t},e.children)},m="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=u(n),d=r,g=m["".concat(l,".").concat(d)]||m[d]||p[d]||o;return n?a.createElement(g,s(s({ref:t},c),{},{components:n})):a.createElement(g,s({ref:t},c))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,s=new Array(o);s[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[m]="string"==typeof e?e:r,s[1]=i;for(var u=2;u<o;u++)s[u]=n[u];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9365:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(6540),r=n(53);const o={tabItem:"tabItem_Ymn6"};function s(e){let{children:t,hidden:n,className:s}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.A)(o.tabItem,s),hidden:n},t)}},1470:(e,t,n)=>{n.d(t,{A:()=>k});var a=n(8168),r=n(6540),o=n(53),s=n(3104),i=n(6347),l=n(7485),u=n(1682),c=n(9466);function m(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:r}}=e;return{value:t,label:n,attributes:a,default:r}}))}function p(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??m(n);return function(e){const t=(0,u.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function d(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function g(e){let{queryString:t=!1,groupId:n}=e;const a=(0,i.W6)(),o=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l.aZ)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(a.location.search);t.set(o,e),a.replace({...a.location,search:t.toString()})}),[o,a])]}function h(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,o=p(e),[s,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!d({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:o}))),[l,u]=g({queryString:n,groupId:a}),[m,h]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,o]=(0,c.Dv)(n);return[a,(0,r.useCallback)((e=>{n&&o.set(e)}),[n,o])]}({groupId:a}),f=(()=>{const e=l??m;return d({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{f&&i(f)}),[f]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!d({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),h(e)}),[u,h,o]),tabValues:o}}var f=n(2303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){let{className:t,block:n,selectedValue:i,selectValue:l,tabValues:u}=e;const c=[],{blockElementScrollPositionUntilNextRender:m}=(0,s.a_)(),p=e=>{const t=e.currentTarget,n=c.indexOf(t),a=u[n].value;a!==i&&(m(t),l(a))},d=e=>{let t=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":n},t)},u.map((e=>{let{value:t,label:n,attributes:s}=e;return r.createElement("li",(0,a.A)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>c.push(e),onKeyDown:d,onClick:p},s,{className:(0,o.A)("tabs__item",b.tabItem,s?.className,{"tabs__item--active":i===t})}),n??t)})))}function v(e){let{lazy:t,children:n,selectedValue:a}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function w(e){const t=h(e);return r.createElement("div",{className:(0,o.A)("tabs-container",b.tabList)},r.createElement(y,(0,a.A)({},e,t)),r.createElement(v,(0,a.A)({},e,t)))}function k(e){const t=(0,f.A)();return r.createElement(w,(0,a.A)({key:String(t)},e))}},6114:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>g,frontMatter:()=>i,metadata:()=>u,toc:()=>m});var a=n(8168),r=(n(6540),n(5680)),o=n(1470),s=n(9365);const i={title:"Tutorial step #5 - Broadcasting",sidebar_label:"Step #5: Broadcasting",slug:"step-5"},l="Broadcasting",u={unversionedId:"tutorial/broadcasting",id:"tutorial/broadcasting",title:"Tutorial step #5 - Broadcasting",description:"The next goal is for us to emit the event from the server to the rest of the users.",source:"@site/docs/tutorial/06-broadcasting.md",sourceDirName:"tutorial",slug:"/tutorial/step-5",permalink:"/socket.io-website/docs/v4/tutorial/step-5",draft:!1,editUrl:"https://github.com/socketio/socket.io-website/edit/main/docs/tutorial/06-broadcasting.md",tags:[],version:"current",lastUpdatedAt:1700208595,formattedLastUpdatedAt:"Nov 17, 2023",sidebarPosition:6,frontMatter:{title:"Tutorial step #5 - Broadcasting",sidebar_label:"Step #5: Broadcasting",slug:"step-5"},sidebar:"tutorialSidebar",previous:{title:"Step #4: Emitting events",permalink:"/socket.io-website/docs/v4/tutorial/step-4"},next:{title:"Overview of the API",permalink:"/socket.io-website/docs/v4/tutorial/api-overview"}},c={},m=[],p={toc:m},d="wrapper";function g(e){let{components:t,...n}=e;return(0,r.yg)(d,(0,a.A)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"broadcasting"},"Broadcasting"),(0,r.yg)("p",null,"The next goal is for us to emit the event from the server to the rest of the users."),(0,r.yg)("p",null,"In order to send an event to everyone, Socket.IO gives us the ",(0,r.yg)("inlineCode",{parentName:"p"},"io.emit()")," method."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// this will emit the event to all connected sockets\nio.emit('hello', 'world'); \n")),(0,r.yg)("p",null,"If you want to send a message to everyone except for a certain emitting socket, we have the ",(0,r.yg)("inlineCode",{parentName:"p"},"broadcast")," flag for emitting from that socket:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"io.on('connection', (socket) => {\n  socket.broadcast.emit('hi');\n});\n")),(0,r.yg)("p",null,"In this case, for the sake of simplicity we\u2019ll send the message to everyone, including the sender."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"io.on('connection', (socket) => {\n  socket.on('chat message', (msg) => {\n    io.emit('chat message', msg);\n  });\n});\n")),(0,r.yg)("p",null,"And on the client side when we capture a ",(0,r.yg)("inlineCode",{parentName:"p"},"chat message")," event we\u2019ll include it in the page."),(0,r.yg)(o.A,{groupId:"syntax",mdxType:"Tabs"},(0,r.yg)(s.A,{value:"es6",label:"ES6",default:!0,mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-html"},"<script src=\"/socket.io/socket.io.js\"><\/script>\n<script>\n  const socket = io();\n\n  const form = document.getElementById('form');\n  const input = document.getElementById('input');\n  // highlight-start\n  const messages = document.getElementById('messages');\n  // highlight-end\n\n  form.addEventListener('submit', (e) => {\n    e.preventDefault();\n    if (input.value) {\n      socket.emit('chat message', input.value);\n      input.value = '';\n    }\n  });\n\n  // highlight-start\n  socket.on('chat message', (msg) => {\n    const item = document.createElement('li');\n    item.textContent = msg;\n    messages.appendChild(item);\n    window.scrollTo(0, document.body.scrollHeight);\n  });\n  // highlight-end\n<\/script>\n"))),(0,r.yg)(s.A,{value:"es5",label:"ES5",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-html"},"<script src=\"/socket.io/socket.io.js\"><\/script>\n<script>\n  var socket = io();\n\n  var form = document.getElementById('form');\n  var input = document.getElementById('input');\n  // highlight-start\n  var messages = document.getElementById('messages');\n  // highlight-end\n\n  form.addEventListener('submit', function(e) {\n    e.preventDefault();\n    if (input.value) {\n      socket.emit('chat message', input.value);\n      input.value = '';\n    }\n  });\n\n  // highlight-start\n  socket.on('chat message', function(msg) {\n    var item = document.createElement('li');\n    item.textContent = msg;\n    messages.appendChild(item);\n    window.scrollTo(0, document.body.scrollHeight);\n  });\n  // highlight-end\n<\/script>\n")))),(0,r.yg)("p",null,"Let's see it in action:"),(0,r.yg)("video",{controls:!0,autoplay:"",loop:"",width:"100%"},(0,r.yg)("source",{src:"https://i.cloudup.com/transcoded/J4xwRU9DRn.mp4"})),(0,r.yg)("admonition",{type:"info"},(0,r.yg)(o.A,{groupId:"lang",mdxType:"Tabs"},(0,r.yg)(s.A,{value:"cjs",label:"CommonJS",default:!0,attributes:{className:"display-none"},mdxType:"TabItem"},(0,r.yg)("p",{parentName:"admonition"},"You can run this example directly in your browser on:"),(0,r.yg)("ul",{parentName:"admonition"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://codesandbox.io/p/sandbox/github/socketio/chat-example/tree/cjs/step5?file=index.js"},"CodeSandbox")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://stackblitz.com/github/socketio/chat-example/tree/cjs/step5?file=index.js"},"StackBlitz"))),"  "),(0,r.yg)(s.A,{value:"mjs",label:"ES modules",attributes:{className:"display-none"},mdxType:"TabItem"},(0,r.yg)("p",{parentName:"admonition"},"You can run this example directly in your browser on:"),(0,r.yg)("ul",{parentName:"admonition"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://codesandbox.io/p/sandbox/github/socketio/chat-example/tree/esm/step5?file=index.js"},"CodeSandbox")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://stackblitz.com/github/socketio/chat-example/tree/esm/step5?file=index.js"},"StackBlitz"))),"  "))))}g.isMDXComponent=!0}}]);