"use strict";(self.webpackChunksample_website=self.webpackChunksample_website||[]).push([[5897],{5680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>d});var a=n(6540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},g="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),g=c(n),m=o,d=g["".concat(s,".").concat(m)]||g[m]||u[m]||r;return n?a.createElement(d,l(l({ref:t},p),{},{components:n})):a.createElement(d,l({ref:t},p))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,l=new Array(r);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[g]="string"==typeof e?e:o,l[1]=i;for(var c=2;c<r;c++)l[c]=n[c];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3038:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>c});var a=n(8168),o=(n(6540),n(5680));const r={title:"Socket.IO 4.5.0",slug:"/socket-io-4-5-0/",authors:"darrachequesne"},l=void 0,i={permalink:"/blog/socket-io-4-5-0/",editUrl:"https://github.com/socketio/socket.io-website/edit/main/blog/2022-04-23-4.5.0.md",source:"@site/blog/2022-04-23-4.5.0.md",title:"Socket.IO 4.5.0",description:"Hello everyone!",date:"2022-04-23T00:00:00.000Z",formattedDate:"April 23, 2022",tags:[],readingTime:1.69,hasTruncateMarker:!0,authors:[{name:"Damien Arrachequesne",title:"Maintainer of Socket.IO",url:"https://github.com/darrachequesne",imageURL:"https://github.com/darrachequesne.png",key:"darrachequesne"}],frontMatter:{title:"Socket.IO 4.5.0",slug:"/socket-io-4-5-0/",authors:"darrachequesne"},prevItem:{title:"Socket.IO server for Deno",permalink:"/blog/socket-io-deno/"},nextItem:{title:"Socket.IO 4.4.0",permalink:"/blog/socket-io-4-4-0/"}},s={authorsImageUrls:[void 0]},c=[{value:"Catch-all listeners for outgoing packets",id:"catch-all-listeners-for-outgoing-packets",level:2},{value:"Multiple acknowledgements when broadcasting",id:"multiple-acknowledgements-when-broadcasting",level:2},{value:"Limit the number of packets sent in HTTP long-polling mode",id:"limit-the-number-of-packets-sent-in-http-long-polling-mode",level:2},{value:"Disconnection details",id:"disconnection-details",level:2},{value:"Links",id:"links",level:2}],p={toc:c},g="wrapper";function u(e){let{components:t,...n}=e;return(0,o.yg)(g,(0,a.A)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("p",null,"Hello everyone!"),(0,o.yg)("p",null,"We have just published a new minor version of Socket.IO: ",(0,o.yg)("inlineCode",{parentName:"p"},"4.5.0")),(0,o.yg)("p",null,"Here are the new features in this release:"),(0,o.yg)("h2",{id:"catch-all-listeners-for-outgoing-packets"},"Catch-all listeners for outgoing packets"),(0,o.yg)("p",null,"This is similar to ",(0,o.yg)("a",{parentName:"p",href:"/docs/v4/server-api/#socketonanycallback"},(0,o.yg)("inlineCode",{parentName:"a"},"onAny()")),", but for outgoing packets."),(0,o.yg)("p",null,"Syntax:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},"socket.onAnyOutgoing((event, ...args) => {\n  console.log(event);\n});\n")),(0,o.yg)("p",null,"This feature can be used on both sides, and will also work when ",(0,o.yg)("a",{parentName:"p",href:"/docs/v4/broadcasting-events/"},"broadcasting events"),":"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'io.on("connection", (socket) => {\n  socket.onAnyOutgoing((event, ...args) => {\n    console.log(event); // prints "some event"\n  });\n\n  io.emit("some event");\n});\n')),(0,o.yg)("h2",{id:"multiple-acknowledgements-when-broadcasting"},"Multiple acknowledgements when broadcasting"),(0,o.yg)("p",null,"You can now broadcast an event to multiple clients and expect an acknowledgement:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'io.timeout(10000).emit("some-event", (err, responses) => {\n  if (err) {\n    // some clients did not acknowledge the event in the given delay\n  } else {\n    console.log(responses); // one response per client\n  }\n});\n')),(0,o.yg)("h2",{id:"limit-the-number-of-packets-sent-in-http-long-polling-mode"},"Limit the number of packets sent in HTTP long-polling mode"),(0,o.yg)("p",null,"The server will now include the value of the ",(0,o.yg)("a",{parentName:"p",href:"/docs/v4/server-options/#maxhttpbuffersize"},(0,o.yg)("inlineCode",{parentName:"a"},"maxHttpBufferSize"))," in the handshake, so the clients will now be able to decide how many packets they have to send to stay under this value."),(0,o.yg)("p",null,"Here is what the handshake will now look like:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre"},'0{"sid":"lv_VI97HAXpY6yYWAAAC","upgrades":["websocket"],"pingInterval":25000,"pingTimeout":5000,"maxPayload":1000000}\n')),(0,o.yg)("p",null,"More information ",(0,o.yg)("a",{parentName:"p",href:"https://github.com/socketio/socket.io-client/issues/1531"},"here"),"."),(0,o.yg)("h2",{id:"disconnection-details"},"Disconnection details"),(0,o.yg)("p",null,'The "disconnect" event on the client side will now include additional details to help debugging if anything has gone wrong.'),(0,o.yg)("p",null,"Example when ",(0,o.yg)("a",{parentName:"p",href:"/docs/v4/using-multiple-nodes/#why-is-sticky-session-required"},"sticky session is not enabled"),":"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("disconnect", (reason, details) => {\n  console.log(details.context.status); // 400\n  console.log(details.context.responseText); // \'{"code":1,"message":"Session ID unknown"}\'\n});\n')),(0,o.yg)("p",null,"This release also includes some bug fixes, please see the complete diff below."),(0,o.yg)("h2",{id:"links"},"Links"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"Server: ",(0,o.yg)("a",{parentName:"li",href:"https://github.com/socketio/socket.io/releases/tag/4.5.0"},"GitHub release")," / ",(0,o.yg)("a",{parentName:"li",href:"https://github.com/socketio/socket.io/compare/4.4.1...4.5.0"},"Diff")," / ",(0,o.yg)("a",{parentName:"li",href:"https://www.npmjs.com/package/socket.io/v/4.5.0"},"npm")),(0,o.yg)("li",{parentName:"ul"},"Client: ",(0,o.yg)("a",{parentName:"li",href:"https://github.com/socketio/socket.io-client/releases/tag/4.5.0"},"GitHub release")," / ",(0,o.yg)("a",{parentName:"li",href:"https://github.com/socketio/socket.io-client/compare/4.4.1...4.5.0"},"Diff")," / ",(0,o.yg)("a",{parentName:"li",href:"https://www.npmjs.com/package/socket.io-client/v/4.5.0"},"npm"))),(0,o.yg)("p",null,"Size of the bundles:"),(0,o.yg)("table",null,(0,o.yg)("thead",{parentName:"table"},(0,o.yg)("tr",{parentName:"thead"},(0,o.yg)("th",{parentName:"tr",align:null}),(0,o.yg)("th",{parentName:"tr",align:null},"min"),(0,o.yg)("th",{parentName:"tr",align:null},"min+gzip"))),(0,o.yg)("tbody",{parentName:"table"},(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"socket.io.min.js"),(0,o.yg)("td",{parentName:"tr",align:null},"42.6 KB (+ 2.2 KB \u2b06\ufe0f)"),(0,o.yg)("td",{parentName:"tr",align:null},"13.6 KB (+ 0.5 KB \u2b06\ufe0f)")),(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"socket.io.msgpack.min.js"),(0,o.yg)("td",{parentName:"tr",align:null},"47.7 KB (+ 2.1 KB \u2b06\ufe0f)"),(0,o.yg)("td",{parentName:"tr",align:null},"14.6 KB (+ 0.4 KB \u2b06\ufe0f)")),(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"socket.io.esm.min.js"),(0,o.yg)("td",{parentName:"tr",align:null},"34.5 KB (+ 1.4 KB \u2b06\ufe0f)"),(0,o.yg)("td",{parentName:"tr",align:null},"11.5 KB (+ 0.2 KB \u2b06\ufe0f)")))),(0,o.yg)("p",null,"That's all for this release, thanks for reading!"))}u.isMDXComponent=!0}}]);