"use strict";(self.webpackChunksample_website=self.webpackChunksample_website||[]).push([[8237],{5680:(e,n,t)=>{t.d(n,{xA:()=>g,yg:()=>y});var a=t(6540);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=a.createContext({}),s=function(e){var n=a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},g=function(e){var n=s(e.components);return a.createElement(p.Provider,{value:n},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,g=i(e,["components","mdxType","originalType","parentName"]),c=s(t),d=r,y=c["".concat(p,".").concat(d)]||c[d]||m[d]||l;return t?a.createElement(y,o(o({ref:n},g),{},{components:t})):a.createElement(y,o({ref:n},g))}));function y(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,o=new Array(l);o[0]=d;var i={};for(var p in n)hasOwnProperty.call(n,p)&&(i[p]=n[p]);i.originalType=e,i[c]="string"==typeof e?e:r,o[1]=i;for(var s=2;s<l;s++)o[s]=t[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},6246:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var a=t(8168),r=(t(6540),t(5680));const l={title:"Client API",slug:"/client-api/",sidebar_label:"API",sidebar_position:1},o=void 0,i={unversionedId:"client-api",id:"version-2.x/client-api",title:"Client API",description:"IO",source:"@site/versioned_docs/version-2.x/client-api.md",sourceDirName:".",slug:"/client-api/",permalink:"/socket.io-website/docs/v2/client-api/",draft:!1,editUrl:"https://github.com/socketio/socket.io-website/edit/main/versioned_docs/version-2.x/client-api.md",tags:[],version:"2.x",lastUpdatedAt:1673088133,formattedLastUpdatedAt:"Jan 7, 2023",sidebarPosition:1,frontMatter:{title:"Client API",slug:"/client-api/",sidebar_label:"API",sidebar_position:1},sidebar:"version-2.x/clientSidebar"},p={},s=[{value:"IO",id:"io",level:2},{value:"io.protocol",id:"ioprotocol",level:3},{value:"io(url)",id:"iourl",level:3},{value:"Initialization examples",id:"initialization-examples",level:3},{value:"With multiplexing",id:"with-multiplexing",level:4},{value:"With custom <code>path</code>",id:"with-custom-path",level:4},{value:"With query parameters",id:"with-query-parameters",level:4},{value:"With query option",id:"with-query-option",level:4},{value:"With <code>extraHeaders</code>",id:"with-extraheaders",level:4},{value:"With <code>websocket</code> transport only",id:"with-websocket-transport-only",level:4},{value:"With a custom parser",id:"with-a-custom-parser",level:4},{value:"With a self-signed certificate",id:"with-a-self-signed-certificate",level:4},{value:"Manager",id:"manager",level:2},{value:"new Manager(url, options)",id:"new-managerurl-options",level:3},{value:"manager.reconnection(value)",id:"managerreconnectionvalue",level:3},{value:"manager.reconnectionAttempts(value)",id:"managerreconnectionattemptsvalue",level:3},{value:"manager.reconnectionDelay(value)",id:"managerreconnectiondelayvalue",level:3},{value:"manager.reconnectionDelayMax(value)",id:"managerreconnectiondelaymaxvalue",level:3},{value:"manager.timeout(value)",id:"managertimeoutvalue",level:3},{value:"manager.open(callback)",id:"manageropencallback",level:3},{value:"manager.connect(callback)",id:"managerconnectcallback",level:3},{value:"manager.socket(nsp, options)",id:"managersocketnsp-options",level:3},{value:"Event: &#39;connect_error&#39;",id:"event-connect_error",level:3},{value:"Event: &#39;connect_timeout&#39;",id:"event-connect_timeout",level:3},{value:"Event: &#39;reconnect&#39;",id:"event-reconnect",level:3},{value:"Event: &#39;reconnect_attempt&#39;",id:"event-reconnect_attempt",level:3},{value:"Event: &#39;reconnecting&#39;",id:"event-reconnecting",level:3},{value:"Event: &#39;reconnect_error&#39;",id:"event-reconnect_error",level:3},{value:"Event: &#39;reconnect_failed&#39;",id:"event-reconnect_failed",level:3},{value:"Event: &#39;ping&#39;",id:"event-ping",level:3},{value:"Event: &#39;pong&#39;",id:"event-pong",level:3},{value:"Socket",id:"socket",level:2},{value:"socket.id",id:"socketid",level:3},{value:"socket.connected",id:"socketconnected",level:3},{value:"socket.disconnected",id:"socketdisconnected",level:3},{value:"socket.open()",id:"socketopen",level:3},{value:"socket.connect()",id:"socketconnect",level:3},{value:"socket.send(...args)",id:"socketsendargs",level:3},{value:"socket.emit(eventName, ...args)",id:"socketemiteventname-args",level:3},{value:"socket.on(eventName, callback)",id:"socketoneventname-callback",level:3},{value:"socket.compress(value)",id:"socketcompressvalue",level:3},{value:"socket.binary(value)",id:"socketbinaryvalue",level:3},{value:"socket.close()",id:"socketclose",level:3},{value:"socket.disconnect()",id:"socketdisconnect",level:3},{value:"Events",id:"events",level:3},{value:"Event: &#39;connect&#39;",id:"event-connect",level:3},{value:"Event: &#39;disconnect&#39;",id:"event-disconnect",level:3},{value:"Event: &#39;error&#39;",id:"event-error",level:3},{value:"Event: &#39;connect_error&#39;",id:"event-connect_error-1",level:3},{value:"Event: &#39;connect_timeout&#39;",id:"event-connect_timeout-1",level:3},{value:"Event: &#39;reconnect&#39;",id:"event-reconnect-1",level:3},{value:"Event: &#39;reconnect_attempt&#39;",id:"event-reconnect_attempt-1",level:3},{value:"Event: &#39;reconnecting&#39;",id:"event-reconnecting-1",level:3},{value:"Event: &#39;reconnect_error&#39;",id:"event-reconnect_error-1",level:3},{value:"Event: &#39;reconnect_failed&#39;",id:"event-reconnect_failed-1",level:3},{value:"Event: &#39;ping&#39;",id:"event-ping-1",level:3},{value:"Event: &#39;pong&#39;",id:"event-pong-1",level:3}],g={toc:s},c="wrapper";function m(e){let{components:n,...t}=e;return(0,r.yg)(c,(0,a.A)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h2",{id:"io"},"IO"),(0,r.yg)("p",null,"Exposed as the ",(0,r.yg)("inlineCode",{parentName:"p"},"io")," namespace in the standalone build, or the result of calling ",(0,r.yg)("inlineCode",{parentName:"p"},"require('socket.io-client')"),"."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-html"},"<script src=\"/socket.io/socket.io.js\"><\/script>\n<script>\n  const socket = io('http://localhost');\n<\/script>\n")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const io = require('socket.io-client');\n// or with import syntax\nimport io from 'socket.io-client';\n")),(0,r.yg)("h3",{id:"ioprotocol"},"io.protocol"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("em",{parentName:"li"},"(Number)"))),(0,r.yg)("p",null,"The protocol revision number (currently: 4)."),(0,r.yg)("p",null,"The protocol defines the format of the packets exchanged between the client and the server. Both the client and the server must use the same revision in order to understand each other."),(0,r.yg)("p",null,"You can find more information ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/socketio/socket.io-protocol"},"here"),"."),(0,r.yg)("h3",{id:"iourl"},"io(","[url][, options]",")"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"url")," ",(0,r.yg)("em",{parentName:"li"},"(String)")," (defaults to ",(0,r.yg)("inlineCode",{parentName:"li"},"window.location.host"),")"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"options")," ",(0,r.yg)("em",{parentName:"li"},"(Object)"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"forceNew")," ",(0,r.yg)("em",{parentName:"li"},"(Boolean)")," whether to reuse an existing connection"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Socket"))),(0,r.yg)("p",null,"Creates a new ",(0,r.yg)("inlineCode",{parentName:"p"},"Manager")," for the given URL, and attempts to reuse an existing ",(0,r.yg)("inlineCode",{parentName:"p"},"Manager")," for subsequent calls, unless the ",(0,r.yg)("inlineCode",{parentName:"p"},"multiplex")," option is passed with ",(0,r.yg)("inlineCode",{parentName:"p"},"false"),". Passing this option is the equivalent of passing ",(0,r.yg)("inlineCode",{parentName:"p"},"'force new connection': true")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"forceNew: true"),"."),(0,r.yg)("p",null,"A new ",(0,r.yg)("inlineCode",{parentName:"p"},"Socket")," instance is returned for the namespace specified by the pathname in the URL, defaulting to ",(0,r.yg)("inlineCode",{parentName:"p"},"/"),". For example, if the ",(0,r.yg)("inlineCode",{parentName:"p"},"url")," is ",(0,r.yg)("inlineCode",{parentName:"p"},"http://localhost/users"),", a transport connection will be established to ",(0,r.yg)("inlineCode",{parentName:"p"},"http://localhost")," and a Socket.IO connection will be established to ",(0,r.yg)("inlineCode",{parentName:"p"},"/users"),"."),(0,r.yg)("p",null,"Query parameters can also be provided, either with the ",(0,r.yg)("inlineCode",{parentName:"p"},"query")," option or directly in the url (example: ",(0,r.yg)("inlineCode",{parentName:"p"},"http://localhost/users?token=abc"),")."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const io = require("socket.io-client");\n\nconst socket = io("ws://example.com/my-namespace", {\n  reconnectionDelayMax: 10000,\n  query: {\n    auth: "123"\n  }\n});\n')),(0,r.yg)("p",null,"is the short version of:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const { Manager } = require("socket.io-client");\n\nconst manager = new Manager("ws://example.com", {\n  reconnectionDelayMax: 10000\n});\n\nconst socket = manager.socket("/my-namespace", {\n  query: {\n    auth: "123"\n  }\n});\n')),(0,r.yg)("p",null,"See ",(0,r.yg)("a",{parentName:"p",href:"#new-Manager-url-options"},"new Manager(url[, options])")," for the list of available ",(0,r.yg)("inlineCode",{parentName:"p"},"options"),"."),(0,r.yg)("h3",{id:"initialization-examples"},"Initialization examples"),(0,r.yg)("h4",{id:"with-multiplexing"},"With multiplexing"),(0,r.yg)("p",null,"By default, a single connection is used when connecting to different namespaces (to minimize resources):"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const socket = io();\nconst adminSocket = io('/admin');\n// a single connection will be established\n")),(0,r.yg)("p",null,"That behaviour can be disabled with the ",(0,r.yg)("inlineCode",{parentName:"p"},"forceNew")," option:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const socket = io();\nconst adminSocket = io('/admin', { forceNew: true });\n// will create two distinct connections\n")),(0,r.yg)("p",null,"Note: reusing the same namespace will also create two connections"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const socket = io();\nconst socket2 = io();\n// will also create two distinct connections\n")),(0,r.yg)("h4",{id:"with-custom-path"},"With custom ",(0,r.yg)("inlineCode",{parentName:"h4"},"path")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const socket = io('http://localhost', {\n  path: '/myownpath'\n});\n\n// server-side\nconst io = require('socket.io')({\n  path: '/myownpath'\n});\n")),(0,r.yg)("p",null,"The request URLs will look like: ",(0,r.yg)("inlineCode",{parentName:"p"},"localhost/myownpath/?EIO=3&transport=polling&sid=<id>")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const socket = io('http://localhost/admin', {\n  path: '/mypath'\n});\n")),(0,r.yg)("p",null,"Here, the socket connects to the ",(0,r.yg)("inlineCode",{parentName:"p"},"admin")," namespace, with the custom path ",(0,r.yg)("inlineCode",{parentName:"p"},"mypath"),"."),(0,r.yg)("p",null,"The request URLs will look like: ",(0,r.yg)("inlineCode",{parentName:"p"},"localhost/mypath/?EIO=3&transport=polling&sid=<id>")," (the namespace is sent as part of the payload)."),(0,r.yg)("h4",{id:"with-query-parameters"},"With query parameters"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const socket = io('http://localhost?token=abc');\n\n// server-side\nconst io = require('socket.io')();\n\n// middleware\nio.use((socket, next) => {\n  let token = socket.handshake.query.token;\n  if (isValid(token)) {\n    return next();\n  }\n  return next(new Error('authentication error'));\n});\n\n// then\nio.on('connection', (socket) => {\n  let token = socket.handshake.query.token;\n  // ...\n});\n")),(0,r.yg)("h4",{id:"with-query-option"},"With query option"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const socket = io({\n  query: {\n    token: 'cde'\n  }\n});\n")),(0,r.yg)("p",null,"The query content can also be updated on reconnection:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('reconnect_attempt', () => {\n  socket.io.opts.query = {\n    token: 'fgh'\n  }\n});\n")),(0,r.yg)("h4",{id:"with-extraheaders"},"With ",(0,r.yg)("inlineCode",{parentName:"h4"},"extraHeaders")),(0,r.yg)("p",null,"This only works if ",(0,r.yg)("inlineCode",{parentName:"p"},"polling")," transport is enabled (which is the default). Custom headers will not be appended when using ",(0,r.yg)("inlineCode",{parentName:"p"},"websocket")," as the transport. This happens because the WebSocket handshake does not honor custom headers. (For background see the ",(0,r.yg)("a",{parentName:"p",href:"https://tools.ietf.org/html/rfc6455#section-4"},"WebSocket protocol RFC"),")"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const socket = io({\n  transportOptions: {\n    polling: {\n      extraHeaders: {\n        'x-clientid': 'abc'\n      }\n    }\n  }\n});\n\n// server-side\nconst io = require('socket.io')();\n\n// middleware\nio.use((socket, next) => {\n  let clientId = socket.handshake.headers['x-clientid'];\n  if (isValid(clientId)) {\n    return next();\n  }\n  return next(new Error('authentication error'));\n});\n")),(0,r.yg)("h4",{id:"with-websocket-transport-only"},"With ",(0,r.yg)("inlineCode",{parentName:"h4"},"websocket")," transport only"),(0,r.yg)("p",null,'By default, a long-polling connection is established first, then upgraded to "better" transports (like WebSocket). If you like to live dangerously, this part can be skipped:'),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const socket = io({\n  transports: ['websocket']\n});\n\n// on reconnection, reset the transports option, as the Websocket\n// connection may have failed (caused by proxy, firewall, browser, ...)\nsocket.on('reconnect_attempt', () => {\n  socket.io.opts.transports = ['polling', 'websocket'];\n});\n")),(0,r.yg)("h4",{id:"with-a-custom-parser"},"With a custom parser"),(0,r.yg)("p",null,"The default ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/socketio/socket.io-parser"},"parser")," promotes compatibility (support for ",(0,r.yg)("inlineCode",{parentName:"p"},"Blob"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"File"),", binary check) at the expense of performance. A custom parser can be provided to match the needs of your application. Please see the example ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/socketio/socket.io/tree/master/examples/custom-parsers"},"here"),"."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const parser = require('socket.io-msgpack-parser'); // or require('socket.io-json-parser')\nconst socket = io({\n  parser: parser\n});\n\n// the server-side must have the same parser, to be able to communicate\nconst io = require('socket.io')({\n  parser: parser\n});\n")),(0,r.yg)("h4",{id:"with-a-self-signed-certificate"},"With a self-signed certificate"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"// server-side\nconst fs = require('fs');\nconst server = require('https').createServer({\n  key: fs.readFileSync('server-key.pem'),\n  cert: fs.readFileSync('server-cert.pem')\n});\nconst io = require('socket.io')(server);\nserver.listen(3000);\n\n// client-side\nconst socket = io({\n  // option 1\n  ca: fs.readFileSync('server-cert.pem'),\n\n  // option 2. WARNING: it leaves you vulnerable to MITM attacks!\n  rejectUnauthorized: false\n});\n\n")),(0,r.yg)("h2",{id:"manager"},"Manager"),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"Manager")," ",(0,r.yg)("em",{parentName:"p"},"manages")," the Engine.IO ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/socketio/engine.io-client/"},"client")," instance, which is the low-level engine that establishes the connection to the server (by using transports like WebSocket or HTTP long-polling)."),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"Manager")," handles the reconnection logic."),(0,r.yg)("p",null,"A single ",(0,r.yg)("inlineCode",{parentName:"p"},"Manager")," can be used by several ",(0,r.yg)("a",{parentName:"p",href:"#Socket"},"Sockets"),". You can find more information about this multiplexing feature ",(0,r.yg)("a",{parentName:"p",href:"/docs/v2/namespaces/"},"here"),"."),(0,r.yg)("p",null,"Please note that, in most cases, you won't use the Manager directly but use the ",(0,r.yg)("a",{parentName:"p",href:"#Socket"},"Socket")," instance instead."),(0,r.yg)("h3",{id:"new-managerurl-options"},"new Manager(url","[, options]",")"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"url")," ",(0,r.yg)("em",{parentName:"li"},"(String)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"options")," ",(0,r.yg)("em",{parentName:"li"},"(Object)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Manager"))),(0,r.yg)("p",null,"Available options:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Option"),(0,r.yg)("th",{parentName:"tr",align:null},"Default value"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"path")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"/socket.io")),(0,r.yg)("td",{parentName:"tr",align:null},"name of the path that is captured on the server side")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"reconnection")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"true")),(0,r.yg)("td",{parentName:"tr",align:null},"whether to reconnect automatically")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"reconnectionAttempts")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"Infinity")),(0,r.yg)("td",{parentName:"tr",align:null},"number of reconnection attempts before giving up")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"reconnectionDelay")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"1000")),(0,r.yg)("td",{parentName:"tr",align:null},"how long to initially wait before attempting a new reconnection. Affected by +/- ",(0,r.yg)("inlineCode",{parentName:"td"},"randomizationFactor"),", for example the default initial delay will be between 500 to 1500ms.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"reconnectionDelayMax")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"5000")),(0,r.yg)("td",{parentName:"tr",align:null},"maximum amount of time to wait between reconnections. Each attempt increases the reconnection delay by 2x along with a randomization factor.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"randomizationFactor")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"0.5")),(0,r.yg)("td",{parentName:"tr",align:null},"0 <= randomizationFactor <= 1")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"timeout")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"20000")),(0,r.yg)("td",{parentName:"tr",align:null},"connection timeout before a ",(0,r.yg)("inlineCode",{parentName:"td"},"connect_error")," and ",(0,r.yg)("inlineCode",{parentName:"td"},"connect_timeout")," events are emitted")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"autoConnect")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"true")),(0,r.yg)("td",{parentName:"tr",align:null},"by setting this false, you have to call ",(0,r.yg)("inlineCode",{parentName:"td"},"manager.open")," whenever you decide it's appropriate")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"query")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"{}")),(0,r.yg)("td",{parentName:"tr",align:null},"additional query parameters that are sent when connecting a namespace (then found in ",(0,r.yg)("inlineCode",{parentName:"td"},"socket.handshake.query")," object on the server-side)")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"parser")),(0,r.yg)("td",{parentName:"tr",align:null},"-"),(0,r.yg)("td",{parentName:"tr",align:null},"the parser to use. Defaults to an instance of the ",(0,r.yg)("inlineCode",{parentName:"td"},"Parser")," that ships with socket.io. See ",(0,r.yg)("a",{parentName:"td",href:"https://github.com/socketio/socket.io-parser"},"socket.io-parser"),".")))),(0,r.yg)("p",null,"Available options for the underlying Engine.IO client:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Option"),(0,r.yg)("th",{parentName:"tr",align:null},"Default value"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"upgrade")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"true")),(0,r.yg)("td",{parentName:"tr",align:null},"whether the client should try to upgrade the transport from long-polling to something better.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"forceJSONP")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"false")),(0,r.yg)("td",{parentName:"tr",align:null},"forces JSONP for polling transport.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"jsonp")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"true")),(0,r.yg)("td",{parentName:"tr",align:null},'determines whether to use JSONP when necessary for polling. If disabled (by settings to false) an error will be emitted (saying "No transports available") if no other transports are available. If another transport is available for opening a connection (e.g. WebSocket) that transport will be used instead.')),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"forceBase64")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"false")),(0,r.yg)("td",{parentName:"tr",align:null},"forces base 64 encoding for polling transport even when XHR2 responseType is available and WebSocket even if the used standard supports binary.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"enablesXDR")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"false")),(0,r.yg)("td",{parentName:"tr",align:null},"enables XDomainRequest for IE8 to avoid loading bar flashing with click sound. default to ",(0,r.yg)("inlineCode",{parentName:"td"},"false")," because XDomainRequest has a flaw of not sending cookie.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"timestampRequests")),(0,r.yg)("td",{parentName:"tr",align:null},"-"),(0,r.yg)("td",{parentName:"tr",align:null},"whether to add the timestamp with each transport request. Note: polling requests are always stamped unless this option is explicitly set to ",(0,r.yg)("inlineCode",{parentName:"td"},"false"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"timestampParam")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"t")),(0,r.yg)("td",{parentName:"tr",align:null},"the timestamp parameter")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"policyPort")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"843")),(0,r.yg)("td",{parentName:"tr",align:null},"port the policy server listens on")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"transports")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"['polling', 'websocket']")),(0,r.yg)("td",{parentName:"tr",align:null},"a list of transports to try (in order). ",(0,r.yg)("inlineCode",{parentName:"td"},"Engine")," always attempts to connect directly with the first one, provided the feature detection test for it passes.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"transportOptions")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"{}")),(0,r.yg)("td",{parentName:"tr",align:null},"hash of options, indexed by transport name, overriding the common options for the given transport")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"rememberUpgrade")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"false")),(0,r.yg)("td",{parentName:"tr",align:null},"If true and if the previous websocket connection to the server succeeded, the connection attempt will bypass the normal upgrade process and will initially try websocket. A connection attempt following a transport error will use the normal upgrade process. It is recommended you turn this on only when using SSL/TLS connections, or if you know that your network does not block websockets.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"onlyBinaryUpgrades")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"false")),(0,r.yg)("td",{parentName:"tr",align:null},"whether transport upgrades should be restricted to transports supporting binary data")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"requestTimeout")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"0")),(0,r.yg)("td",{parentName:"tr",align:null},"timeout for xhr-polling requests in milliseconds (",(0,r.yg)("inlineCode",{parentName:"td"},"0"),") (",(0,r.yg)("em",{parentName:"td"},"only for polling transport"),")")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"protocols")),(0,r.yg)("td",{parentName:"tr",align:null},"-"),(0,r.yg)("td",{parentName:"tr",align:null},"a list of subprotocols (see ",(0,r.yg)("a",{parentName:"td",href:"https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#Subprotocols"},"MDN reference"),") (",(0,r.yg)("em",{parentName:"td"},"only for websocket transport"),")")))),(0,r.yg)("p",null,"Node.js-only options for the underlying Engine.IO client:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Option"),(0,r.yg)("th",{parentName:"tr",align:null},"Default value"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"agent")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"false ")),(0,r.yg)("td",{parentName:"tr",align:null},"the ",(0,r.yg)("inlineCode",{parentName:"td"},"http.Agent")," to use")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pfx")),(0,r.yg)("td",{parentName:"tr",align:null},"-"),(0,r.yg)("td",{parentName:"tr",align:null},"Certificate, Private key and CA certificates to use for SSL.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"key")),(0,r.yg)("td",{parentName:"tr",align:null},"-"),(0,r.yg)("td",{parentName:"tr",align:null},"Private key to use for SSL.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"passphrase")),(0,r.yg)("td",{parentName:"tr",align:null},"-"),(0,r.yg)("td",{parentName:"tr",align:null},"A string of passphrase for the private key or pfx.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"cert")),(0,r.yg)("td",{parentName:"tr",align:null},"-"),(0,r.yg)("td",{parentName:"tr",align:null},"Public x509 certificate to use.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"ca")),(0,r.yg)("td",{parentName:"tr",align:null},"-"),(0,r.yg)("td",{parentName:"tr",align:null},"An authority certificate or array of authority certificates to check the remote host against.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"ciphers")),(0,r.yg)("td",{parentName:"tr",align:null},"-"),(0,r.yg)("td",{parentName:"tr",align:null},"A string describing the ciphers to use or exclude. Consult the ",(0,r.yg)("a",{parentName:"td",href:"http://www.openssl.org/docs/apps/ciphers.html#CIPHER_LIST_FORMAT"},"cipher format list")," for details on the format.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"rejectUnauthorized")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"false")),(0,r.yg)("td",{parentName:"tr",align:null},"If true, the server certificate is verified against the list of supplied CAs. An 'error' event is emitted if verification fails. Verification happens at the connection level, before the HTTP request is sent.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"perMessageDeflate")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"true")),(0,r.yg)("td",{parentName:"tr",align:null},"parameters of the WebSocket permessage-deflate extension (see ",(0,r.yg)("a",{parentName:"td",href:"https://github.com/einaros/ws"},"ws module")," api docs). Set to ",(0,r.yg)("inlineCode",{parentName:"td"},"false")," to disable.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"extraHeaders")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"{}")),(0,r.yg)("td",{parentName:"tr",align:null},"Headers that will be passed for each request to the server (via xhr-polling and via websockets). These values then can be used during handshake or for special proxies.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"forceNode")),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"false")),(0,r.yg)("td",{parentName:"tr",align:null},"Uses NodeJS implementation for websockets - even if there is a native Browser-Websocket available, which is preferred by default over the NodeJS implementation. (This is useful when using hybrid platforms like nw.js or electron)")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"localAddress")),(0,r.yg)("td",{parentName:"tr",align:null},"-"),(0,r.yg)("td",{parentName:"tr",align:null},"the local IP address to connect to")))),(0,r.yg)("h3",{id:"managerreconnectionvalue"},"manager.reconnection(","[value]",")"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"value")," ",(0,r.yg)("em",{parentName:"li"},"(Boolean)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Manager|Boolean"))),(0,r.yg)("p",null,"Sets the ",(0,r.yg)("inlineCode",{parentName:"p"},"reconnection")," option, or returns it if no parameters are passed."),(0,r.yg)("h3",{id:"managerreconnectionattemptsvalue"},"manager.reconnectionAttempts(","[value]",")"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"value")," ",(0,r.yg)("em",{parentName:"li"},"(Number)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Manager|Number"))),(0,r.yg)("p",null,"Sets the ",(0,r.yg)("inlineCode",{parentName:"p"},"reconnectionAttempts")," option, or returns it if no parameters are passed."),(0,r.yg)("h3",{id:"managerreconnectiondelayvalue"},"manager.reconnectionDelay(","[value]",")"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"value")," ",(0,r.yg)("em",{parentName:"li"},"(Number)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Manager|Number"))),(0,r.yg)("p",null,"Sets the ",(0,r.yg)("inlineCode",{parentName:"p"},"reconnectionDelay")," option, or returns it if no parameters are passed."),(0,r.yg)("h3",{id:"managerreconnectiondelaymaxvalue"},"manager.reconnectionDelayMax(","[value]",")"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"value")," ",(0,r.yg)("em",{parentName:"li"},"(Number)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Manager|Number"))),(0,r.yg)("p",null,"Sets the ",(0,r.yg)("inlineCode",{parentName:"p"},"reconnectionDelayMax")," option, or returns it if no parameters are passed."),(0,r.yg)("h3",{id:"managertimeoutvalue"},"manager.timeout(","[value]",")"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"value")," ",(0,r.yg)("em",{parentName:"li"},"(Number)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Manager|Number"))),(0,r.yg)("p",null,"Sets the ",(0,r.yg)("inlineCode",{parentName:"p"},"timeout")," option, or returns it if no parameters are passed."),(0,r.yg)("h3",{id:"manageropencallback"},"manager.open(","[callback]",")"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"callback")," ",(0,r.yg)("em",{parentName:"li"},"(Function)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Manager"))),(0,r.yg)("p",null,"If the manager was initiated with ",(0,r.yg)("inlineCode",{parentName:"p"},"autoConnect")," to ",(0,r.yg)("inlineCode",{parentName:"p"},"false"),", launch a new connection attempt."),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"callback")," argument is optional and will be called once the attempt fails/succeeds."),(0,r.yg)("h3",{id:"managerconnectcallback"},"manager.connect(","[callback]",")"),(0,r.yg)("p",null,"Synonym of ",(0,r.yg)("a",{parentName:"p",href:"#manageropencallback"},"manager.open([callback])"),"."),(0,r.yg)("h3",{id:"managersocketnsp-options"},"manager.socket(nsp, options)"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"nsp")," ",(0,r.yg)("em",{parentName:"li"},"(String)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"options")," ",(0,r.yg)("em",{parentName:"li"},"(Object)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Socket"))),(0,r.yg)("p",null,"Creates a new ",(0,r.yg)("inlineCode",{parentName:"p"},"Socket")," for the given namespace."),(0,r.yg)("h3",{id:"event-connect_error"},"Event: 'connect_error'"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"error")," ",(0,r.yg)("em",{parentName:"li"},"(Object)")," error object")),(0,r.yg)("p",null,"Fired upon a connection error."),(0,r.yg)("h3",{id:"event-connect_timeout"},"Event: 'connect_timeout'"),(0,r.yg)("p",null,"Fired upon a connection timeout."),(0,r.yg)("h3",{id:"event-reconnect"},"Event: 'reconnect'"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"attempt")," ",(0,r.yg)("em",{parentName:"li"},"(Number)")," reconnection attempt number")),(0,r.yg)("p",null,"Fired upon a successful reconnection."),(0,r.yg)("h3",{id:"event-reconnect_attempt"},"Event: 'reconnect_attempt'"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"attempt")," ",(0,r.yg)("em",{parentName:"li"},"(Number)")," reconnection attempt number")),(0,r.yg)("p",null,"Fired upon an attempt to reconnect."),(0,r.yg)("h3",{id:"event-reconnecting"},"Event: 'reconnecting'"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"attempt")," ",(0,r.yg)("em",{parentName:"li"},"(Number)")," reconnection attempt number")),(0,r.yg)("p",null,"Fired upon an attempt to reconnect."),(0,r.yg)("h3",{id:"event-reconnect_error"},"Event: 'reconnect_error'"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"error")," ",(0,r.yg)("em",{parentName:"li"},"(Object)")," error object")),(0,r.yg)("p",null,"Fired upon a reconnection attempt error."),(0,r.yg)("h3",{id:"event-reconnect_failed"},"Event: 'reconnect_failed'"),(0,r.yg)("p",null,"Fired when couldn't reconnect within ",(0,r.yg)("inlineCode",{parentName:"p"},"reconnectionAttempts"),"."),(0,r.yg)("h3",{id:"event-ping"},"Event: 'ping'"),(0,r.yg)("p",null,"Fired when a ping packet is written out to the server."),(0,r.yg)("h3",{id:"event-pong"},"Event: 'pong'"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"ms")," ",(0,r.yg)("em",{parentName:"li"},"(Number)")," number of ms elapsed since ",(0,r.yg)("inlineCode",{parentName:"li"},"ping")," packet (i.e.: latency).")),(0,r.yg)("p",null,"Fired when a pong is received from the server."),(0,r.yg)("h2",{id:"socket"},"Socket"),(0,r.yg)("p",null,"A ",(0,r.yg)("inlineCode",{parentName:"p"},"Socket")," is the fundamental class for interacting with the server. A ",(0,r.yg)("inlineCode",{parentName:"p"},"Socket")," belongs to a certain ",(0,r.yg)("a",{parentName:"p",href:"/docs/v2/namespaces"},"Namespace")," (by default ",(0,r.yg)("inlineCode",{parentName:"p"},"/"),") and uses an underlying ",(0,r.yg)("a",{parentName:"p",href:"#Manager"},"Manager")," to communicate."),(0,r.yg)("p",null,"A ",(0,r.yg)("inlineCode",{parentName:"p"},"Socket")," is basically an ",(0,r.yg)("a",{parentName:"p",href:"https://nodejs.org/api/events.html#events_class_eventemitter"},"EventEmitter")," which sends events to \u2014 and receive events from \u2014 the server over the network."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.emit('hello', { a: 'b', c: [] });\n\nsocket.on('hey', (...args) => {\n  // ...\n});\n")),(0,r.yg)("h3",{id:"socketid"},"socket.id"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("em",{parentName:"li"},"(String)"))),(0,r.yg)("p",null,"A unique identifier for the socket session. Set after the ",(0,r.yg)("inlineCode",{parentName:"p"},"connect")," event is triggered, and updated after the ",(0,r.yg)("inlineCode",{parentName:"p"},"reconnect")," event."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const socket = io('http://localhost');\n\nconsole.log(socket.id); // undefined\n\nsocket.on('connect', () => {\n  console.log(socket.id); // 'G5p5...'\n});\n")),(0,r.yg)("h3",{id:"socketconnected"},"socket.connected"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("em",{parentName:"li"},"(Boolean)"))),(0,r.yg)("p",null,"Whether or not the socket is connected to the server."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const socket = io('http://localhost');\n\nsocket.on('connect', () => {\n  console.log(socket.connected); // true\n});\n")),(0,r.yg)("h3",{id:"socketdisconnected"},"socket.disconnected"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("em",{parentName:"li"},"(Boolean)"))),(0,r.yg)("p",null,"Whether or not the socket is disconnected from the server."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const socket = io('http://localhost');\n\nsocket.on('connect', () => {\n  console.log(socket.disconnected); // false\n});\n")),(0,r.yg)("h3",{id:"socketopen"},"socket.open()"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Socket"))),(0,r.yg)("p",null,"Manually opens the socket."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const socket = io({\n  autoConnect: false\n});\n\n// ...\nsocket.open();\n")),(0,r.yg)("p",null,"It can also be used to manually reconnect:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('disconnect', () => {\n  socket.open();\n});\n")),(0,r.yg)("h3",{id:"socketconnect"},"socket.connect()"),(0,r.yg)("p",null,"Synonym of ",(0,r.yg)("a",{parentName:"p",href:"#socketopen"},"socket.open()"),"."),(0,r.yg)("h3",{id:"socketsendargs"},"socket.send(","[...args][, ack]",")"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"args")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"ack")," ",(0,r.yg)("em",{parentName:"li"},"(Function)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Socket"))),(0,r.yg)("p",null,"Sends a ",(0,r.yg)("inlineCode",{parentName:"p"},"message")," event. See ",(0,r.yg)("a",{parentName:"p",href:"#socketemiteventname-args-ack"},"socket.emit(eventName[, ...args][, ack])"),"."),(0,r.yg)("h3",{id:"socketemiteventname-args"},"socket.emit(eventName","[, ...args][, ack]",")"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"eventName")," ",(0,r.yg)("em",{parentName:"li"},"(String)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"args")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"ack")," ",(0,r.yg)("em",{parentName:"li"},"(Function)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Socket"))),(0,r.yg)("p",null,"Emits an event to the socket identified by the string name. Any other parameters can be included. All serializable data structures are supported, including ",(0,r.yg)("inlineCode",{parentName:"p"},"Buffer"),"."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.emit('hello', 'world');\nsocket.emit('with-binary', 1, '2', { 3: '4', 5: Buffer.from([6, 7, 8]) });\n")),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"ack")," argument is optional and will be called with the server answer."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.emit('ferret', 'tobi', (data) => {\n  console.log(data); // data will be 'woot'\n});\n\n// server:\n//  io.on('connection', (socket) => {\n//    socket.on('ferret', (name, fn) => {\n//      fn('woot');\n//    });\n//  });\n")),(0,r.yg)("h3",{id:"socketoneventname-callback"},"socket.on(eventName, callback)"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"eventName")," ",(0,r.yg)("em",{parentName:"li"},"(String)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"callback")," ",(0,r.yg)("em",{parentName:"li"},"(Function)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Socket"))),(0,r.yg)("p",null,"Register a new handler for the given event."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('news', (data) => {\n  console.log(data);\n});\n\n// with multiple arguments\nsocket.on('news', (arg1, arg2, arg3, arg4) => {\n  // ...\n});\n// with callback\nsocket.on('news', (cb) => {\n  cb(0);\n});\n")),(0,r.yg)("p",null,"The socket actually inherits every method of the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/component/emitter"},"Emitter")," class, like ",(0,r.yg)("inlineCode",{parentName:"p"},"hasListeners"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"once")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"off")," (to remove an event listener)."),(0,r.yg)("h3",{id:"socketcompressvalue"},"socket.compress(value)"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"value")," ",(0,r.yg)("em",{parentName:"li"},"(Boolean)")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Socket"))),(0,r.yg)("p",null,"Sets a modifier for a subsequent event emission that the event data will only be ",(0,r.yg)("em",{parentName:"p"},"compressed")," if the value is ",(0,r.yg)("inlineCode",{parentName:"p"},"true"),". Defaults to ",(0,r.yg)("inlineCode",{parentName:"p"},"true")," when you don't call the method."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.compress(false).emit('an event', { some: 'data' });\n")),(0,r.yg)("h3",{id:"socketbinaryvalue"},"socket.binary(value)"),(0,r.yg)("p",null,"Specifies whether the emitted data contains binary. Increases performance when specified. Can be ",(0,r.yg)("inlineCode",{parentName:"p"},"true")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"false"),"."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.binary(false).emit('an event', { some: 'data' });\n")),(0,r.yg)("h3",{id:"socketclose"},"socket.close()"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Returns")," ",(0,r.yg)("inlineCode",{parentName:"li"},"Socket"))),(0,r.yg)("p",null,"Disconnects the socket manually."),(0,r.yg)("h3",{id:"socketdisconnect"},"socket.disconnect()"),(0,r.yg)("p",null,"Synonym of ",(0,r.yg)("a",{parentName:"p",href:"#socketclose"},"socket.close()"),"."),(0,r.yg)("h3",{id:"events"},"Events"),(0,r.yg)("p",null,"The ",(0,r.yg)("inlineCode",{parentName:"p"},"Socket")," instance emits all events sent by its underlying ",(0,r.yg)("a",{parentName:"p",href:"#Manager"},"Manager"),", which are related to the state of the connection to the server."),(0,r.yg)("p",null,"It also emits events related to the state of the connection to the ",(0,r.yg)("a",{parentName:"p",href:"/docs/v2/namespaces/"},"Namespace"),":"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"connect"),","),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"disconnect")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"error"),".")),(0,r.yg)("h3",{id:"event-connect"},"Event: 'connect'"),(0,r.yg)("p",null,"Fired upon connection to the Namespace (including a successful reconnection)."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('connect', () => {\n  // ...\n});\n\n// note: you should register event handlers outside of connect,\n// so they are not registered again on reconnection\nsocket.on('myevent', () => {\n  // ...\n});\n")),(0,r.yg)("h3",{id:"event-disconnect"},"Event: 'disconnect'"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"reason")," ",(0,r.yg)("em",{parentName:"li"},"(String)"))),(0,r.yg)("p",null,"Fired upon disconnection. The list of possible disconnection reasons:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Reason"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"io server disconnect")),(0,r.yg)("td",{parentName:"tr",align:null},"The server has forcefully disconnected the socket with ",(0,r.yg)("a",{parentName:"td",href:"/docs/v2/server-api/#socket-disconnect-close"},"socket.disconnect()"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"io client disconnect")),(0,r.yg)("td",{parentName:"tr",align:null},"The socket was manually disconnected using ",(0,r.yg)("a",{parentName:"td",href:"/docs/v2/client-api/#socket-disconnect"},"socket.disconnect()"))),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"ping timeout")),(0,r.yg)("td",{parentName:"tr",align:null},"The server did not respond in the ",(0,r.yg)("inlineCode",{parentName:"td"},"pingTimeout")," range")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"transport close")),(0,r.yg)("td",{parentName:"tr",align:null},"The connection was closed (example: the user has lost connection, or the network was changed from WiFi to 4G)")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"transport error")),(0,r.yg)("td",{parentName:"tr",align:null},"The connection has encountered an error (example: the server was killed during a HTTP long-polling cycle)")))),(0,r.yg)("p",null,"In all cases but the first (disconnection by the server), the client will wait for a small random delay and then reconnect."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('disconnect', (reason) => {\n  if (reason === 'io server disconnect') {\n    // the disconnection was initiated by the server, you need to reconnect manually\n    socket.connect();\n  }\n  // else the socket will automatically try to reconnect\n});\n")),(0,r.yg)("h3",{id:"event-error"},"Event: 'error'"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"error")," ",(0,r.yg)("em",{parentName:"li"},"(Object)")," error object")),(0,r.yg)("p",null,"Fired when an error occurs."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('error', (error) => {\n  // ...\n});\n")),(0,r.yg)("h3",{id:"event-connect_error-1"},"Event: 'connect_error'"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"error")," ",(0,r.yg)("em",{parentName:"li"},"(Object)")," error object")),(0,r.yg)("p",null,"Fired upon a connection error."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('connect_error', (error) => {\n  // ...\n});\n")),(0,r.yg)("h3",{id:"event-connect_timeout-1"},"Event: 'connect_timeout'"),(0,r.yg)("p",null,"Fired upon a connection timeout."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('connect_timeout', (timeout) => {\n  // ...\n});\n")),(0,r.yg)("h3",{id:"event-reconnect-1"},"Event: 'reconnect'"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"attempt")," ",(0,r.yg)("em",{parentName:"li"},"(Number)")," reconnection attempt number")),(0,r.yg)("p",null,"Fired upon a successful reconnection."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('reconnect', (attemptNumber) => {\n  // ...\n});\n")),(0,r.yg)("h3",{id:"event-reconnect_attempt-1"},"Event: 'reconnect_attempt'"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"attempt")," ",(0,r.yg)("em",{parentName:"li"},"(Number)")," reconnection attempt number")),(0,r.yg)("p",null,"Fired upon an attempt to reconnect."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('reconnect_attempt', (attemptNumber) => {\n  // ...\n});\n")),(0,r.yg)("h3",{id:"event-reconnecting-1"},"Event: 'reconnecting'"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"attempt")," ",(0,r.yg)("em",{parentName:"li"},"(Number)")," reconnection attempt number")),(0,r.yg)("p",null,"Fired upon an attempt to reconnect."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('reconnecting', (attemptNumber) => {\n  // ...\n});\n")),(0,r.yg)("h3",{id:"event-reconnect_error-1"},"Event: 'reconnect_error'"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"error")," ",(0,r.yg)("em",{parentName:"li"},"(Object)")," error object")),(0,r.yg)("p",null,"Fired upon a reconnection attempt error."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('reconnect_error', (error) => {\n  // ...\n});\n")),(0,r.yg)("h3",{id:"event-reconnect_failed-1"},"Event: 'reconnect_failed'"),(0,r.yg)("p",null,"Fired when the client couldn't reconnect within ",(0,r.yg)("inlineCode",{parentName:"p"},"reconnectionAttempts"),"."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('reconnect_failed', () => {\n  // ...\n});\n")),(0,r.yg)("h3",{id:"event-ping-1"},"Event: 'ping'"),(0,r.yg)("p",null,"Fired when a ping is sent to the server."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('ping', () => {\n  // ...\n});\n")),(0,r.yg)("h3",{id:"event-pong-1"},"Event: 'pong'"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"ms")," ",(0,r.yg)("em",{parentName:"li"},"(Number)")," number of ms elapsed since ",(0,r.yg)("inlineCode",{parentName:"li"},"ping")," packet (i.e.: latency).")),(0,r.yg)("p",null,"Fired when a pong is received from the server."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"socket.on('pong', (latency) => {\n  // ...\n});\n")))}m.isMDXComponent=!0}}]);