"use strict";(self.webpackChunksample_website=self.webpackChunksample_website||[]).push([[5394],{5680:(e,n,t)=>{t.d(n,{xA:()=>c,yg:()=>d});var a=t(6540);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=p(t),m=o,d=u["".concat(s,".").concat(m)]||u[m]||g[m]||r;return t?a.createElement(d,l(l({ref:n},c),{},{components:t})):a.createElement(d,l({ref:n},c))}));function d(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var r=t.length,l=new Array(r);l[0]=m;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[u]="string"==typeof e?e:o,l[1]=i;for(var p=2;p<r;p++)l[p]=t[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},9365:(e,n,t)=>{t.d(n,{A:()=>l});var a=t(6540),o=t(53);const r={tabItem:"tabItem_Ymn6"};function l(e){let{children:n,hidden:t,className:l}=e;return a.createElement("div",{role:"tabpanel",className:(0,o.A)(r.tabItem,l),hidden:t},n)}},1470:(e,n,t)=>{t.d(n,{A:()=>k});var a=t(8168),o=t(6540),r=t(53),l=t(3104),i=t(6347),s=t(7485),p=t(1682),c=t(9466);function u(e){return function(e){return o.Children.map(e,(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:o}}=e;return{value:n,label:t,attributes:a,default:o}}))}function g(e){const{values:n,children:t}=e;return(0,o.useMemo)((()=>{const e=n??u(t);return function(e){const n=(0,p.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function d(e){let{queryString:n=!1,groupId:t}=e;const a=(0,i.W6)(),r=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,s.aZ)(r),(0,o.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(a.location.search);n.set(r,e),a.replace({...a.location,search:n.toString()})}),[r,a])]}function y(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,r=g(e),[l,i]=(0,o.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:r}))),[s,p]=d({queryString:t,groupId:a}),[u,y]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,r]=(0,c.Dv)(t);return[a,(0,o.useCallback)((e=>{t&&r.set(e)}),[t,r])]}({groupId:a}),h=(()=>{const e=s??u;return m({value:e,tabValues:r})?e:null})();(0,o.useLayoutEffect)((()=>{h&&i(h)}),[h]);return{selectedValue:l,selectValue:(0,o.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);i(e),p(e),y(e)}),[p,y,r]),tabValues:r}}var h=t(2303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function N(e){let{className:n,block:t,selectedValue:i,selectValue:s,tabValues:p}=e;const c=[],{blockElementScrollPositionUntilNextRender:u}=(0,l.a_)(),g=e=>{const n=e.currentTarget,t=c.indexOf(n),a=p[t].value;a!==i&&(u(n),s(a))},m=e=>{let n=null;switch(e.key){case"Enter":g(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},n)},p.map((e=>{let{value:n,label:t,attributes:l}=e;return o.createElement("li",(0,a.A)({role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,key:n,ref:e=>c.push(e),onKeyDown:m,onClick:g},l,{className:(0,r.A)("tabs__item",f.tabItem,l?.className,{"tabs__item--active":i===n})}),t??n)})))}function v(e){let{lazy:n,children:t,selectedValue:a}=e;const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===a));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},r.map(((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==a}))))}function b(e){const n=y(e);return o.createElement("div",{className:(0,r.A)("tabs-container",f.tabList)},o.createElement(N,(0,a.A)({},e,n)),o.createElement(v,(0,a.A)({},e,n)))}function k(e){const n=(0,h.A)();return o.createElement(b,(0,a.A)({key:String(n)},e))}},6780:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>g,frontMatter:()=>r,metadata:()=>i,toc:()=>p});var a=t(8168),o=(t(6540),t(5680));t(1470),t(9365);const r={title:"Client options",sidebar_label:"Options",sidebar_position:2,slug:"/client-options/"},l=void 0,i={unversionedId:"client-options",id:"client-options",title:"Client options",description:"IO factory options",source:"@site/docs/client-options.md",sourceDirName:".",slug:"/client-options/",permalink:"/socket.io-website/docs/v4/client-options/",draft:!1,editUrl:"https://github.com/socketio/socket.io-website/edit/main/docs/client-options.md",tags:[],version:"current",lastUpdatedAt:1704902240,formattedLastUpdatedAt:"Jan 10, 2024",sidebarPosition:2,frontMatter:{title:"Client options",sidebar_label:"Options",sidebar_position:2,slug:"/client-options/"},sidebar:"clientSidebar",previous:{title:"API",permalink:"/socket.io-website/docs/v4/client-api/"}},s={},p=[{value:"IO factory options",id:"io-factory-options",level:2},{value:"<code>forceNew</code>",id:"forcenew",level:3},{value:"<code>multiplex</code>",id:"multiplex",level:3},{value:"Low-level engine options",id:"low-level-engine-options",level:2},{value:"<code>addTrailingSlash</code>",id:"addtrailingslash",level:3},{value:"<code>autoUnref</code>",id:"autounref",level:3},{value:"<code>closeOnBeforeunload</code>",id:"closeonbeforeunload",level:3},{value:"<code>extraHeaders</code>",id:"extraheaders",level:3},{value:"<code>forceBase64</code>",id:"forcebase64",level:3},{value:"<code>path</code>",id:"path",level:3},{value:"<code>protocols</code>",id:"protocols",level:3},{value:"<code>query</code>",id:"query",level:3},{value:"<code>rememberUpgrade</code>",id:"rememberupgrade",level:3},{value:"<code>timestampParam</code>",id:"timestampparam",level:3},{value:"<code>timestampRequests</code>",id:"timestamprequests",level:3},{value:"<code>transportOptions</code>",id:"transportoptions",level:3},{value:"<code>transports</code>",id:"transports",level:3},{value:"<code>upgrade</code>",id:"upgrade",level:3},{value:"<code>withCredentials</code>",id:"withcredentials",level:3},{value:"Node.js-specific options",id:"nodejs-specific-options",level:3},{value:"Manager options",id:"manager-options",level:2},{value:"<code>autoConnect</code>",id:"autoconnect",level:3},{value:"<code>parser</code>",id:"parser",level:3},{value:"<code>randomizationFactor</code>",id:"randomizationfactor",level:3},{value:"<code>reconnection</code>",id:"reconnection",level:3},{value:"<code>reconnectionAttempts</code>",id:"reconnectionattempts",level:3},{value:"<code>reconnectionDelay</code>",id:"reconnectiondelay",level:3},{value:"<code>reconnectionDelayMax</code>",id:"reconnectiondelaymax",level:3},{value:"<code>timeout</code>",id:"timeout",level:3},{value:"Socket options",id:"socket-options",level:2},{value:"<code>ackTimeout</code>",id:"acktimeout",level:3},{value:"<code>auth</code>",id:"auth",level:3},{value:"<code>retries</code>",id:"retries",level:3}],c={toc:p},u="wrapper";function g(e){let{components:n,...r}=e;return(0,o.yg)(u,(0,a.A)({},c,r,{components:n,mdxType:"MDXLayout"}),(0,o.yg)("h2",{id:"io-factory-options"},"IO factory options"),(0,o.yg)("h3",{id:"forcenew"},(0,o.yg)("inlineCode",{parentName:"h3"},"forceNew")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"false")),(0,o.yg)("p",null,"Whether to create a new Manager instance."),(0,o.yg)("p",null,"A Manager instance is in charge of the low-level connection to the server (established with HTTP long-polling or WebSocket). It handles the reconnection logic."),(0,o.yg)("p",null,"A Socket instance is the interface which is used to sends events to \u2014 and receive events from \u2014 the server. It belongs to a given ",(0,o.yg)("a",{parentName:"p",href:"/socket.io-website/docs/v4/namespaces/"},"namespace"),"."),(0,o.yg)("p",null,"A single Manager can be attached to several Socket instances."),(0,o.yg)("p",null,"The following example will reuse the same Manager instance for the 3 Socket instances (one single WebSocket connection):"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'const socket = io("https://example.com"); // the main namespace\nconst productSocket = io("https://example.com/product"); // the "product" namespace\nconst orderSocket = io("https://example.com/order"); // the "order" namespace\n')),(0,o.yg)("p",null,"The following example will create 3 different Manager instances (and thus 3 distinct WebSocket connections):"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'const socket = io("https://example.com"); // the main namespace\nconst productSocket = io("https://example.com/product", { forceNew: true }); // the "product" namespace\nconst orderSocket = io("https://example.com/order", { forceNew: true }); // the "order" namespace\n')),(0,o.yg)("p",null,"Reusing an existing namespace will also create a new Manager each time:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'const socket1 = io(); // 1st manager\nconst socket2 = io(); // 2nd manager\nconst socket3 = io("/admin"); // reuse the 1st manager\nconst socket4 = io("/admin"); // 3rd manager\n')),(0,o.yg)("h3",{id:"multiplex"},(0,o.yg)("inlineCode",{parentName:"h3"},"multiplex")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"true")),(0,o.yg)("p",null,"The opposite of ",(0,o.yg)("inlineCode",{parentName:"p"},"forceNew"),": whether to reuse an existing Manager instance."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'const socket = io(); // 1st manager\nconst adminSocket = io("/admin", { multiplex: false }); // 2nd manager\n')),(0,o.yg)("h2",{id:"low-level-engine-options"},"Low-level engine options"),(0,o.yg)("admonition",{type:"info"},(0,o.yg)("p",{parentName:"admonition"},"These settings will be shared by all Socket instances attached to the same Manager.")),(0,o.yg)("h3",{id:"addtrailingslash"},(0,o.yg)("inlineCode",{parentName:"h3"},"addTrailingSlash")),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Added in v4.6.0")),(0,o.yg)("p",null,"The trailing slash which was added by default can now be disabled:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io("https://example.com", {\n  addTrailingSlash: false\n});\n')),(0,o.yg)("p",null,"In the example above, the request URL will be ",(0,o.yg)("inlineCode",{parentName:"p"},"https://example.com/socket.io")," instead of ",(0,o.yg)("inlineCode",{parentName:"p"},"https://example.com/socket.io/"),"."),(0,o.yg)("h3",{id:"autounref"},(0,o.yg)("inlineCode",{parentName:"h3"},"autoUnref")),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Added in v4.0.0")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"false")),(0,o.yg)("p",null,"With ",(0,o.yg)("inlineCode",{parentName:"p"},"autoUnref")," set to ",(0,o.yg)("inlineCode",{parentName:"p"},"true"),", the Socket.IO client will allow the program to exit if there is no other active timer/TCP socket in the event system (even if the client is connected):"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io({\n  autoUnref: true\n});\n')),(0,o.yg)("p",null,"See also: ",(0,o.yg)("a",{parentName:"p",href:"https://nodejs.org/api/timers.html#timeoutunref"},"https://nodejs.org/api/timers.html#timeoutunref")),(0,o.yg)("h3",{id:"closeonbeforeunload"},(0,o.yg)("inlineCode",{parentName:"h3"},"closeOnBeforeunload")),(0,o.yg)("details",{className:"changelog"},(0,o.yg)("summary",null,"History"),(0,o.yg)("table",null,(0,o.yg)("thead",{parentName:"table"},(0,o.yg)("tr",{parentName:"thead"},(0,o.yg)("th",{parentName:"tr",align:null},"Version"),(0,o.yg)("th",{parentName:"tr",align:null},"Changes"))),(0,o.yg)("tbody",{parentName:"table"},(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"v4.7.1"),(0,o.yg)("td",{parentName:"tr",align:null},"The option now defaults to ",(0,o.yg)("inlineCode",{parentName:"td"},"false"),".")),(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"v4.1.0"),(0,o.yg)("td",{parentName:"tr",align:null},"First implementation."))))),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"false")),(0,o.yg)("p",null,"Whether to (silently) close the connection when the ",(0,o.yg)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/Window/beforeunload_event"},(0,o.yg)("inlineCode",{parentName:"a"},"beforeunload"))," event is emitted in the browser."),(0,o.yg)("p",null,"When this option is set to ",(0,o.yg)("inlineCode",{parentName:"p"},"false")," (the default value), the Socket instance will emit a ",(0,o.yg)("inlineCode",{parentName:"p"},"disconnect")," event when the user reloads the page ",(0,o.yg)("strong",{parentName:"p"},"on Firefox"),":"),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"Example with Firefox when closeOnBeforeunload is set to false",src:t(7824).A,width:"832",height:"543"})),(0,o.yg)("admonition",{type:"note"},(0,o.yg)("p",{parentName:"admonition"},"This behavior is specific to Firefox, on other browsers the Socket instance will not emit any ",(0,o.yg)("inlineCode",{parentName:"p"},"disconnect")," event when the user reloads the page.")),(0,o.yg)("p",null,"When this option is set to ",(0,o.yg)("inlineCode",{parentName:"p"},"true"),", all browsers will have the same behavior (no ",(0,o.yg)("inlineCode",{parentName:"p"},"disconnect")," event when reloading the page):"),(0,o.yg)("p",null,(0,o.yg)("img",{alt:"Example with Firefox when closeOnBeforeunload is set to true",src:t(4211).A,width:"832",height:"543"})),(0,o.yg)("admonition",{type:"caution"},(0,o.yg)("p",{parentName:"admonition"},"If you use the ",(0,o.yg)("inlineCode",{parentName:"p"},"beforeunload"),' event in your application ("are you sure that you want to leave this page?"), it is recommended to leave this option to ',(0,o.yg)("inlineCode",{parentName:"p"},"false"),".")),(0,o.yg)("p",null,"Please check ",(0,o.yg)("a",{parentName:"p",href:"https://github.com/socketio/socket.io/issues/3639"},"this issue")," for more information."),(0,o.yg)("h3",{id:"extraheaders"},(0,o.yg)("inlineCode",{parentName:"h3"},"extraHeaders")),(0,o.yg)("p",null,"Default value: -"),(0,o.yg)("p",null,"Additional headers (then found in ",(0,o.yg)("inlineCode",{parentName:"p"},"socket.handshake.headers")," object on the server-side)."),(0,o.yg)("p",null,"Example:"),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Client")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io({\n  extraHeaders: {\n    "my-custom-header": "1234"\n  }\n});\n')),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Server")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'io.on("connection", (socket) => {\n  console.log(socket.handshake.headers); // an object containing "my-custom-header": "1234"\n});\n')),(0,o.yg)("admonition",{type:"caution"},(0,o.yg)("p",{parentName:"admonition"},"In a browser environment, the ",(0,o.yg)("inlineCode",{parentName:"p"},"extraHeaders")," option will be ignored if you only enable the WebSocket transport, since the WebSocket API in the browser does not allow providing custom headers."),(0,o.yg)("pre",{parentName:"admonition"},(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io({\n  transports: ["websocket"],\n  extraHeaders: {\n    "my-custom-header": "1234" // ignored\n  }\n});\n')),(0,o.yg)("p",{parentName:"admonition"},"This will work in Node.js or in React-Native though.")),(0,o.yg)("p",null,"Documentation: ",(0,o.yg)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API"},"WebSocket API")),(0,o.yg)("h3",{id:"forcebase64"},(0,o.yg)("inlineCode",{parentName:"h3"},"forceBase64")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"false")),(0,o.yg)("p",null,"Whether to force base64 encoding for binary content sent over WebSocket (always enabled for HTTP long-polling)."),(0,o.yg)("h3",{id:"path"},(0,o.yg)("inlineCode",{parentName:"h3"},"path")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"/socket.io/")),(0,o.yg)("p",null,"It is the name of the path that is captured on the server side."),(0,o.yg)("admonition",{type:"caution"},(0,o.yg)("p",{parentName:"admonition"},"The server and the client values must match (unless you are using a path-rewriting proxy in between).")),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Client")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io("https://example.com", {\n  path: "/my-custom-path/"\n});\n')),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Server")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { createServer } from "http";\nimport { Server } from "socket.io";\n\nconst httpServer = createServer();\nconst io = new Server(httpServer, {\n  path: "/my-custom-path/"\n});\n')),(0,o.yg)("p",null,"Please note that this is different from the path in the URI, which represents the ",(0,o.yg)("a",{parentName:"p",href:"/socket.io-website/docs/v4/namespaces/"},"Namespace"),"."),(0,o.yg)("p",null,"Example:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io("https://example.com/order", {\n  path: "/my-custom-path/"\n});\n')),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},'the Socket instance is attached to the "order" Namespace'),(0,o.yg)("li",{parentName:"ul"},"the HTTP requests will look like: ",(0,o.yg)("inlineCode",{parentName:"li"},"GET https://example.com/my-custom-path/?EIO=4&transport=polling&t=ML4jUwU"))),(0,o.yg)("h3",{id:"protocols"},(0,o.yg)("inlineCode",{parentName:"h3"},"protocols")),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Added in v2.0.0")),(0,o.yg)("p",null,"Default value: -"),(0,o.yg)("p",null,"Either a single protocol string or an array of protocol strings. These strings are used to indicate sub-protocols, so that a single server can implement multiple WebSocket sub-protocols (for example, you might want one server to be able to handle different types of interactions depending on the specified protocol)."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io({\n  transports: ["websocket"],\n  protocols: ["my-protocol-v1"]\n});\n')),(0,o.yg)("p",null,"Server:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'io.on("connection", (socket) => {\n  const transport = socket.conn.transport;\n  console.log(transport.socket.protocol); // prints "my-protocol-v1"\n});\n')),(0,o.yg)("p",null,"References:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"https://datatracker.ietf.org/doc/html/rfc6455#section-1.9"},"https://datatracker.ietf.org/doc/html/rfc6455#section-1.9")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/WebSocket"},"https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/WebSocket"))),(0,o.yg)("h3",{id:"query"},(0,o.yg)("inlineCode",{parentName:"h3"},"query")),(0,o.yg)("p",null,"Default value: -"),(0,o.yg)("p",null,"Additional query parameters (then found in ",(0,o.yg)("inlineCode",{parentName:"p"},"socket.handshake.query")," object on the server-side)."),(0,o.yg)("p",null,"Example:"),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Client")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io({\n  query: {\n    x: 42\n  }\n});\n')),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Server")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'io.on("connection", (socket) => {\n  console.log(socket.handshake.query); // prints { x: "42", EIO: "4", transport: "polling" }\n});\n')),(0,o.yg)("p",null,"The query parameters cannot be updated for the duration of the session, so changing the ",(0,o.yg)("inlineCode",{parentName:"p"},"query")," on the client-side will only be effective when the current session gets closed and a new one is created:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'socket.io.on("reconnect_attempt", () => {\n  socket.io.opts.query.x++;\n});\n')),(0,o.yg)("p",null,"Note: the following query parameters are reserved and can't be used in your application:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"EIO"),': the version of the protocol (currently, "4")'),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"transport"),': the transport name ("polling" or "websocket")'),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"sid"),": the session ID"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"j"),": if the transport is polling but a JSONP response is required"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"t"),": a hashed-timestamp used for cache-busting")),(0,o.yg)("h3",{id:"rememberupgrade"},(0,o.yg)("inlineCode",{parentName:"h3"},"rememberUpgrade")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"false")),(0,o.yg)("p",null,"If true and if the previous WebSocket connection to the server succeeded, the connection attempt will bypass the normal upgrade process and will initially try WebSocket. A connection attempt following a transport error will use the normal upgrade process. It is recommended you turn this on only when using SSL/TLS connections, or if you know that your network does not block websockets."),(0,o.yg)("h3",{id:"timestampparam"},(0,o.yg)("inlineCode",{parentName:"h3"},"timestampParam")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},'"t"')),(0,o.yg)("p",null,"The name of the query parameter to use as our timestamp key."),(0,o.yg)("h3",{id:"timestamprequests"},(0,o.yg)("inlineCode",{parentName:"h3"},"timestampRequests")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"true")),(0,o.yg)("p",null,"Whether to add the timestamp query param to each request (for cache busting)."),(0,o.yg)("h3",{id:"transportoptions"},(0,o.yg)("inlineCode",{parentName:"h3"},"transportOptions")),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Added in v2.0.0")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"{}")),(0,o.yg)("p",null,"Transport-specific options."),(0,o.yg)("p",null,"Example:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io({\n  path: "/path-for-http-long-polling/",\n  transportOptions: {\n    websocket: {\n      path: "/path-for-websocket/"\n    }\n  }\n});\n')),(0,o.yg)("h3",{id:"transports"},(0,o.yg)("inlineCode",{parentName:"h3"},"transports")),(0,o.yg)("details",{className:"changelog"},(0,o.yg)("summary",null,"History"),(0,o.yg)("table",null,(0,o.yg)("thead",{parentName:"table"},(0,o.yg)("tr",{parentName:"thead"},(0,o.yg)("th",{parentName:"tr",align:null},"Version"),(0,o.yg)("th",{parentName:"tr",align:null},"Changes"))),(0,o.yg)("tbody",{parentName:"table"},(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"v4.7.0"),(0,o.yg)("td",{parentName:"tr",align:null},(0,o.yg)("inlineCode",{parentName:"td"},"webtransport")," is added.")),(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"v1.0.0"),(0,o.yg)("td",{parentName:"tr",align:null},"First implementation."))))),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},'["polling", "websocket", "webtransport"]')),(0,o.yg)("p",null,"The low-level connection to the Socket.IO server can either be established with:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"HTTP long-polling: successive HTTP requests (",(0,o.yg)("inlineCode",{parentName:"li"},"POST")," for writing, ",(0,o.yg)("inlineCode",{parentName:"li"},"GET")," for reading)"),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API"},"WebSocket")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/WebTransport_API"},"WebTransport"))),(0,o.yg)("p",null,"The following example disables the HTTP long-polling transport:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'const socket = io("https://example.com", { transports: ["websocket"] });\n')),(0,o.yg)("p",null,"Note: in that case, sticky sessions are not required on the server side (more information ",(0,o.yg)("a",{parentName:"p",href:"/socket.io-website/docs/v4/using-multiple-nodes/"},"here"),")."),(0,o.yg)("p",null,"By default, the HTTP long-polling connection is established first, and then an upgrade to WebSocket is attempted (explanation ",(0,o.yg)("a",{parentName:"p",href:"/socket.io-website/docs/v4/how-it-works/#upgrade-mechanism"},"here"),"). You can use WebSocket first with:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'const socket = io("https://example.com", {\n  transports: ["websocket", "polling"] // use WebSocket first, if available\n});\n\nsocket.on("connect_error", () => {\n  // revert to classic upgrade\n  socket.io.opts.transports = ["polling", "websocket"];\n});\n')),(0,o.yg)("p",null,"One possible downside is that the validity of your ",(0,o.yg)("a",{parentName:"p",href:"/socket.io-website/docs/v4/handling-cors/"},"CORS configuration")," will only be checked if the WebSocket connection fails to be established."),(0,o.yg)("h3",{id:"upgrade"},(0,o.yg)("inlineCode",{parentName:"h3"},"upgrade")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"true")),(0,o.yg)("p",null,"Whether the client should try to upgrade the transport from HTTP long-polling to something better."),(0,o.yg)("h3",{id:"withcredentials"},(0,o.yg)("inlineCode",{parentName:"h3"},"withCredentials")),(0,o.yg)("details",{className:"changelog"},(0,o.yg)("summary",null,"History"),(0,o.yg)("table",null,(0,o.yg)("thead",{parentName:"table"},(0,o.yg)("tr",{parentName:"thead"},(0,o.yg)("th",{parentName:"tr",align:null},"Version"),(0,o.yg)("th",{parentName:"tr",align:null},"Changes"))),(0,o.yg)("tbody",{parentName:"table"},(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"v4.7.0"),(0,o.yg)("td",{parentName:"tr",align:null},"The Node.js client now honors the ",(0,o.yg)("inlineCode",{parentName:"td"},"withCredentials")," setting.")),(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"v3.0.0"),(0,o.yg)("td",{parentName:"tr",align:null},(0,o.yg)("inlineCode",{parentName:"td"},"withCredentials")," now defaults to ",(0,o.yg)("inlineCode",{parentName:"td"},"false"),".")),(0,o.yg)("tr",{parentName:"tbody"},(0,o.yg)("td",{parentName:"tr",align:null},"v1.0.0"),(0,o.yg)("td",{parentName:"tr",align:null},"First implementation."))))),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"false")),(0,o.yg)("p",null,"Whether the cross-site requests should be sent including credentials such as cookies, authorization headers or TLS client certificates. Setting ",(0,o.yg)("inlineCode",{parentName:"p"},"withCredentials")," has no effect on same-site requests."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io("https://my-backend.com", {\n  withCredentials: true\n});\n')),(0,o.yg)("p",null,"The server needs to send the right ",(0,o.yg)("inlineCode",{parentName:"p"},"Access-Control-Allow-* ")," headers to allow the connection:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { createServer } from "http";\nimport { Server } from "socket.io";\n\nconst httpServer = createServer();\nconst io = new Server(httpServer, {\n  cors: {\n    origin: "https://my-frontend.com",\n    credentials: true\n  }\n});\n')),(0,o.yg)("admonition",{type:"caution"},(0,o.yg)("p",{parentName:"admonition"},"You cannot use ",(0,o.yg)("inlineCode",{parentName:"p"},"origin: *")," when setting ",(0,o.yg)("inlineCode",{parentName:"p"},"withCredentials")," to ",(0,o.yg)("inlineCode",{parentName:"p"},"true"),". This will trigger the following error:"),(0,o.yg)("blockquote",{parentName:"admonition"},(0,o.yg)("i",null,"Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at \u2018.../socket.io/?EIO=4&transport=polling&t=NvQfU77\u2019. (Reason: Credential is not supported if the CORS header \u2018Access-Control-Allow-Origin\u2019 is \u2018*\u2019)"))),(0,o.yg)("p",null,"Documentation:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/withCredentials"},"XMLHttpRequest.withCredentials")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"/socket.io-website/docs/v4/handling-cors/"},"Handling CORS"))),(0,o.yg)("admonition",{type:"info"},(0,o.yg)("p",{parentName:"admonition"},"Starting with version ",(0,o.yg)("inlineCode",{parentName:"p"},"4.7.0"),", when setting the ",(0,o.yg)("inlineCode",{parentName:"p"},"withCredentials")," option to ",(0,o.yg)("inlineCode",{parentName:"p"},"true"),", the Node.js client will now include the cookies in the HTTP requests, making it easier to use it with cookie-based sticky sessions.")),(0,o.yg)("h3",{id:"nodejs-specific-options"},"Node.js-specific options"),(0,o.yg)("p",null,"The following options are supported:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"agent")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"pfx")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"key")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"passphrase")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"cert")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"ca")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"ciphers")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("inlineCode",{parentName:"li"},"rejectUnauthorized"))),(0,o.yg)("p",null,"Please refer to the Node.js documentation:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"https://nodejs.org/dist/latest/docs/api/tls.html#tls_tls_connect_options_callback"},"tls.connect(options[, callback])")),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("a",{parentName:"li",href:"https://nodejs.org/dist/latest/docs/api/tls.html#tls_tls_createsecurecontext_options"},"tls.createSecureContext([options])"))),(0,o.yg)("p",null,"Example with a self-signed certificate:"),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Client")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { readFileSync } from "fs";\nimport { io } from "socket.io-client";\n\nconst socket = io("https://example.com", {\n  ca: readFileSync("./cert.pem")\n});\n')),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Server")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { readFileSync } from "fs";\nimport { createServer } from "https";\nimport { Server } from "socket.io";\n\nconst httpServer = createServer({\n  cert: readFileSync("./cert.pem"),\n  key: readFileSync("./key.pem")\n});\nconst io = new Server(httpServer);\n')),(0,o.yg)("p",null,"Example with client-certificate authentication:"),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Client")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { readFileSync } from "fs";\nimport { io } from "socket.io-client";\n\nconst socket = io("https://example.com", {\n  ca: readFileSync("./server-cert.pem"),\n  cert: readFileSync("./client-cert.pem"),\n  key: readFileSync("./client-key.pem"),\n});\n')),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Server")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { readFileSync } from "fs";\nimport { createServer } from "https";\nimport { Server } from "socket.io";\n\nconst httpServer = createServer({\n  cert: readFileSync("./server-cert.pem"),\n  key: readFileSync("./server-key.pem"),\n  requestCert: true,\n  ca: [\n    readFileSync("client-cert.pem")\n  ]\n});\nconst io = new Server(httpServer);\n')),(0,o.yg)("admonition",{type:"caution"},(0,o.yg)("p",{parentName:"admonition"},(0,o.yg)("inlineCode",{parentName:"p"},"rejectUnauthorized")," is a Node.js-only option, it will not bypass the security check in the browser:"),(0,o.yg)("p",{parentName:"admonition"},(0,o.yg)("img",{alt:"Security warning in the browser",src:t(3959).A,width:"1003",height:"581"}))),(0,o.yg)("h2",{id:"manager-options"},"Manager options"),(0,o.yg)("admonition",{type:"info"},(0,o.yg)("p",{parentName:"admonition"},"These settings will be shared by all Socket instances attached to the same Manager.")),(0,o.yg)("h3",{id:"autoconnect"},(0,o.yg)("inlineCode",{parentName:"h3"},"autoConnect")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"true")),(0,o.yg)("p",null,"Whether to automatically connect upon creation. If set to ",(0,o.yg)("inlineCode",{parentName:"p"},"false"),", you need to manually connect:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io({\n  autoConnect: false\n});\n\nsocket.connect();\n// or\nsocket.io.open();\n')),(0,o.yg)("h3",{id:"parser"},(0,o.yg)("inlineCode",{parentName:"h3"},"parser")),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Added in v2.2.0")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},'require("socket.io-parser")')),(0,o.yg)("p",null,"The parser used to marshall/unmarshall packets. Please see ",(0,o.yg)("a",{parentName:"p",href:"/socket.io-website/docs/v4/custom-parser/"},"here")," for more information."),(0,o.yg)("h3",{id:"randomizationfactor"},(0,o.yg)("inlineCode",{parentName:"h3"},"randomizationFactor")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"0.5")),(0,o.yg)("p",null,"The randomization factor used when reconnecting (so that the clients do not reconnect at the exact same time after a server crash, for example)."),(0,o.yg)("p",null,"Example with the default values:"),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"1st reconnection attempt happens between 500 and 1500 ms (",(0,o.yg)("inlineCode",{parentName:"li"},"1000 * 2^0 * (<something between -0.5 and 1.5>)"),")"),(0,o.yg)("li",{parentName:"ul"},"2nd reconnection attempt happens between 1000 and 3000 ms (",(0,o.yg)("inlineCode",{parentName:"li"},"1000 * 2^1 * (<something between -0.5 and 1.5>)"),")"),(0,o.yg)("li",{parentName:"ul"},"3rd reconnection attempt happens between 2000 and 5000 ms (",(0,o.yg)("inlineCode",{parentName:"li"},"1000 * 2^2 * (<something between -0.5 and 1.5>)"),")"),(0,o.yg)("li",{parentName:"ul"},"next reconnection attempts happen after 5000 ms")),(0,o.yg)("h3",{id:"reconnection"},(0,o.yg)("inlineCode",{parentName:"h3"},"reconnection")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"true")),(0,o.yg)("p",null,"Whether reconnection is enabled or not. If set to ",(0,o.yg)("inlineCode",{parentName:"p"},"false"),", you need to manually reconnect:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io({\n  reconnection: false\n});\n\nconst tryReconnect = () => {\n  setTimeout(() => {\n    socket.io.open((err) => {\n      if (err) {\n        tryReconnect();\n      }\n    });\n  }, 2000);\n}\n\nsocket.io.on("close", tryReconnect);\n')),(0,o.yg)("h3",{id:"reconnectionattempts"},(0,o.yg)("inlineCode",{parentName:"h3"},"reconnectionAttempts")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"Infinity")),(0,o.yg)("p",null,"The number of reconnection attempts before giving up."),(0,o.yg)("h3",{id:"reconnectiondelay"},(0,o.yg)("inlineCode",{parentName:"h3"},"reconnectionDelay")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"1000")),(0,o.yg)("p",null,"The initial delay before reconnection in milliseconds (affected by the ",(0,o.yg)("a",{parentName:"p",href:"#randomizationfactor"},"randomizationFactor")," value)."),(0,o.yg)("h3",{id:"reconnectiondelaymax"},(0,o.yg)("inlineCode",{parentName:"h3"},"reconnectionDelayMax")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"5000")),(0,o.yg)("p",null,"The maximum delay between two reconnection attempts. Each attempt increases the reconnection delay by 2x."),(0,o.yg)("h3",{id:"timeout"},(0,o.yg)("inlineCode",{parentName:"h3"},"timeout")),(0,o.yg)("p",null,"Default value: ",(0,o.yg)("inlineCode",{parentName:"p"},"20000")),(0,o.yg)("p",null,"The timeout in milliseconds for each connection attempt."),(0,o.yg)("h2",{id:"socket-options"},"Socket options"),(0,o.yg)("admonition",{type:"info"},(0,o.yg)("p",{parentName:"admonition"},"These settings are specific to the given Socket instance.")),(0,o.yg)("h3",{id:"acktimeout"},(0,o.yg)("inlineCode",{parentName:"h3"},"ackTimeout")),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Added in v4.6.0")),(0,o.yg)("p",null,"Default value: -"),(0,o.yg)("p",null,"The default timeout in milliseconds used when waiting for an acknowledgement (not to be mixed up with the already existing ",(0,o.yg)("a",{parentName:"p",href:"#timeout"},"timeout")," option, which is used by the Manager during the connection)"),(0,o.yg)("h3",{id:"auth"},(0,o.yg)("inlineCode",{parentName:"h3"},"auth")),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Added in v3.0.0")),(0,o.yg)("p",null,"Default value: -"),(0,o.yg)("p",null,"Credentials that are sent when accessing a namespace (see also ",(0,o.yg)("a",{parentName:"p",href:"/socket.io-website/docs/v4/middlewares/#sending-credentials"},"here"),")."),(0,o.yg)("p",null,"Example:"),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Client")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io({\n  auth: {\n    token: "abcd"\n  }\n});\n\n// or with a function\nconst socket = io({\n  auth: (cb) => {\n    cb({ token: localStorage.token })\n  }\n});\n')),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Server")),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'io.on("connection", (socket) => {\n  console.log(socket.handshake.auth); // prints { token: "abcd" }\n});\n')),(0,o.yg)("p",null,"You can update the ",(0,o.yg)("inlineCode",{parentName:"p"},"auth")," map when the access to the Namespace is denied:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("connect_error", (err) => {\n  if (err.message === "invalid credentials") {\n    socket.auth.token = "efgh";\n    socket.connect();\n  }\n});\n')),(0,o.yg)("p",null,"Or manually force the Socket instance to reconnect:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'socket.auth.token = "efgh";\nsocket.disconnect().connect();\n')),(0,o.yg)("h3",{id:"retries"},(0,o.yg)("inlineCode",{parentName:"h3"},"retries")),(0,o.yg)("p",null,(0,o.yg)("em",{parentName:"p"},"Added in v4.6.0")),(0,o.yg)("p",null,"Default value: -"),(0,o.yg)("p",null,"The maximum number of retries. Above the limit, the packet will be discarded."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-js"},'const socket = io({\n  retries: 3,\n  ackTimeout: 10000\n});\n\n// implicit ack\nsocket.emit("my-event");\n\n// explicit ack\nsocket.emit("my-event", (err, val) => { /* ... */ });\n\n// custom timeout (in that case the ackTimeout is optional)\nsocket.timeout(5000).emit("my-event", (err, val) => { /* ... */ });\n')))}g.isMDXComponent=!0},7824:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/closeonbeforeunload-false-2991b50087d12b47df0ee848f48f3ab5.gif"},4211:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/closeonbeforeunload-true-dd59aafe68fc857319a5e02fb38096a7.gif"},3959:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/self-signed-certificate-a0d2f0b33ea47a62c960fcb5a98cd534.png"}}]);