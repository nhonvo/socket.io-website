"use strict";(self.webpackChunksample_website=self.webpackChunksample_website||[]).push([[3311],{5680:(e,n,r)=>{r.d(n,{xA:()=>u,yg:()=>m});var a=r(6540);function t(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){t(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function s(e,n){if(null==e)return{};var r,a,t=function(e,n){if(null==e)return{};var r,a,t={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],n.indexOf(r)>=0||(t[r]=e[r]);return t}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}var l=a.createContext({}),g=function(e){var n=a.useContext(l),r=n;return e&&(r="function"==typeof e?e(n):i(i({},n),e)),r},u=function(e){var n=g(e.components);return a.createElement(l.Provider,{value:n},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var r=e.components,t=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=g(r),d=t,m=p["".concat(l,".").concat(d)]||p[d]||c[d]||o;return r?a.createElement(m,i(i({ref:n},u),{},{components:r})):a.createElement(m,i({ref:n},u))}));function m(e,n){var r=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var o=r.length,i=new Array(o);i[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[p]="string"==typeof e?e:t,i[1]=s;for(var g=2;g<o;g++)i[g]=r[g];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},6841:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>g});var a=r(8168),t=(r(6540),r(5680));const o={layout:"post",title:"Hangfire - Enqueueing Background Jobs",subtitle:"Background Job Processing with Hangfire",date:new Date("2024-02-08T12:00:00.000Z"),author:"Truong Nhon",published:!0,catalog:!0,tags:["hangfire","backgroundJobs"]},i=void 0,s={permalink:"/2024/2/8/hangfire",editUrl:"https://github.com/nhonvo/nhonvo.github.io/edit/main/blog/blog/2024-2-8-hangfire.md",source:"@site/blog/2024-2-8-hangfire.md",title:"Hangfire - Enqueueing Background Jobs",description:"In modern web applications, handling time-consuming tasks asynchronously is crucial to providing a responsive user experience. One powerful tool for managing background job processing in .NET applications is Hangfire. In this blog post, we'll explore the basics of Hangfire and how it simplifies the implementation of background tasks.",date:"2024-02-08T12:00:00.000Z",formattedDate:"February 8, 2024",tags:[{label:"hangfire",permalink:"/tags/hangfire"},{label:"backgroundJobs",permalink:"/tags/background-jobs"}],readingTime:1.925,hasTruncateMarker:!1,authors:[{name:"Truong Nhon"}],frontMatter:{layout:"post",title:"Hangfire - Enqueueing Background Jobs",subtitle:"Background Job Processing with Hangfire",date:"2024-02-08T12:00:00.000Z",author:"Truong Nhon",published:!0,catalog:!0,tags:["hangfire","backgroundJobs"]},prevItem:{title:"Mongodb theory and examples code",permalink:"/2024/2/15/mongodb-theory-and-examples-code"},nextItem:{title:"Design-database",permalink:"/2024/2/6/Design-database"}},l={authorsImageUrls:[void 0]},g=[{value:"Getting Started",id:"getting-started",level:2},{value:"The Hangfire Workflow",id:"the-hangfire-workflow",level:2},{value:"Benefits of Hangfire",id:"benefits-of-hangfire",level:2}],u={toc:g},p="wrapper";function c(e){let{components:n,...r}=e;return(0,t.yg)(p,(0,a.A)({},u,r,{components:n,mdxType:"MDXLayout"}),(0,t.yg)("p",null,"In modern web applications, handling time-consuming tasks asynchronously is crucial to providing a responsive user experience. One powerful tool for managing background job processing in .NET applications is Hangfire. In this blog post, we'll explore the basics of Hangfire and how it simplifies the implementation of background tasks."),(0,t.yg)("h2",{id:"getting-started"},"Getting Started"),(0,t.yg)("p",null,"Hangfire provides a straightforward way to execute background tasks using a fire-and-forget approach. Let's look at a quick example:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-csharp"},'BackgroundJob.Enqueue(() => Console.WriteLine("Hello, world!"));\n')),(0,t.yg)("p",null,'In this example, BackgroundJob.Enqueue is used to queue a background job that prints "Hello, world!" to the console. The job is not executed immediately; instead, it goes through a serialization process and is stored persistently.'),(0,t.yg)("h2",{id:"the-hangfire-workflow"},"The Hangfire Workflow"),(0,t.yg)("p",null,"Hangfire operates on a workflow that involves the following key components:"),(0,t.yg)("ol",null,(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Enqueuing Jobs:"),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},"Jobs are enqueued using ",(0,t.yg)("inlineCode",{parentName:"li"},"BackgroundJob.Enqueue"),"."),(0,t.yg)("li",{parentName:"ul"},"The method and its arguments are serialized, creating a background job."))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Persistent Storage:"),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},"The serialized job information is stored in a persistent storage (e.g., a database)."))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Hangfire Server:"),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},"The Hangfire Server continually checks the persistent storage for enqueued jobs."),(0,t.yg)("li",{parentName:"ul"},"It performs the jobs in a reliable way, ensuring they are executed even if the process is terminated during execution."))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Worker Threads:"),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},"Enqueued jobs are handled by a dedicated pool of worker threads."),(0,t.yg)("li",{parentName:"ul"},"Each worker fetches, performs, and removes jobs from the queue."))),(0,t.yg)("li",{parentName:"ol"},(0,t.yg)("strong",{parentName:"li"},"Guaranteed Processing:"),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},"Jobs are only removed from the queue after successful processing."),(0,t.yg)("li",{parentName:"ul"},"Hangfire includes compensation logic to guarantee the processing of each job.")))),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},'BackgroundJob.Enqueue(() => Console.WriteLine("Hello, world!"))')),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-mermaid"},"graph TD\n\nsubgraph Enqueue\n  A[User] --\x3e|Enqueue| B[print `hello world` jobs]\nend\n\nsubgraph Background Job Processing\n  B --\x3e|Serialize| C[Create Background Job]\n  C --\x3e|Save to Storage| D[Persistent Storage]\n  D --\x3e|Enqueue| E[Queue]\nend\n\nsubgraph Hangfire Server\n  E --\x3e|Check for Jobs| F[Hangfire Server]\nend\n\nsubgraph Worker Threads\n  F --\x3e|Fetch Job| G[Worker Thread]\n  G --\x3e|Perform Job| H[Perform Job and Filters]\n  H --\x3e|Remove from Queue| I[Remove Job from Queue]\nend\n")),(0,t.yg)("h2",{id:"benefits-of-hangfire"},"Benefits of Hangfire"),(0,t.yg)("p",null,"Hangfire offers several advantages for background job processing:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Simplicity:")," Enqueuing jobs is as simple as passing a lambda expression."),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Reliability:")," Jobs are processed reliably, even in the face of process terminations."),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Asynchronous Execution:")," Background tasks can be executed asynchronously, improving application responsiveness."),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("strong",{parentName:"li"},"Monitoring and Management:")," Hangfire provides a dashboard for monitoring and managing background jobs.")))}c.isMDXComponent=!0}}]);