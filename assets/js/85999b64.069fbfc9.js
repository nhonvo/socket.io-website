"use strict";(self.webpackChunksample_website=self.webpackChunksample_website||[]).push([[1343],{5680:(e,n,a)=>{a.d(n,{xA:()=>p,yg:()=>d});var t=a(6540);function l(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function o(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?r(Object(a),!0).forEach((function(n){l(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function i(e,n){if(null==e)return{};var a,t,l=function(e,n){if(null==e)return{};var a,t,l={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(l[a]=e[a]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=t.createContext({}),c=function(e){var n=t.useContext(s),a=n;return e&&(a="function"==typeof e?e(n):o(o({},n),e)),a},p=function(e){var n=c(e.components);return t.createElement(s.Provider,{value:n},e.children)},g="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},y=t.forwardRef((function(e,n){var a=e.components,l=e.mdxType,r=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),g=c(a),y=l,d=g["".concat(s,".").concat(y)]||g[y]||m[y]||r;return a?t.createElement(d,o(o({ref:n},p),{},{components:a})):t.createElement(d,o({ref:n},p))}));function d(e,n){var a=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=a.length,o=new Array(r);o[0]=y;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[g]="string"==typeof e?e:l,o[1]=i;for(var c=2;c<r;c++)o[c]=a[c];return t.createElement.apply(null,o)}return t.createElement.apply(null,a)}y.displayName="MDXCreateElement"},2578:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>p,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>c,toc:()=>g});var t=a(8168),l=(a(6540),a(5680)),r=a(1653),o=a(6025);const i={title:"Client API",sidebar_label:"API",sidebar_position:1,slug:"/client-api/",toc_max_heading_level:4},s=void 0,c={unversionedId:"client-api",id:"client-api",title:"Client API",description:"IO",source:"@site/docs/client-api.md",sourceDirName:".",slug:"/client-api/",permalink:"/docs/v4/client-api/",draft:!1,editUrl:"https://github.com/socketio/socket.io-website/edit/main/docs/client-api.md",tags:[],version:"current",lastUpdatedAt:1712319740,formattedLastUpdatedAt:"Apr 5, 2024",sidebarPosition:1,frontMatter:{title:"Client API",sidebar_label:"API",sidebar_position:1,slug:"/client-api/",toc_max_heading_level:4},sidebar:"clientSidebar",next:{title:"Options",permalink:"/docs/v4/client-options/"}},p={},g=[{value:"IO",id:"io",level:2},{value:"io.protocol",id:"ioprotocol",level:3},{value:"io(url)",id:"iourl",level:3},{value:"Manager",id:"manager",level:2},{value:"Constructor",id:"constructor",level:3},{value:"new Manager(url, options)",id:"new-managerurl-options",level:4},{value:"Events",id:"events",level:3},{value:"Event: &#39;error&#39;",id:"event-error",level:4},{value:"Event: &#39;ping&#39;",id:"event-ping",level:4},{value:"Event: &#39;reconnect&#39;",id:"event-reconnect",level:4},{value:"Event: &#39;reconnect_attempt&#39;",id:"event-reconnect_attempt",level:4},{value:"Event: &#39;reconnect_error&#39;",id:"event-reconnect_error",level:4},{value:"Event: &#39;reconnect_failed&#39;",id:"event-reconnect_failed",level:4},{value:"Methods",id:"methods",level:3},{value:"manager.connect(callback)",id:"managerconnectcallback",level:4},{value:"manager.open(callback)",id:"manageropencallback",level:4},{value:"manager.reconnection(value)",id:"managerreconnectionvalue",level:4},{value:"manager.reconnectionAttempts(value)",id:"managerreconnectionattemptsvalue",level:4},{value:"manager.reconnectionDelay(value)",id:"managerreconnectiondelayvalue",level:4},{value:"manager.reconnectionDelayMax(value)",id:"managerreconnectiondelaymaxvalue",level:4},{value:"manager.socket(nsp, options)",id:"managersocketnsp-options",level:4},{value:"manager.timeout(value)",id:"managertimeoutvalue",level:4},{value:"Socket",id:"socket",level:2},{value:"Events",id:"events-1",level:3},{value:"Event: &#39;connect&#39;",id:"event-connect",level:4},{value:"Event: &#39;connect_error&#39;",id:"event-connect_error",level:4},{value:"Event: &#39;disconnect&#39;",id:"event-disconnect",level:4},{value:"Attributes",id:"attributes",level:3},{value:"socket.active",id:"socketactive",level:4},{value:"socket.connected",id:"socketconnected",level:4},{value:"socket.disconnected",id:"socketdisconnected",level:4},{value:"socket.id",id:"socketid",level:4},{value:"socket.io",id:"socketio",level:4},{value:"socket.recovered",id:"socketrecovered",level:4},{value:"Methods",id:"methods-1",level:3},{value:"socket.close()",id:"socketclose",level:4},{value:"socket.compress(value)",id:"socketcompressvalue",level:4},{value:"socket.connect()",id:"socketconnect",level:4},{value:"socket.disconnect()",id:"socketdisconnect",level:4},{value:"socket.emit(eventName, ...args)",id:"socketemiteventname-args",level:4},{value:"socket.emitWithAck(eventName, ...args)",id:"socketemitwithackeventname-args",level:4},{value:"socket.listeners(eventName)",id:"socketlistenerseventname",level:4},{value:"socket.listenersAny()",id:"socketlistenersany",level:4},{value:"socket.listenersAnyOutgoing()",id:"socketlistenersanyoutgoing",level:4},{value:"socket.off(eventName)",id:"socketoffeventname",level:4},{value:"socket.offAny(listener)",id:"socketoffanylistener",level:4},{value:"socket.offAnyOutgoing(listener)",id:"socketoffanyoutgoinglistener",level:4},{value:"socket.on(eventName, callback)",id:"socketoneventname-callback",level:4},{value:"socket.onAny(callback)",id:"socketonanycallback",level:4},{value:"socket.onAnyOutgoing(callback)",id:"socketonanyoutgoingcallback",level:4},{value:"socket.once(eventName, callback)",id:"socketonceeventname-callback",level:4},{value:"socket.open()",id:"socketopen",level:4},{value:"socket.prependAny(callback)",id:"socketprependanycallback",level:4},{value:"socket.prependAnyOutgoing(callback)",id:"socketprependanyoutgoingcallback",level:4},{value:"socket.send(...args)",id:"socketsendargs",level:4},{value:"socket.timeout(value)",id:"sockettimeoutvalue",level:4},{value:"Flags",id:"flags",level:3},{value:"Flag: &#39;volatile&#39;",id:"flag-volatile",level:4}],m={toc:g},y="wrapper";function d(e){let{components:n,...a}=e;return(0,l.yg)(y,(0,t.A)({},m,a,{components:n,mdxType:"MDXLayout"}),(0,l.yg)("h2",{id:"io"},"IO"),(0,l.yg)("p",null,"The ",(0,l.yg)("inlineCode",{parentName:"p"},"io")," method is bound to the global scope in the standalone build:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-html"},'<script src="/socket.io/socket.io.js"><\/script>\n<script>\n  const socket = io();\n<\/script>\n')),(0,l.yg)("p",null,"An ESM bundle is also available since version ",(0,l.yg)("a",{parentName:"p",href:"/blog/socket-io-4-3-0/"},"4.3.0"),":"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-html"},'<script type="module">\n  import { io } from "https://cdn.socket.io/4.7.5/socket.io.esm.min.js";\n\n  const socket = io();\n<\/script>\n')),(0,l.yg)("p",null,"With an ",(0,l.yg)("a",{parentName:"p",href:"https://caniuse.com/import-maps"},"import map"),":"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-html"},'<script type="importmap">\n  {\n    "imports": {\n      "socket.io-client": "https://cdn.socket.io/4.7.5/socket.io.esm.min.js"\n    }\n  }\n<\/script>\n\n<script type="module">\n  import { io } from "socket.io-client";\n\n  const socket = io();\n<\/script>\n')),(0,l.yg)("p",null,"Else, in all other cases (with some build tools, in Node.js or React Native), it can be imported from the ",(0,l.yg)("inlineCode",{parentName:"p"},"socket.io-client")," package:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'// ES modules\nimport { io } from "socket.io-client";\n\n// CommonJS\nconst { io } = require("socket.io-client");\n')),(0,l.yg)("h3",{id:"ioprotocol"},"io.protocol"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#number_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<number>")))),(0,l.yg)("p",null,"The protocol revision number (currently: 5)."),(0,l.yg)("p",null,"The protocol defines the format of the packets exchanged between the client and the server. Both the client and the server must use the same revision in order to understand each other."),(0,l.yg)("p",null,"You can find more information ",(0,l.yg)("a",{parentName:"p",href:"https://github.com/socketio/socket.io-protocol"},"here"),"."),(0,l.yg)("h3",{id:"iourl"},"io(","[url][, options]",")"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"url")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#string_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<string>"))," (defaults to ",(0,l.yg)("inlineCode",{parentName:"li"},"window.location.host"),")"),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"options")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object"},(0,l.yg)("inlineCode",{parentName:"a"},"<Object>")),(0,l.yg)("ul",{parentName:"li"},(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"forceNew")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#boolean_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<boolean>"))," whether to create a new connection"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#socket"},(0,l.yg)("inlineCode",{parentName:"a"},"<Socket>")))),(0,l.yg)("p",null,"Creates a new ",(0,l.yg)("inlineCode",{parentName:"p"},"Manager")," for the given URL, and attempts to reuse an existing ",(0,l.yg)("inlineCode",{parentName:"p"},"Manager")," for subsequent calls, unless the ",(0,l.yg)("inlineCode",{parentName:"p"},"multiplex")," option is passed with ",(0,l.yg)("inlineCode",{parentName:"p"},"false"),". Passing this option is the equivalent of passing ",(0,l.yg)("inlineCode",{parentName:"p"},'"force new connection": true')," or ",(0,l.yg)("inlineCode",{parentName:"p"},"forceNew: true"),"."),(0,l.yg)("p",null,"A new ",(0,l.yg)("inlineCode",{parentName:"p"},"Socket")," instance is returned for the namespace specified by the pathname in the URL, defaulting to ",(0,l.yg)("inlineCode",{parentName:"p"},"/"),". For example, if the ",(0,l.yg)("inlineCode",{parentName:"p"},"url")," is ",(0,l.yg)("inlineCode",{parentName:"p"},"http://localhost/users"),", a transport connection will be established to ",(0,l.yg)("inlineCode",{parentName:"p"},"http://localhost")," and a Socket.IO connection will be established to ",(0,l.yg)("inlineCode",{parentName:"p"},"/users"),"."),(0,l.yg)("p",null,"Query parameters can also be provided, either with the ",(0,l.yg)("inlineCode",{parentName:"p"},"query")," option or directly in the url (example: ",(0,l.yg)("inlineCode",{parentName:"p"},"http://localhost/users?token=abc"),")."),(0,l.yg)("p",null,"To understand what happens under the hood, the following example:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io("ws://example.com/my-namespace", {\n  reconnectionDelayMax: 10000,\n  auth: {\n    token: "123"\n  },\n  query: {\n    "my-key": "my-value"\n  }\n});\n')),(0,l.yg)("p",null,"is the short version of:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'import { Manager } from "socket.io-client";\n\nconst manager = new Manager("ws://example.com", {\n  reconnectionDelayMax: 10000,\n  query: {\n    "my-key": "my-value"\n  }\n});\n\nconst socket = manager.socket("/my-namespace", {\n  auth: {\n    token: "123"\n  }\n});\n')),(0,l.yg)("p",null,"The complete list of available options can be found ",(0,l.yg)("a",{parentName:"p",href:"/docs/v4/client-options/"},"here"),"."),(0,l.yg)("h2",{id:"manager"},"Manager"),(0,l.yg)(r.A,{alt:"Manager in the class diagram for the client",sources:{light:(0,o.A)("/images/client-class-diagram-manager.png"),dark:(0,o.A)("/images/client-class-diagram-manager-dark.png")},mdxType:"ThemedImage"}),(0,l.yg)("p",null,"The ",(0,l.yg)("inlineCode",{parentName:"p"},"Manager")," ",(0,l.yg)("em",{parentName:"p"},"manages")," the Engine.IO ",(0,l.yg)("a",{parentName:"p",href:"https://github.com/socketio/engine.io-client/"},"client")," instance, which is the low-level engine that establishes the connection to the server (by using transports like WebSocket or HTTP long-polling)."),(0,l.yg)("p",null,"The ",(0,l.yg)("inlineCode",{parentName:"p"},"Manager")," handles the reconnection logic."),(0,l.yg)("p",null,"A single ",(0,l.yg)("inlineCode",{parentName:"p"},"Manager")," can be used by several ",(0,l.yg)("a",{parentName:"p",href:"#socket"},"Sockets"),". You can find more information about this multiplexing feature ",(0,l.yg)("a",{parentName:"p",href:"/docs/v4/namespaces/"},"here"),"."),(0,l.yg)("p",null,"Please note that, in most cases, you won't use the Manager directly but use the ",(0,l.yg)("a",{parentName:"p",href:"#socket"},"Socket")," instance instead."),(0,l.yg)("h3",{id:"constructor"},"Constructor"),(0,l.yg)("h4",{id:"new-managerurl-options"},"new Manager(url","[, options]",")"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"url")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#string_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<string>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"options")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object"},(0,l.yg)("inlineCode",{parentName:"a"},"<Object>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#manager"},(0,l.yg)("inlineCode",{parentName:"a"},"<Manager>")))),(0,l.yg)("p",null,"The complete list of available options can be found ",(0,l.yg)("a",{parentName:"p",href:"/docs/v4/client-options/"},"here"),"."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'import { Manager } from "socket.io-client";\n\nconst manager = new Manager("https://example.com");\n\nconst socket = manager.socket("/"); // main namespace\nconst adminSocket = manager.socket("/admin"); // admin namespace\n')),(0,l.yg)("h3",{id:"events"},"Events"),(0,l.yg)("h4",{id:"event-error"},"Event: 'error'"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"error")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error"},(0,l.yg)("inlineCode",{parentName:"a"},"<Error>"))," error object")),(0,l.yg)("p",null,"Fired upon a connection error."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.io.on("error", (error) => {\n  // ...\n});\n')),(0,l.yg)("h4",{id:"event-ping"},"Event: 'ping'"),(0,l.yg)("p",null,"Fired when a ping packet is received from the server."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.io.on("ping", () => {\n  // ...\n});\n')),(0,l.yg)("h4",{id:"event-reconnect"},"Event: 'reconnect'"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"attempt")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#number_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<number>"))," reconnection attempt number")),(0,l.yg)("p",null,"Fired upon a successful reconnection."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.io.on("reconnect", (attempt) => {\n  // ...\n});\n')),(0,l.yg)("h4",{id:"event-reconnect_attempt"},"Event: 'reconnect_attempt'"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"attempt")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#number_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<number>"))," reconnection attempt number")),(0,l.yg)("p",null,"Fired upon an attempt to reconnect."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.io.on("reconnect_attempt", (attempt) => {\n  // ...\n});\n')),(0,l.yg)("h4",{id:"event-reconnect_error"},"Event: 'reconnect_error'"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"error")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error"},(0,l.yg)("inlineCode",{parentName:"a"},"<Error>"))," error object")),(0,l.yg)("p",null,"Fired upon a reconnection attempt error."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.io.on("reconnect_error", (error) => {\n  // ...\n});\n')),(0,l.yg)("h4",{id:"event-reconnect_failed"},"Event: 'reconnect_failed'"),(0,l.yg)("p",null,"Fired when couldn't reconnect within ",(0,l.yg)("inlineCode",{parentName:"p"},"reconnectionAttempts"),"."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.io.on("reconnect_failed", () => {\n  // ...\n});\n')),(0,l.yg)("h3",{id:"methods"},"Methods"),(0,l.yg)("h4",{id:"managerconnectcallback"},"manager.connect(","[callback]",")"),(0,l.yg)("p",null,"Synonym of ",(0,l.yg)("a",{parentName:"p",href:"#manageropencallback"},"manager.open([callback])"),"."),(0,l.yg)("h4",{id:"manageropencallback"},"manager.open(","[callback]",")"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"callback")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#manager"},(0,l.yg)("inlineCode",{parentName:"a"},"<Manager>")))),(0,l.yg)("p",null,"If the manager was initiated with ",(0,l.yg)("inlineCode",{parentName:"p"},"autoConnect")," to ",(0,l.yg)("inlineCode",{parentName:"p"},"false"),", launch a new connection attempt."),(0,l.yg)("p",null,"The ",(0,l.yg)("inlineCode",{parentName:"p"},"callback")," argument is optional and will be called once the attempt fails/succeeds."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'import { Manager } from "socket.io-client";\n\nconst manager = new Manager("https://example.com", {\n  autoConnect: false\n});\n\nconst socket = manager.socket("/");\n\nmanager.open((err) => {\n  if (err) {\n    // an error has occurred\n  } else {\n    // the connection was successfully established\n  }\n});\n')),(0,l.yg)("h4",{id:"managerreconnectionvalue"},"manager.reconnection(","[value]",")"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"value")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#boolean_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<boolean>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#manager"},(0,l.yg)("inlineCode",{parentName:"a"},"<Manager>"))," | ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#boolean_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<boolean>")))),(0,l.yg)("p",null,"Sets the ",(0,l.yg)("inlineCode",{parentName:"p"},"reconnection")," option, or returns it if no parameters are passed."),(0,l.yg)("h4",{id:"managerreconnectionattemptsvalue"},"manager.reconnectionAttempts(","[value]",")"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"value")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#number_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<number>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#manager"},(0,l.yg)("inlineCode",{parentName:"a"},"<Manager>"))," | ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#number_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<number>")))),(0,l.yg)("p",null,"Sets the ",(0,l.yg)("inlineCode",{parentName:"p"},"reconnectionAttempts")," option, or returns it if no parameters are passed."),(0,l.yg)("h4",{id:"managerreconnectiondelayvalue"},"manager.reconnectionDelay(","[value]",")"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"value")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#number_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<number>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#manager"},(0,l.yg)("inlineCode",{parentName:"a"},"<Manager>"))," | ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#number_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<number>")))),(0,l.yg)("p",null,"Sets the ",(0,l.yg)("inlineCode",{parentName:"p"},"reconnectionDelay")," option, or returns it if no parameters are passed."),(0,l.yg)("h4",{id:"managerreconnectiondelaymaxvalue"},"manager.reconnectionDelayMax(","[value]",")"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"value")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#number_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<number>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#manager"},(0,l.yg)("inlineCode",{parentName:"a"},"<Manager>"))," | ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#number_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<number>")))),(0,l.yg)("p",null,"Sets the ",(0,l.yg)("inlineCode",{parentName:"p"},"reconnectionDelayMax")," option, or returns it if no parameters are passed."),(0,l.yg)("h4",{id:"managersocketnsp-options"},"manager.socket(nsp, options)"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"nsp")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#string_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<string>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"options")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object"},(0,l.yg)("inlineCode",{parentName:"a"},"<Object>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#socket"},(0,l.yg)("inlineCode",{parentName:"a"},"<Socket>")))),(0,l.yg)("p",null,"Creates a new ",(0,l.yg)("inlineCode",{parentName:"p"},"Socket")," for the given namespace. Only ",(0,l.yg)("inlineCode",{parentName:"p"},"auth")," (",(0,l.yg)("inlineCode",{parentName:"p"},'{ auth: {key: "value"} }'),") is read from the ",(0,l.yg)("inlineCode",{parentName:"p"},"options")," object. Other keys will be ignored and should be passed when instancing a ",(0,l.yg)("inlineCode",{parentName:"p"},"new Manager(nsp, options)"),"."),(0,l.yg)("h4",{id:"managertimeoutvalue"},"manager.timeout(","[value]",")"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"value")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#number_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<number>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#manager"},(0,l.yg)("inlineCode",{parentName:"a"},"<Manager>"))," | ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#number_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<number>")))),(0,l.yg)("p",null,"Sets the ",(0,l.yg)("inlineCode",{parentName:"p"},"timeout")," option, or returns it if no parameters are passed."),(0,l.yg)("h2",{id:"socket"},"Socket"),(0,l.yg)(r.A,{alt:"Socket in the class diagram for the client",sources:{light:(0,o.A)("/images/client-class-diagram-socket.png"),dark:(0,o.A)("/images/client-class-diagram-socket-dark.png")},mdxType:"ThemedImage"}),(0,l.yg)("p",null,"A ",(0,l.yg)("inlineCode",{parentName:"p"},"Socket")," is the fundamental class for interacting with the server. A ",(0,l.yg)("inlineCode",{parentName:"p"},"Socket")," belongs to a certain ",(0,l.yg)("a",{parentName:"p",href:"/docs/v4/namespaces/"},"Namespace")," (by default ",(0,l.yg)("inlineCode",{parentName:"p"},"/"),") and uses an underlying ",(0,l.yg)("a",{parentName:"p",href:"#manager"},"Manager")," to communicate."),(0,l.yg)("p",null,"A ",(0,l.yg)("inlineCode",{parentName:"p"},"Socket")," is basically an ",(0,l.yg)("a",{parentName:"p",href:"https://nodejs.org/api/events.html#events_class_eventemitter"},"EventEmitter")," which sends events to \u2014 and receive events from \u2014 the server over the network."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.emit("hello", { a: "b", c: [] });\n\nsocket.on("hey", (...args) => {\n  // ...\n});\n')),(0,l.yg)("p",null,"More information can be found ",(0,l.yg)("a",{parentName:"p",href:"/docs/v4/client-socket-instance/"},"here"),"."),(0,l.yg)("h3",{id:"events-1"},"Events"),(0,l.yg)("h4",{id:"event-connect"},"Event: 'connect'"),(0,l.yg)("p",null,"This event is fired by the Socket instance upon connection ",(0,l.yg)("strong",{parentName:"p"},"and")," reconnection."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("connect", () => {\n  // ...\n});\n')),(0,l.yg)("admonition",{type:"caution"},(0,l.yg)("p",{parentName:"admonition"},"Event handlers shouldn't be registered in the ",(0,l.yg)("inlineCode",{parentName:"p"},"connect")," handler itself, as a new handler will be registered every time the socket instance reconnects:"),(0,l.yg)("p",{parentName:"admonition"},"BAD \u26a0\ufe0f"),(0,l.yg)("pre",{parentName:"admonition"},(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("connect", () => {\n  socket.on("data", () => { /* ... */ });\n});\n')),(0,l.yg)("p",{parentName:"admonition"},"GOOD \ud83d\udc4d"),(0,l.yg)("pre",{parentName:"admonition"},(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("connect", () => {\n  // ...\n});\n\nsocket.on("data", () => { /* ... */ });\n'))),(0,l.yg)("h4",{id:"event-connect_error"},"Event: 'connect_error'"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"error")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error"},(0,l.yg)("inlineCode",{parentName:"a"},"<Error>")))),(0,l.yg)("p",null,"This event is fired upon connection failure."),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Reason"),(0,l.yg)("th",{parentName:"tr",align:null},"Automatic reconnection?"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"The low-level connection cannot be established (temporary failure)"),(0,l.yg)("td",{parentName:"tr",align:null},"\u2705 YES")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},"The connection was denied by the server in a ",(0,l.yg)("a",{parentName:"td",href:"/docs/v4/middlewares/"},"middleware function")),(0,l.yg)("td",{parentName:"tr",align:null},"\u274c NO")))),(0,l.yg)("p",null,"The ",(0,l.yg)("a",{parentName:"p",href:"#socketactive"},(0,l.yg)("inlineCode",{parentName:"a"},"socket.active"))," attribute indicates whether the socket will automatically try to reconnect after a small ",(0,l.yg)("a",{parentName:"p",href:"/docs/v4/client-options/#reconnectiondelay"},"randomized delay"),":"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("connect_error", (error) => {\n  if (socket.active) {\n    // temporary failure, the socket will automatically try to reconnect\n  } else {\n    // the connection was denied by the server\n    // in that case, `socket.connect()` must be manually called in order to reconnect\n    console.log(error.message);\n  }\n});\n')),(0,l.yg)("h4",{id:"event-disconnect"},"Event: 'disconnect'"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"reason")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#string_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<string>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"details")," ",(0,l.yg)("inlineCode",{parentName:"li"},"<DisconnectDetails>"))),(0,l.yg)("p",null,"This event is fired upon disconnection."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("disconnect", (reason, details) => {\n  // ...\n});\n')),(0,l.yg)("p",null,"Here is the list of possible reasons:"),(0,l.yg)("table",null,(0,l.yg)("thead",{parentName:"table"},(0,l.yg)("tr",{parentName:"thead"},(0,l.yg)("th",{parentName:"tr",align:null},"Reason"),(0,l.yg)("th",{parentName:"tr",align:null},"Description"),(0,l.yg)("th",{parentName:"tr",align:"left"},"Automatic reconnection?"))),(0,l.yg)("tbody",{parentName:"table"},(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"io server disconnect")),(0,l.yg)("td",{parentName:"tr",align:null},"The server has forcefully disconnected the socket with ",(0,l.yg)("a",{parentName:"td",href:"/docs/v4/server-api/#socketdisconnectclose"},"socket.disconnect()")),(0,l.yg)("td",{parentName:"tr",align:"left"},"\u274c NO")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"io client disconnect")),(0,l.yg)("td",{parentName:"tr",align:null},"The socket was manually disconnected using ",(0,l.yg)("a",{parentName:"td",href:"/docs/v4/client-api/#socketdisconnect"},"socket.disconnect()")),(0,l.yg)("td",{parentName:"tr",align:"left"},"\u274c NO")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"ping timeout")),(0,l.yg)("td",{parentName:"tr",align:null},"The server did not send a PING within the ",(0,l.yg)("inlineCode",{parentName:"td"},"pingInterval + pingTimeout")," range"),(0,l.yg)("td",{parentName:"tr",align:"left"},"\u2705 YES")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"transport close")),(0,l.yg)("td",{parentName:"tr",align:null},"The connection was closed (example: the user has lost connection, or the network was changed from WiFi to 4G)"),(0,l.yg)("td",{parentName:"tr",align:"left"},"\u2705 YES")),(0,l.yg)("tr",{parentName:"tbody"},(0,l.yg)("td",{parentName:"tr",align:null},(0,l.yg)("inlineCode",{parentName:"td"},"transport error")),(0,l.yg)("td",{parentName:"tr",align:null},"The connection has encountered an error (example: the server was killed during a HTTP long-polling cycle)"),(0,l.yg)("td",{parentName:"tr",align:"left"},"\u2705 YES")))),(0,l.yg)("p",null,"The ",(0,l.yg)("a",{parentName:"p",href:"#socketactive"},(0,l.yg)("inlineCode",{parentName:"a"},"socket.active"))," attribute indicates whether the socket will automatically try to reconnect after a small ",(0,l.yg)("a",{parentName:"p",href:"/docs/v4/client-options/#reconnectiondelay"},"randomized delay"),":"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("disconnect", (reason) => {\n  if (socket.active) {\n    // temporary disconnection, the socket will automatically try to reconnect\n  } else {\n    // the connection was forcefully closed by the server or the client itself\n    // in that case, `socket.connect()` must be manually called in order to reconnect\n    console.log(reason);\n  }\n});\n')),(0,l.yg)("h3",{id:"attributes"},"Attributes"),(0,l.yg)("h4",{id:"socketactive"},"socket.active"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#boolean_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<boolean>")))),(0,l.yg)("p",null,"Whether the socket will automatically try to reconnect."),(0,l.yg)("p",null,"This attribute can be used after a connection failure:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("connect_error", (error) => {\n  if (socket.active) {\n    // temporary failure, the socket will automatically try to reconnect\n  } else {\n    // the connection was denied by the server\n    // in that case, `socket.connect()` must be manually called in order to reconnect\n    console.log(error.message);\n  }\n});\n')),(0,l.yg)("p",null,"Or after a disconnection:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("disconnect", (reason) => {\n  if (socket.active) {\n    // temporary disconnection, the socket will automatically try to reconnect\n  } else {\n    // the connection was forcefully closed by the server or the client itself\n    // in that case, `socket.connect()` must be manually called in order to reconnect\n    console.log(reason);\n  }\n});\n')),(0,l.yg)("h4",{id:"socketconnected"},"socket.connected"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#boolean_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<boolean>")))),(0,l.yg)("p",null,"Whether the socket is currently connected to the server."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'const socket = io();\n\nconsole.log(socket.connected); // false\n\nsocket.on("connect", () => {\n  console.log(socket.connected); // true\n});\n')),(0,l.yg)("h4",{id:"socketdisconnected"},"socket.disconnected"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#boolean_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<boolean>")))),(0,l.yg)("p",null,"Whether the socket is currently disconnected from the server."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'const socket = io();\n\nconsole.log(socket.disconnected); // true\n\nsocket.on("connect", () => {\n  console.log(socket.disconnected); // false\n});\n')),(0,l.yg)("h4",{id:"socketid"},"socket.id"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#string_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<string>")))),(0,l.yg)("p",null,"A unique identifier for the socket session. Set after the ",(0,l.yg)("inlineCode",{parentName:"p"},"connect")," event is triggered, and updated after the ",(0,l.yg)("inlineCode",{parentName:"p"},"reconnect")," event."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'const socket = io();\n\nconsole.log(socket.id); // undefined\n\nsocket.on("connect", () => {\n  console.log(socket.id); // "G5p5..."\n});\n')),(0,l.yg)("admonition",{type:"caution"},(0,l.yg)("p",{parentName:"admonition"},"The ",(0,l.yg)("inlineCode",{parentName:"p"},"id")," attribute is an ",(0,l.yg)("strong",{parentName:"p"},"ephemeral")," ID that is not meant to be used in your application (or only for debugging purposes) because:"),(0,l.yg)("ul",{parentName:"admonition"},(0,l.yg)("li",{parentName:"ul"},"this ID is regenerated after each reconnection (for example when the WebSocket connection is severed, or when the user refreshes the page)"),(0,l.yg)("li",{parentName:"ul"},"two different browser tabs will have two different IDs"),(0,l.yg)("li",{parentName:"ul"},"there is no message queue stored for a given ID on the server (i.e. if the client is disconnected, the messages sent from the server to this ID are lost)")),(0,l.yg)("p",{parentName:"admonition"},"Please use a regular session ID instead (either sent in a cookie, or stored in the localStorage and sent in the ",(0,l.yg)("a",{parentName:"p",href:"/docs/v4/client-options/#auth"},(0,l.yg)("inlineCode",{parentName:"a"},"auth"))," payload)."),(0,l.yg)("p",{parentName:"admonition"},"See also:"),(0,l.yg)("ul",{parentName:"admonition"},(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"/get-started/private-messaging-part-2/"},"Part II of our private message guide")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"/how-to/deal-with-cookies"},"How to deal with cookies")))),(0,l.yg)("h4",{id:"socketio"},"socket.io"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"#manager"},(0,l.yg)("inlineCode",{parentName:"a"},"<Manager>")))),(0,l.yg)("p",null,"A reference to the underlying ",(0,l.yg)("a",{parentName:"p",href:"#manager"},"Manager"),"."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("connect", () => {\n  const engine = socket.io.engine;\n  console.log(engine.transport.name); // in most cases, prints "polling"\n\n  engine.once("upgrade", () => {\n    // called when the transport is upgraded (i.e. from HTTP long-polling to WebSocket)\n    console.log(engine.transport.name); // in most cases, prints "websocket"\n  });\n\n  engine.on("packet", ({ type, data }) => {\n    // called for each packet received\n  });\n\n  engine.on("packetCreate", ({ type, data }) => {\n    // called for each packet sent\n  });\n\n  engine.on("drain", () => {\n    // called when the write buffer is drained\n  });\n\n  engine.on("close", (reason) => {\n    // called when the underlying connection is closed\n  });\n});\n')),(0,l.yg)("h4",{id:"socketrecovered"},"socket.recovered"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v4.6.0")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#boolean_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<boolean>")))),(0,l.yg)("p",null,"Whether the connection state was successfully recovered during the last reconnection."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("connect", () => {\n  if (socket.recovered) {\n    // any event missed during the disconnection period will be received now\n  } else {\n    // new or unrecoverable session\n  }\n});\n')),(0,l.yg)("p",null,"More information about this feature ",(0,l.yg)("a",{parentName:"p",href:"/docs/v4/connection-state-recovery"},"here"),"."),(0,l.yg)("h3",{id:"methods-1"},"Methods"),(0,l.yg)("h4",{id:"socketclose"},"socket.close()"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v1.0.0")),(0,l.yg)("p",null,"Synonym of ",(0,l.yg)("a",{parentName:"p",href:"#socketdisconnect"},"socket.disconnect()"),"."),(0,l.yg)("h4",{id:"socketcompressvalue"},"socket.compress(value)"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"value")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#boolean_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<boolean>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#socket"},(0,l.yg)("inlineCode",{parentName:"a"},"<Socket>")))),(0,l.yg)("p",null,"Sets a modifier for a subsequent event emission that the event data will only be ",(0,l.yg)("em",{parentName:"p"},"compressed")," if the value is ",(0,l.yg)("inlineCode",{parentName:"p"},"true"),". Defaults to ",(0,l.yg)("inlineCode",{parentName:"p"},"true")," when you don't call the method."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.compress(false).emit("an event", { some: "data" });\n')),(0,l.yg)("h4",{id:"socketconnect"},"socket.connect()"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v1.0.0")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("inlineCode",{parentName:"li"},"Socket"))),(0,l.yg)("p",null,"Manually connects the socket."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const socket = io({\n  autoConnect: false\n});\n\n// ...\nsocket.connect();\n")),(0,l.yg)("p",null,"It can also be used to manually reconnect:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("disconnect", () => {\n  socket.connect();\n});\n')),(0,l.yg)("h4",{id:"socketdisconnect"},"socket.disconnect()"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v1.0.0")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#socket"},(0,l.yg)("inlineCode",{parentName:"a"},"<Socket>")))),(0,l.yg)("p",null,"Manually disconnects the socket. In that case, the socket will not try to reconnect."),(0,l.yg)("p",null,"Associated disconnection reason:"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"client-side: ",(0,l.yg)("inlineCode",{parentName:"li"},'"io client disconnect"')),(0,l.yg)("li",{parentName:"ul"},"server-side: ",(0,l.yg)("inlineCode",{parentName:"li"},'"client namespace disconnect"'))),(0,l.yg)("p",null,"If this is the last active Socket instance of the Manager, the low-level connection will be closed."),(0,l.yg)("h4",{id:"socketemiteventname-args"},"socket.emit(eventName","[, ...args][, ack]",")"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"eventName")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#string_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<string>"))," | ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#symbol_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<symbol>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"args")," ",(0,l.yg)("inlineCode",{parentName:"li"},"<any[]>")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"ack")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("inlineCode",{parentName:"li"},"true"))),(0,l.yg)("p",null,"Emits an event to the socket identified by the string name. Any other parameters can be included. All serializable data structures are supported, including ",(0,l.yg)("inlineCode",{parentName:"p"},"Buffer"),"."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.emit("hello", "world");\nsocket.emit("with-binary", 1, "2", { 3: "4", 5: Buffer.from([6, 7, 8]) });\n')),(0,l.yg)("p",null,"The ",(0,l.yg)("inlineCode",{parentName:"p"},"ack")," argument is optional and will be called with the server answer."),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Client")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.emit("hello", "world", (response) => {\n  console.log(response); // "got it"\n});\n')),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Server")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'io.on("connection", (socket) => {\n  socket.on("hello", (arg, callback) => {\n    console.log(arg); // "world"\n    callback("got it");\n  });\n});\n')),(0,l.yg)("h4",{id:"socketemitwithackeventname-args"},"socket.emitWithAck(eventName","[, ...args]",")"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v4.6.0")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"eventName")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#string_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<string>"))," | ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#symbol_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<symbol>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"args")," ",(0,l.yg)("inlineCode",{parentName:"li"},"any[]")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"},(0,l.yg)("inlineCode",{parentName:"a"},"Promise<any>")))),(0,l.yg)("p",null,"Promised-based version of emitting and expecting an acknowledgement from the server:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'// without timeout\nconst response = await socket.emitWithAck("hello", "world");\n\n// with a specific timeout\ntry {\n  const response = await socket.timeout(10000).emitWithAck("hello", "world");\n} catch (err) {\n  // the server did not acknowledge the event in the given delay\n}\n')),(0,l.yg)("p",null,"The example above is equivalent to:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'// without timeout\nsocket.emit("hello", "world", (val) => {\n  // ...\n});\n\n// with a specific timeout\nsocket.timeout(10000).emit("hello", "world", (err, val) => {\n  // ...\n});\n')),(0,l.yg)("p",null,"And on the receiving side:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'io.on("connection", (socket) => {\n  socket.on("hello", (arg1, callback) => {\n    callback("got it"); // only one argument is expected\n  });\n});\n')),(0,l.yg)("admonition",{type:"caution"},(0,l.yg)("p",{parentName:"admonition"},"Environments that ",(0,l.yg)("a",{parentName:"p",href:"https://caniuse.com/promises"},"do not support Promises")," will need to add a polyfill in order to use this feature.")),(0,l.yg)("h4",{id:"socketlistenerseventname"},"socket.listeners(eventName)"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Inherited from the ",(0,l.yg)("a",{parentName:"em",href:"https://www.npmjs.com/package/@socket.io/component-emitter"},"EventEmitter class"),".")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"eventName")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#string_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<string>"))," | ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#symbol_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<symbol>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function[]>")))),(0,l.yg)("p",null,"Returns the array of listeners for the event named ",(0,l.yg)("inlineCode",{parentName:"p"},"eventName"),"."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("my-event", () => {\n  // ...\n});\n\nconsole.log(socket.listeners("my-event")); // prints [ [Function] ]\n')),(0,l.yg)("h4",{id:"socketlistenersany"},"socket.listenersAny()"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v3.0.0")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function[]>")))),(0,l.yg)("p",null,"Returns the list of registered catch-all listeners."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const listeners = socket.listenersAny();\n")),(0,l.yg)("h4",{id:"socketlistenersanyoutgoing"},"socket.listenersAnyOutgoing()"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v4.5.0")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function[]>")))),(0,l.yg)("p",null,"Returns the list of registered catch-all listeners for outgoing packets."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const listeners = socket.listenersAnyOutgoing();\n")),(0,l.yg)("h4",{id:"socketoffeventname"},"socket.off(","[eventName][, listener]",")"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Inherited from the ",(0,l.yg)("a",{parentName:"em",href:"https://www.npmjs.com/package/@socket.io/component-emitter"},"EventEmitter class"),".")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"eventName")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#string_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<string>"))," | ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#symbol_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<symbol>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"listener")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#socket"},(0,l.yg)("inlineCode",{parentName:"a"},"<Socket>")))),(0,l.yg)("p",null,"Removes the specified ",(0,l.yg)("inlineCode",{parentName:"p"},"listener")," from the listener array for the event named ",(0,l.yg)("inlineCode",{parentName:"p"},"eventName"),"."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'const myListener = () => {\n  // ...\n}\n\nsocket.on("my-event", myListener);\n\n// then later\nsocket.off("my-event", myListener);\n')),(0,l.yg)("p",null,"The ",(0,l.yg)("inlineCode",{parentName:"p"},"listener")," argument can also be omitted:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'// remove all listeners for that event\nsocket.off("my-event");\n\n// remove all listeners for all events\nsocket.off();\n')),(0,l.yg)("h4",{id:"socketoffanylistener"},"socket.offAny(","[listener]",")"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v3.0.0")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"listener")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function>")))),(0,l.yg)("p",null,"Removes the previously registered listener. If no listener is provided, all catch-all listeners are removed."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const myListener = () => { /* ... */ };\n\nsocket.onAny(myListener);\n\n// then, later\nsocket.offAny(myListener);\n\nsocket.offAny();\n")),(0,l.yg)("h4",{id:"socketoffanyoutgoinglistener"},"socket.offAnyOutgoing(","[listener]",")"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v4.5.0")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"listener")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function>")))),(0,l.yg)("p",null,"Removes the previously registered listener. If no listener is provided, all catch-all listeners are removed."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"const myListener = () => { /* ... */ };\n\nsocket.onAnyOutgoing(myListener);\n\n// remove a single listener\nsocket.offAnyOutgoing(myListener);\n\n// remove all listeners\nsocket.offAnyOutgoing();\n")),(0,l.yg)("h4",{id:"socketoneventname-callback"},"socket.on(eventName, callback)"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Inherited from the ",(0,l.yg)("a",{parentName:"em",href:"https://www.npmjs.com/package/@socket.io/component-emitter"},"EventEmitter class"),".")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"eventName")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#string_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<string>"))," | ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#symbol_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<symbol>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"listener")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#socket"},(0,l.yg)("inlineCode",{parentName:"a"},"<Socket>")))),(0,l.yg)("p",null,"Register a new handler for the given event."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("news", (data) => {\n  console.log(data);\n});\n\n// with multiple arguments\nsocket.on("news", (arg1, arg2, arg3, arg4) => {\n  // ...\n});\n// with callback\nsocket.on("news", (cb) => {\n  cb(0);\n});\n')),(0,l.yg)("h4",{id:"socketonanycallback"},"socket.onAny(callback)"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v3.0.0")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"callback")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function>")))),(0,l.yg)("p",null,"Register a new catch-all listener."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"socket.onAny((event, ...args) => {\n  console.log(`got ${event}`);\n});\n")),(0,l.yg)("admonition",{type:"caution"},(0,l.yg)("p",{parentName:"admonition"},(0,l.yg)("a",{parentName:"p",href:"/docs/v4/emitting-events/#acknowledgements"},"Acknowledgements")," are not caught in the catch-all listener."),(0,l.yg)("pre",{parentName:"admonition"},(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.emit("foo", (value) => {\n  // ...\n});\n\nsocket.onAnyOutgoing(() => {\n  // triggered when the event is sent\n});\n\nsocket.onAny(() => {\n  // not triggered when the acknowledgement is received\n});\n'))),(0,l.yg)("h4",{id:"socketonanyoutgoingcallback"},"socket.onAnyOutgoing(callback)"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v4.5.0")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"callback")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function>")))),(0,l.yg)("p",null,"Register a new catch-all listener for outgoing packets."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"socket.onAnyOutgoing((event, ...args) => {\n  console.log(`got ${event}`);\n});\n")),(0,l.yg)("admonition",{type:"caution"},(0,l.yg)("p",{parentName:"admonition"},(0,l.yg)("a",{parentName:"p",href:"/docs/v4/emitting-events/#acknowledgements"},"Acknowledgements")," are not caught in the catch-all listener."),(0,l.yg)("pre",{parentName:"admonition"},(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("foo", (value, callback) => {\n  callback("OK");\n});\n\nsocket.onAny(() => {\n  // triggered when the event is received\n});\n\nsocket.onAnyOutgoing(() => {\n  // not triggered when the acknowledgement is sent\n});\n'))),(0,l.yg)("h4",{id:"socketonceeventname-callback"},"socket.once(eventName, callback)"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Inherited from the ",(0,l.yg)("a",{parentName:"em",href:"https://www.npmjs.com/package/@socket.io/component-emitter"},"EventEmitter class"),".")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"eventName")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#string_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<string>"))," | ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#symbol_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<symbol>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"listener")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#socket"},(0,l.yg)("inlineCode",{parentName:"a"},"<Socket>")))),(0,l.yg)("p",null,"Adds a one-time ",(0,l.yg)("inlineCode",{parentName:"p"},"listener")," function for the event named ",(0,l.yg)("inlineCode",{parentName:"p"},"eventName"),". The next time ",(0,l.yg)("inlineCode",{parentName:"p"},"eventName")," is triggered, this listener is removed and then invoked."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.once("my-event", () => {\n  // ...\n});\n')),(0,l.yg)("h4",{id:"socketopen"},"socket.open()"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v1.0.0")),(0,l.yg)("p",null,"Synonym of ",(0,l.yg)("a",{parentName:"p",href:"#socketconnect"},"socket.connect()"),"."),(0,l.yg)("h4",{id:"socketprependanycallback"},"socket.prependAny(callback)"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v3.0.0")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"callback")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function>")))),(0,l.yg)("p",null,"Register a new catch-all listener. The listener is added to the beginning of the listeners array."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"socket.prependAny((event, ...args) => {\n  console.log(`got ${event}`);\n});\n")),(0,l.yg)("h4",{id:"socketprependanyoutgoingcallback"},"socket.prependAnyOutgoing(callback)"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v4.5.0")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"callback")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function>")))),(0,l.yg)("p",null,"Register a new catch-all listener for outgoing packets. The listener is added to the beginning of the listeners array."),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"socket.prependAnyOutgoing((event, ...args) => {\n  console.log(`got ${event}`);\n});\n")),(0,l.yg)("h4",{id:"socketsendargs"},"socket.send(","[...args][, ack]",")"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"args")," ",(0,l.yg)("inlineCode",{parentName:"li"},"<any[]>")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"ack")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function"},(0,l.yg)("inlineCode",{parentName:"a"},"<Function>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#socket"},(0,l.yg)("inlineCode",{parentName:"a"},"<Socket>")))),(0,l.yg)("p",null,"Sends a ",(0,l.yg)("inlineCode",{parentName:"p"},"message")," event. See ",(0,l.yg)("a",{parentName:"p",href:"#socketemiteventname-args"},"socket.emit(eventName[, ...args][, ack])"),"."),(0,l.yg)("h4",{id:"sockettimeoutvalue"},"socket.timeout(value)"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v4.4.0")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"value")," ",(0,l.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#number_type"},(0,l.yg)("inlineCode",{parentName:"a"},"<number>"))),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("strong",{parentName:"li"},"Returns")," ",(0,l.yg)("a",{parentName:"li",href:"#socket"},(0,l.yg)("inlineCode",{parentName:"a"},"<Socket>")))),(0,l.yg)("p",null,"Sets a modifier for a subsequent event emission that the callback will be called with an error when the\ngiven number of milliseconds have elapsed without an acknowledgement from the server:"),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},'socket.timeout(5000).emit("my-event", (err) => {\n  if (err) {\n    // the server did not acknowledge the event in the given delay\n  }\n});\n')),(0,l.yg)("h3",{id:"flags"},"Flags"),(0,l.yg)("h4",{id:"flag-volatile"},"Flag: 'volatile'"),(0,l.yg)("p",null,(0,l.yg)("em",{parentName:"p"},"Added in v3.0.0")),(0,l.yg)("p",null,"Sets a modifier for the subsequent event emission indicating that the packet may be dropped if:"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"the socket is not connected"),(0,l.yg)("li",{parentName:"ul"},"the low-level transport is not writable (for example, when a ",(0,l.yg)("inlineCode",{parentName:"li"},"POST")," request is already running in HTTP long-polling mode)")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-js"},"socket.volatile.emit(/* ... */); // the server may or may not receive it\n")))}d.isMDXComponent=!0}}]);