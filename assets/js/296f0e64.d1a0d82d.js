"use strict";(self.webpackChunksample_website=self.webpackChunksample_website||[]).push([[7543],{5680:(e,n,r)=>{r.d(n,{xA:()=>u,yg:()=>b});var l=r(6540);function t(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,l)}return r}function i(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){t(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function a(e,n){if(null==e)return{};var r,l,t=function(e,n){if(null==e)return{};var r,l,t={},o=Object.keys(e);for(l=0;l<o.length;l++)r=o[l],n.indexOf(r)>=0||(t[r]=e[r]);return t}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)r=o[l],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}var p=l.createContext({}),s=function(e){var n=l.useContext(p),r=n;return e&&(r="function"==typeof e?e(n):i(i({},n),e)),r},u=function(e){var n=s(e.components);return l.createElement(p.Provider,{value:n},e.children)},c="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return l.createElement(l.Fragment,{},n)}},d=l.forwardRef((function(e,n){var r=e.components,t=e.mdxType,o=e.originalType,p=e.parentName,u=a(e,["components","mdxType","originalType","parentName"]),c=s(r),d=t,b=c["".concat(p,".").concat(d)]||c[d]||g[d]||o;return r?l.createElement(b,i(i({ref:n},u),{},{components:r})):l.createElement(b,i({ref:n},u))}));function b(e,n){var r=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var o=r.length,i=new Array(o);i[0]=d;var a={};for(var p in n)hasOwnProperty.call(n,p)&&(a[p]=n[p]);a.originalType=e,a[c]="string"==typeof e?e:t,i[1]=a;for(var s=2;s<o;s++)i[s]=r[s];return l.createElement.apply(null,i)}return l.createElement.apply(null,r)}d.displayName="MDXCreateElement"},3393:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>p,contentTitle:()=>i,default:()=>g,frontMatter:()=>o,metadata:()=>a,toc:()=>s});var l=r(8168),t=(r(6540),r(5680));const o={title:"Client usage with bundlers",sidebar_label:"Usage with bundlers",sidebar_position:5,slug:"/client-with-bundlers/"},i=void 0,a={unversionedId:"categories/Client/client-with-bundlers",id:"categories/Client/client-with-bundlers",title:"Client usage with bundlers",description:"You will find below the configuration for bundling the client library with different bundlers:",source:"@site/docs/categories/03-Client/client-with-bundlers.md",sourceDirName:"categories/03-Client",slug:"/client-with-bundlers/",permalink:"/socket.io-website/docs/v4/client-with-bundlers/",draft:!1,editUrl:"https://github.com/socketio/socket.io-website/edit/main/docs/categories/03-Client/client-with-bundlers.md",tags:[],version:"current",lastUpdatedAt:1631857589,formattedLastUpdatedAt:"Sep 17, 2021",sidebarPosition:5,frontMatter:{title:"Client usage with bundlers",sidebar_label:"Usage with bundlers",sidebar_position:5,slug:"/client-with-bundlers/"},sidebar:"sidebar",previous:{title:"Offline behavior",permalink:"/socket.io-website/docs/v4/client-offline-behavior/"},next:{title:"Emitting events",permalink:"/socket.io-website/docs/v4/emitting-events/"}},p={},s=[{value:"Webpack 5",id:"webpack-5",level:2},{value:"Browser",id:"browser",level:3},{value:"Node.js",id:"nodejs",level:3},{value:"Rollup.js",id:"rollupjs",level:2},{value:"Browser",id:"browser-1",level:3},{value:"Node.js",id:"nodejs-1",level:3}],u={toc:s},c="wrapper";function g(e){let{components:n,...o}=e;return(0,t.yg)(c,(0,l.A)({},u,o,{components:n,mdxType:"MDXLayout"}),(0,t.yg)("p",null,"You will find below the configuration for bundling the client library with different bundlers:"),(0,t.yg)("ul",null,(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"#webpack-5"},"Webpack 5"),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"#browser"},"Browser")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"#nodejs"},"Node.js")))),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"#rollup-js"},"Rollup.js"),(0,t.yg)("ul",{parentName:"li"},(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"#browser-1"},"Browser")),(0,t.yg)("li",{parentName:"ul"},(0,t.yg)("a",{parentName:"li",href:"#nodejs-1"},"Node.js"))))),(0,t.yg)("h2",{id:"webpack-5"},"Webpack 5"),(0,t.yg)("p",null,"Documentation: ",(0,t.yg)("a",{parentName:"p",href:"https://webpack.js.org/concepts/"},"https://webpack.js.org/concepts/")),(0,t.yg)("h3",{id:"browser"},"Browser"),(0,t.yg)("p",null,"Installation:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre"},"npm i -D socket.io-client webpack webpack-cli babel-loader @babel/core @babel/preset-env \\\n    @babel/plugin-transform-object-assign webpack-remove-debug\n")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"webpack.config.js")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-js"},'module.exports = {\n  entry: "./index.js",\n  output: {\n    filename: "bundle.js",\n  },\n  mode: "production",\n  node: false,\n  module: {\n    rules: [\n      {\n        test: /\\.m?js$/,\n        use: {\n          loader: "babel-loader",\n          options: {\n            presets: ["@babel/preset-env"], // ensure compatibility with older browsers\n            plugins: ["@babel/plugin-transform-object-assign"], // ensure compatibility with IE 11\n          },\n        },\n      },\n      {\n        test: /\\.js$/,\n        loader: "webpack-remove-debug", // remove "debug" package\n      },\n    ],\n  },\n};\n')),(0,t.yg)("p",null,"For reference, here is the output of the ",(0,t.yg)("a",{parentName:"p",href:"https://www.npmjs.com/package/webpack-bundle-analyzer"},(0,t.yg)("inlineCode",{parentName:"a"},"webpack-bundle-analyzer"))," package:"),(0,t.yg)("p",null,(0,t.yg)("img",{alt:"Output of the webpack-bundle-analyzer package",src:r(5275).A,width:"1389",height:"789"})),(0,t.yg)("h3",{id:"nodejs"},"Node.js"),(0,t.yg)("p",null,"To use the client in a Node.js environment (server to server connection), here is the configuration:"),(0,t.yg)("p",null,"Installation:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre"},"npm i -D socket.io-client webpack webpack-cli\n")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"webpack.config.js")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-js"},'module.exports = {\n  entry: "./index.js",\n  output: {\n    filename: "bundle.js",\n  },\n  mode: "production",\n  target: "node",\n  externals: {\n    bufferutil: "bufferutil",\n    "utf-8-validate": "utf-8-validate",\n  },\n};\n')),(0,t.yg)("p",null,"Note: without setting ",(0,t.yg)("inlineCode",{parentName:"p"},'target: "node"'),", you will likely encounter the following error:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre"},"ReferenceError: document is not defined\n")),(0,t.yg)("h2",{id:"rollupjs"},"Rollup.js"),(0,t.yg)("p",null,"Documentation: ",(0,t.yg)("a",{parentName:"p",href:"https://rollupjs.org/guide/en/"},"https://rollupjs.org/guide/en/")),(0,t.yg)("h3",{id:"browser-1"},"Browser"),(0,t.yg)("p",null,"Installation:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre"},"npm i -D socket.io-client rollup @rollup/plugin-node-resolve @rollup/plugin-commonjs @rollup/plugin-commonjs \\\n  @rollup/plugin-babel rollup-plugin-uglify babel @babel/core @babel/preset-env\n")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"rollup.config.js")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-js"},'import resolve from "@rollup/plugin-node-resolve";\nimport commonjs from "@rollup/plugin-commonjs";\nimport babel from "@rollup/plugin-babel";\nimport { uglify } from "rollup-plugin-uglify";\n\nexport default {\n  input: "index.js",\n  output: {\n    file: "bundle.js",\n    format: "cjs",\n  },\n  plugins: [\n    resolve({\n      browser: true,\n    }),\n    commonjs(),\n    babel({\n      include: ["**.js", "node_modules/**"],\n      babelHelpers: "bundled",\n      presets: ["@babel/preset-env"],\n    }),\n    uglify(),\n  ],\n};\n')),(0,t.yg)("h3",{id:"nodejs-1"},"Node.js"),(0,t.yg)("p",null,"Installation:"),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre"},"npm i -D socket.io-client rollup @rollup/plugin-node-resolve @rollup/plugin-commonjs rollup-plugin-uglify\n")),(0,t.yg)("p",null,(0,t.yg)("inlineCode",{parentName:"p"},"rollup.config.js")),(0,t.yg)("pre",null,(0,t.yg)("code",{parentName:"pre",className:"language-js"},'import resolve from "@rollup/plugin-node-resolve";\nimport commonjs from "@rollup/plugin-commonjs";\nimport { uglify } from "rollup-plugin-uglify";\n\nexport default {\n  input: "index.js",\n  output: {\n    file: "bundle.js",\n    format: "cjs",\n  },\n  plugins: [\n    resolve({\n      preferBuiltins: true,\n    }),\n    commonjs(),\n    uglify(),\n  ],\n};\n')))}g.isMDXComponent=!0},5275:(e,n,r)=>{r.d(n,{A:()=>l});const l=r.p+"assets/images/bundle-analyzer-output-8a4c7de4914148fdc867c560975d3815.png"}}]);