"use strict";(self.webpackChunksample_website=self.webpackChunksample_website||[]).push([[7393],{5680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>g});var o=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},c=Object.keys(e);for(o=0;o<c.length;o++)n=c[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(o=0;o<c.length;o++)n=c[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=o.createContext({}),s=function(e){var t=o.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=s(e.components);return o.createElement(i.Provider,{value:t},e.children)},y="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,c=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),y=s(n),h=r,g=y["".concat(i,".").concat(h)]||y[h]||u[h]||c;return n?o.createElement(g,a(a({ref:t},p),{},{components:n})):o.createElement(g,a({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var c=n.length,a=new Array(c);a[0]=h;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[y]="string"==typeof e?e:r,a[1]=l;for(var s=2;s<c;s++)a[s]=n[s];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},1801:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>a,default:()=>y,frontMatter:()=>c,metadata:()=>l,toc:()=>i});var o=n(8168),r=(n(6540),n(5680));const c={title:"How to check the latency of the Socket.IO connection"},a="How to check the latency of the Socket.IO connection",l={type:"mdx",permalink:"/socket.io-website/how-to/check-the-latency-of-the-connection",source:"@site/src/pages/how-to/check-the-latency-of-the-connection.md",title:"How to check the latency of the Socket.IO connection",description:"You can test the latency of your application by sending a ping event to the server and acknowledging it on the other side:",frontMatter:{title:"How to check the latency of the Socket.IO connection"}},i=[],s={toc:i},p="wrapper";function y(e){let{components:t,...n}=e;return(0,r.yg)(p,(0,o.A)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"how-to-check-the-latency-of-the-socketio-connection"},"How to check the latency of the Socket.IO connection"),(0,r.yg)("p",null,"You can test the latency of your application by sending a ping event to the server and ",(0,r.yg)("a",{parentName:"p",href:"/docs/v4/emitting-events/#acknowledgements"},"acknowledging it")," on the other side:"),(0,r.yg)("p",null,(0,r.yg)("em",{parentName:"p"},"Client")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io("wss://example.com");\n\nsetInterval(() => {\n  const start = Date.now();\n\n  socket.emit("ping", () => {\n    const duration = Date.now() - start;\n    console.log(duration);\n  });\n}, 1000);\n')),(0,r.yg)("p",null,(0,r.yg)("em",{parentName:"p"},"Server")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'import { Server } from "socket.io";\n\nconst io = new Server(3000);\n\nio.on("connection", (socket) => {\n  socket.on("ping", (callback) => {\n    callback();\n  });\n});\n')),(0,r.yg)("p",null,"Please note that most of the latency will likely come ",(0,r.yg)("strong",{parentName:"p"},"from the network"),", and not Socket.IO (which has about the same overhead as the underlying WebSocket connection)."),(0,r.yg)("p",null,"The latency can be impacted by a lot of factors, the major one being obviously the distance between the server and the client."),(0,r.yg)("p",null,"That being said, a client stuck in HTTP long-polling will see a higher latency compared to WebSocket, as the latter keeps an open TCP connection between the server and the client and does not need to send the HTTP headers on each request."),(0,r.yg)("p",null,"Related:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"/docs/v4/troubleshooting-connection-issues/#problem-the-socket-is-stuck-in-http-long-polling"},"The connection is stuck in HTTP long-polling")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"/docs/v4/performance-tuning/"},"Performance tuning")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"https://www.cloudflare.com/learning/performance/glossary/what-is-latency/"},"What is latency?"))))}y.isMDXComponent=!0}}]);