"use strict";(self.webpackChunksample_website=self.webpackChunksample_website||[]).push([[4932],{5680:(e,n,t)=>{t.d(n,{xA:()=>c,yg:()=>m});var a=t(6540);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),p=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=p(e.components);return a.createElement(s.Provider,{value:n},e.children)},d="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=p(t),u=r,m=d["".concat(s,".").concat(u)]||d[u]||g[u]||o;return t?a.createElement(m,i(i({ref:n},c),{},{components:t})):a.createElement(m,i({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=u;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[d]="string"==typeof e?e:r,i[1]=l;for(var p=2;p<o;p++)i[p]=t[p];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},9365:(e,n,t)=>{t.d(n,{A:()=>i});var a=t(6540),r=t(53);const o={tabItem:"tabItem_Ymn6"};function i(e){let{children:n,hidden:t,className:i}=e;return a.createElement("div",{role:"tabpanel",className:(0,r.A)(o.tabItem,i),hidden:t},n)}},1470:(e,n,t)=>{t.d(n,{A:()=>w});var a=t(8168),r=t(6540),o=t(53),i=t(3104),l=t(6347),s=t(7485),p=t(1682),c=t(9466);function d(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:r}}=e;return{value:n,label:t,attributes:a,default:r}}))}function g(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??d(t);return function(e){const n=(0,p.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function u(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const a=(0,l.W6)(),o=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,s.aZ)(o),(0,r.useCallback)((e=>{if(!o)return;const n=new URLSearchParams(a.location.search);n.set(o,e),a.replace({...a.location,search:n.toString()})}),[o,a])]}function y(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,o=g(e),[i,l]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!u({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:o}))),[s,p]=m({queryString:t,groupId:a}),[d,y]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,o]=(0,c.Dv)(t);return[a,(0,r.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:a}),h=(()=>{const e=s??d;return u({value:e,tabValues:o})?e:null})();(0,r.useLayoutEffect)((()=>{h&&l(h)}),[h]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!u({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),p(e),y(e)}),[p,y,o]),tabValues:o}}var h=t(2303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function v(e){let{className:n,block:t,selectedValue:l,selectValue:s,tabValues:p}=e;const c=[],{blockElementScrollPositionUntilNextRender:d}=(0,i.a_)(),g=e=>{const n=e.currentTarget,t=c.indexOf(n),a=p[t].value;a!==l&&(d(n),s(a))},u=e=>{let n=null;switch(e.key){case"Enter":g(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":t},n)},p.map((e=>{let{value:n,label:t,attributes:i}=e;return r.createElement("li",(0,a.A)({role:"tab",tabIndex:l===n?0:-1,"aria-selected":l===n,key:n,ref:e=>c.push(e),onKeyDown:u,onClick:g},i,{className:(0,o.A)("tabs__item",f.tabItem,i?.className,{"tabs__item--active":l===n})}),t??n)})))}function N(e){let{lazy:n,children:t,selectedValue:a}=e;const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===a));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==a}))))}function b(e){const n=y(e);return r.createElement("div",{className:(0,o.A)("tabs-container",f.tabList)},r.createElement(v,(0,a.A)({},e,n)),r.createElement(N,(0,a.A)({},e,n)))}function w(e){const n=(0,h.A)();return r.createElement(b,(0,a.A)({key:String(n)},e))}},7360:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>l,metadata:()=>p,toc:()=>d});var a=t(8168),r=(t(6540),t(5680)),o=t(1470),i=t(9365);const l={title:"Server options",sidebar_label:"Options",sidebar_position:2,slug:"/server-options/"},s=void 0,p={unversionedId:"server-options",id:"server-options",title:"Server options",description:"Socket.IO server options",source:"@site/docs/server-options.md",sourceDirName:".",slug:"/server-options/",permalink:"/docs/v4/server-options/",draft:!1,editUrl:"https://github.com/socketio/socket.io-website/edit/main/docs/server-options.md",tags:[],version:"current",lastUpdatedAt:1708417365,formattedLastUpdatedAt:"Feb 20, 2024",sidebarPosition:2,frontMatter:{title:"Server options",sidebar_label:"Options",sidebar_position:2,slug:"/server-options/"},sidebar:"serverSidebar",previous:{title:"API",permalink:"/docs/v4/server-api/"}},c={},d=[{value:"Socket.IO server options",id:"socketio-server-options",level:2},{value:"<code>adapter</code>",id:"adapter",level:3},{value:"<code>cleanupEmptyChildNamespaces</code>",id:"cleanupemptychildnamespaces",level:3},{value:"<code>connectionStateRecovery</code>",id:"connectionstaterecovery",level:3},{value:"<code>connectTimeout</code>",id:"connecttimeout",level:3},{value:"<code>parser</code>",id:"parser",level:3},{value:"<code>path</code>",id:"path",level:3},{value:"<code>serveClient</code>",id:"serveclient",level:3},{value:"Low-level engine options",id:"low-level-engine-options",level:2},{value:"<code>addTrailingSlash</code>",id:"addtrailingslash",level:3},{value:"<code>allowEIO3</code>",id:"alloweio3",level:3},{value:"<code>allowRequest</code>",id:"allowrequest",level:3},{value:"<code>allowUpgrades</code>",id:"allowupgrades",level:3},{value:"<code>cookie</code>",id:"cookie",level:3},{value:"<code>cors</code>",id:"cors",level:3},{value:"<code>httpCompression</code>",id:"httpcompression",level:3},{value:"<code>maxHttpBufferSize</code>",id:"maxhttpbuffersize",level:3},{value:"<code>perMessageDeflate</code>",id:"permessagedeflate",level:3},{value:"<code>pingInterval</code>",id:"pinginterval",level:3},{value:"<code>pingTimeout</code>",id:"pingtimeout",level:3},{value:"<code>transports</code>",id:"transports",level:3},{value:"<code>upgradeTimeout</code>",id:"upgradetimeout",level:3},{value:"<code>wsEngine</code>",id:"wsengine",level:3}],g={toc:d},u="wrapper";function m(e){let{components:n,...t}=e;return(0,r.yg)(u,(0,a.A)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h2",{id:"socketio-server-options"},"Socket.IO server options"),(0,r.yg)("p",null,"The following options affect the behavior of the Socket.IO server."),(0,r.yg)("h3",{id:"adapter"},(0,r.yg)("inlineCode",{parentName:"h3"},"adapter")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},'require("socket.io-adapter")')," (in-memory adapter, whose source code can be found ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/socketio/socket.io-adapter/"},"here"),")"),(0,r.yg)("p",null,"The ",(0,r.yg)("a",{parentName:"p",href:"/docs/v4/glossary/#adapter"},'"Adapter"')," to use."),(0,r.yg)("p",null,"Example with the ",(0,r.yg)("a",{parentName:"p",href:"/docs/v4/redis-adapter/"},"Redis adapter"),":"),(0,r.yg)(o.A,{groupId:"lang",mdxType:"Tabs"},(0,r.yg)(i.A,{value:"cjs",label:"CommonJS",default:!0,mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const { Server } = require("socket.io");\nconst { createAdapter } = require("@socket.io/redis-adapter");\nconst { createClient } = require("redis");\n\nconst pubClient = createClient({ host: "localhost", port: 6379 });\nconst subClient = pubClient.duplicate();\n\nconst io = new Server({\n  adapter: createAdapter(pubClient, subClient)\n});\n\nio.listen(3000);\n'))),(0,r.yg)(i.A,{value:"mjs",label:"ES modules",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'import { Server } from "socket.io";\nimport { createAdapter } from "@socket.io/redis-adapter";\nimport { createClient } from "redis";\n\nconst pubClient = createClient({ host: "localhost", port: 6379 });\nconst subClient = pubClient.duplicate();\n\nconst io = new Server({\n  adapter: createAdapter(pubClient, subClient)\n});\n\nio.listen(3000);\n'))),(0,r.yg)(i.A,{value:"ts",label:"TypeScript",mdxType:"TabItem"},(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-ts"},'import { Server } from "socket.io";\nimport { createAdapter } from "@socket.io/redis-adapter";\nimport { createClient } from "redis";\n\nconst pubClient = createClient({ host: "localhost", port: 6379 });\nconst subClient = pubClient.duplicate();\n\nconst io = new Server({\n  adapter: createAdapter(pubClient, subClient)\n});\n\nio.listen(3000);\n')))),(0,r.yg)("h3",{id:"cleanupemptychildnamespaces"},(0,r.yg)("inlineCode",{parentName:"h3"},"cleanupEmptyChildNamespaces")),(0,r.yg)("p",null,(0,r.yg)("em",{parentName:"p"},"Added in v4.6.0")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"false")),(0,r.yg)("p",null,"Whether to remove ",(0,r.yg)("a",{parentName:"p",href:"/docs/v4/namespaces/#dynamic-namespaces"},"child namespaces")," that have no sockets connected to them."),(0,r.yg)("p",null,"This option might be useful if you create a lot of dynamic namespaces, since each namespace creates its own adapter instance."),(0,r.yg)("p",null,"With this option enabled (disabled by default), when a socket disconnects from a dynamic namespace and if there are no other sockets connected to it then the namespace will be cleaned up and its adapter will be closed."),(0,r.yg)("h3",{id:"connectionstaterecovery"},(0,r.yg)("inlineCode",{parentName:"h3"},"connectionStateRecovery")),(0,r.yg)("p",null,(0,r.yg)("em",{parentName:"p"},"Added in v4.6.0")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"undefined")),(0,r.yg)("p",null,"The option for the ",(0,r.yg)("a",{parentName:"p",href:"/docs/v4/connection-state-recovery"},"Connection state recovery")," feature:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const io = new Server(httpServer, {\n  connectionStateRecovery: {\n    // the backup duration of the sessions and the packets\n    maxDisconnectionDuration: 2 * 60 * 1000,\n    // whether to skip middlewares upon successful recovery\n    skipMiddlewares: true,\n  }\n});\n")),(0,r.yg)("p",null,"If the ",(0,r.yg)("inlineCode",{parentName:"p"},"skipMiddlewares")," option is set to ",(0,r.yg)("inlineCode",{parentName:"p"},"true"),", then the middlewares will be skipped when the connection is successfully recovered:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'function computeUserIdFromHeaders(headers) {\n  // to be implemented\n}\n\n// this middleware will be skipped if the connection is successfully recovered\nio.use(async (socket, next) => {\n  socket.data.userId = await computeUserIdFromHeaders(socket.handshake.headers);\n\n  next();\n});\n\nio.on("connection", (socket) => {\n  // the userId attribute will either come:\n  // - from the middleware above (first connection or failed recovery)\n  // - from the recevery mechanism\n  console.log("userId", socket.data.userId);\n});\n')),(0,r.yg)("h3",{id:"connecttimeout"},(0,r.yg)("inlineCode",{parentName:"h3"},"connectTimeout")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"45000")),(0,r.yg)("p",null,"The number of ms before disconnecting a client that has not successfully joined a namespace."),(0,r.yg)("h3",{id:"parser"},(0,r.yg)("inlineCode",{parentName:"h3"},"parser")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"socket.io-parser")),(0,r.yg)("p",null,"The parser to use. Please see the documentation ",(0,r.yg)("a",{parentName:"p",href:"/docs/v4/custom-parser/"},"here"),"."),(0,r.yg)("h3",{id:"path"},(0,r.yg)("inlineCode",{parentName:"h3"},"path")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"/socket.io/")),(0,r.yg)("p",null,"It is the name of the path that is captured on the server side."),(0,r.yg)("admonition",{type:"caution"},(0,r.yg)("p",{parentName:"admonition"},"The server and the client values must match (unless you are using a path-rewriting proxy in between).")),(0,r.yg)("p",null,(0,r.yg)("em",{parentName:"p"},"Server")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'import { createServer } from "http";\nimport { Server } from "socket.io";\n\nconst httpServer = createServer();\nconst io = new Server(httpServer, {\n  path: "/my-custom-path/"\n});\n')),(0,r.yg)("p",null,(0,r.yg)("em",{parentName:"p"},"Client")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io("https://example.com", {\n  path: "/my-custom-path/"\n});\n')),(0,r.yg)("h3",{id:"serveclient"},(0,r.yg)("inlineCode",{parentName:"h3"},"serveClient")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"true")),(0,r.yg)("p",null,"Whether to serve the client files. If ",(0,r.yg)("inlineCode",{parentName:"p"},"true"),", the different bundles will be served at the following location:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"<url>/socket.io/socket.io.js")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"<url>/socket.io/socket.io.min.js")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"<url>/socket.io/socket.io.msgpack.min.js"))),(0,r.yg)("p",null,"(including their associated source maps)"),(0,r.yg)("p",null,"See also ",(0,r.yg)("a",{parentName:"p",href:"/docs/v4/client-installation/#standalone-build"},"here"),"."),(0,r.yg)("h2",{id:"low-level-engine-options"},"Low-level engine options"),(0,r.yg)("p",null,"The following options affect the behavior of the underlying Engine.IO server."),(0,r.yg)("h3",{id:"addtrailingslash"},(0,r.yg)("inlineCode",{parentName:"h3"},"addTrailingSlash")),(0,r.yg)("p",null,(0,r.yg)("em",{parentName:"p"},"Added in v4.6.0")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"true")),(0,r.yg)("p",null,"The trailing slash which was added by default can now be disabled:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'import { createServer } from "node:http";\nimport { Server } from "socket.io";\n\nconst httpServer = createServer();\nconst io = new Server(httpServer, {\naddTrailingSlash: false\n});\n')),(0,r.yg)("p",null,"In the example above, the clients can omit the trailing slash and use ",(0,r.yg)("inlineCode",{parentName:"p"},"/socket.io")," instead of ",(0,r.yg)("inlineCode",{parentName:"p"},"/socket.io/"),"."),(0,r.yg)("h3",{id:"alloweio3"},(0,r.yg)("inlineCode",{parentName:"h3"},"allowEIO3")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"false")),(0,r.yg)("p",null,"Whether to enable compatibility with Socket.IO v2 clients."),(0,r.yg)("p",null,"See also: ",(0,r.yg)("a",{parentName:"p",href:"/docs/v4/migrating-from-2-x-to-3-0/#how-to-upgrade-an-existing-production-deployment"},"Migrating from 2.x to 3.0")),(0,r.yg)("p",null,"Example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const io = new Server(httpServer, {\n  allowEIO3: true // false by default\n});\n")),(0,r.yg)("h3",{id:"allowrequest"},(0,r.yg)("inlineCode",{parentName:"h3"},"allowRequest")),(0,r.yg)("p",null,"Default: ",(0,r.yg)("inlineCode",{parentName:"p"},"-")),(0,r.yg)("p",null,"A function that receives a given handshake or upgrade request as its first parameter, and can decide whether to continue or not."),(0,r.yg)("p",null,"Example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const io = new Server(httpServer, {\n  allowRequest: (req, callback) => {\n    const isOriginValid = check(req);\n    callback(null, isOriginValid);\n  }\n});\n")),(0,r.yg)("p",null,"This can also be used in conjunction with the ",(0,r.yg)("a",{parentName:"p",href:"/docs/v4/server-api/#event-initial_headers"},(0,r.yg)("inlineCode",{parentName:"a"},"initial_headers"))," event, to send a cookie to the client:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'import { serialize } from "cookie";\n\nconst io = new Server(httpServer, {\n  allowRequest: async (req, callback) => {\n    const session = await fetchSession(req);\n    req.session = session;\n    callback(null, true);\n  }\n});\n\nio.engine.on("initial_headers", (headers, req) => {\n  if (req.session) {\n    headers["set-cookie"] = serialize("sid", req.session.id, { sameSite: "strict" });\n  }\n});\n')),(0,r.yg)("p",null,"See also:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"/how-to/use-with-express-session"},"how to use with ",(0,r.yg)("inlineCode",{parentName:"a"},"express-session"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("a",{parentName:"li",href:"/how-to/deal-with-cookies"},"how to deal with cookies"))),(0,r.yg)("h3",{id:"allowupgrades"},(0,r.yg)("inlineCode",{parentName:"h3"},"allowUpgrades")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"true")),(0,r.yg)("p",null,"Whether to allow transport upgrades."),(0,r.yg)("h3",{id:"cookie"},(0,r.yg)("inlineCode",{parentName:"h3"},"cookie")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"-")),(0,r.yg)("p",null,"The list of options that will be forwarded to the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/jshttp/cookie/"},(0,r.yg)("inlineCode",{parentName:"a"},"cookie"))," module. Available options:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"domain"),(0,r.yg)("li",{parentName:"ul"},"encode"),(0,r.yg)("li",{parentName:"ul"},"expires"),(0,r.yg)("li",{parentName:"ul"},"httpOnly"),(0,r.yg)("li",{parentName:"ul"},"maxAge"),(0,r.yg)("li",{parentName:"ul"},"path"),(0,r.yg)("li",{parentName:"ul"},"sameSite"),(0,r.yg)("li",{parentName:"ul"},"secure")),(0,r.yg)("p",null,"Example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'import { Server } from "socket.io";\n\nconst io = new Server(httpServer, {\n  cookie: {\n    name: "my-cookie",\n    httpOnly: true,\n    sameSite: "strict",\n    maxAge: 86400\n  }\n});\n')),(0,r.yg)("admonition",{type:"info"},(0,r.yg)("p",{parentName:"admonition"},"Since Socket.IO v3, there is no cookie sent by default anymore (",(0,r.yg)("a",{parentName:"p",href:"/docs/v4/migrating-from-2-x-to-3-0/#no-more-cookie-by-default"},"reference"),").")),(0,r.yg)("h3",{id:"cors"},(0,r.yg)("inlineCode",{parentName:"h3"},"cors")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"-")),(0,r.yg)("p",null,"The list of options that will be forwarded to the ",(0,r.yg)("a",{parentName:"p",href:"https://www.npmjs.com/package/cors"},(0,r.yg)("inlineCode",{parentName:"a"},"cors"))," module. More information can be found ",(0,r.yg)("a",{parentName:"p",href:"/docs/v4/handling-cors/"},"here"),"."),(0,r.yg)("p",null,"Examples:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"allow a given origin")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const io = new Server(httpServer, {\n  cors: {\n    origin: ["https://example.com"]\n  }\n});\n')),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"allow a given origin for local development")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const io = new Server(httpServer, {\n  cors: {\n    origin: process.env.NODE_ENV === "production" ? false : ["http://localhost:3000"]\n  }\n});\n')),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"allow the given origins, headers and credentials (such as cookies, authorization headers or TLS client certificates)")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const io = new Server(httpServer, {\n  cors: {\n    origin: ["https://example.com", "https://dev.example.com"],\n    allowedHeaders: ["my-custom-header"],\n    credentials: true\n  }\n});\n')),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"If you want the browser to send credentials such as cookies, authorization headers or TLS client certificates, you also need to set ",(0,r.yg)("a",{parentName:"p",href:"/docs/v4/client-options/#withcredentials"},(0,r.yg)("inlineCode",{parentName:"a"},"withCredentials"))," option to ",(0,r.yg)("inlineCode",{parentName:"p"},"true")," on the client side:"),(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-js"},'import { io } from "socket.io-client";\n\nconst socket = io("https://my-backend.com", {\n  withCredentials: true\n});\n')),(0,r.yg)("p",{parentName:"admonition"},"More information ",(0,r.yg)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/withCredentials"},"here"),".")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"allow any origin")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const io = new Server(httpServer, {\n  cors: {\n    origin: "*"\n  }\n});\n')),(0,r.yg)("admonition",{type:"warning"},(0,r.yg)("p",{parentName:"admonition"},"Please note that in that case, you are basically disabling the security provided by Cross-Origin Resource Sharing (CORS), as any domain will be able to reach your server. Please use with caution.")),(0,r.yg)("p",null,"Available options:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Option"),(0,r.yg)("th",{parentName:"tr",align:null},"Description"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"origin")),(0,r.yg)("td",{parentName:"tr",align:null},"Configures the ",(0,r.yg)("strong",{parentName:"td"},"Access-Control-Allow-Origin")," CORS header.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"methods")),(0,r.yg)("td",{parentName:"tr",align:null},"Configures the ",(0,r.yg)("strong",{parentName:"td"},"Access-Control-Allow-Methods")," CORS header. Expects a comma-delimited string (ex: 'GET,PUT,POST') or an array (ex: ",(0,r.yg)("inlineCode",{parentName:"td"},"['GET', 'PUT', 'POST']"),").")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"allowedHeaders")),(0,r.yg)("td",{parentName:"tr",align:null},"Configures the ",(0,r.yg)("strong",{parentName:"td"},"Access-Control-Allow-Headers")," CORS header. Expects a comma-delimited string (ex: 'Content-Type,Authorization') or an array (ex: ",(0,r.yg)("inlineCode",{parentName:"td"},"['Content-Type', 'Authorization']"),"). If not specified, defaults to reflecting the headers specified in the request's ",(0,r.yg)("strong",{parentName:"td"},"Access-Control-Request-Headers")," header.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"exposedHeaders")),(0,r.yg)("td",{parentName:"tr",align:null},"Configures the ",(0,r.yg)("strong",{parentName:"td"},"Access-Control-Expose-Headers")," CORS header. Expects a comma-delimited string (ex: 'Content-Range,X-Content-Range') or an array (ex: ",(0,r.yg)("inlineCode",{parentName:"td"},"['Content-Range', 'X-Content-Range']"),"). If not specified, no custom headers are exposed.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"credentials")),(0,r.yg)("td",{parentName:"tr",align:null},"Configures the ",(0,r.yg)("strong",{parentName:"td"},"Access-Control-Allow-Credentials")," CORS header. Set to ",(0,r.yg)("inlineCode",{parentName:"td"},"true")," to pass the header, otherwise it is omitted.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"maxAge")),(0,r.yg)("td",{parentName:"tr",align:null},"Configures the ",(0,r.yg)("strong",{parentName:"td"},"Access-Control-Max-Age")," CORS header. Set to an integer to pass the header, otherwise it is omitted.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"preflightContinue")),(0,r.yg)("td",{parentName:"tr",align:null},"Pass the CORS preflight response to the next handler.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"optionsSuccessStatus")),(0,r.yg)("td",{parentName:"tr",align:null},"Provides a status code to use for successful ",(0,r.yg)("inlineCode",{parentName:"td"},"OPTIONS")," requests, since some legacy browsers (IE11, various SmartTVs) choke on ",(0,r.yg)("inlineCode",{parentName:"td"},"204"),".")))),(0,r.yg)("p",null,"Possible values for the ",(0,r.yg)("inlineCode",{parentName:"p"},"origin")," option:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"Boolean")," - set ",(0,r.yg)("inlineCode",{parentName:"li"},"origin")," to ",(0,r.yg)("inlineCode",{parentName:"li"},"true")," to reflect the ",(0,r.yg)("a",{parentName:"li",href:"http://tools.ietf.org/html/draft-abarth-origin-09"},"request origin"),", as defined by ",(0,r.yg)("inlineCode",{parentName:"li"},"req.header('Origin')"),", or set it to ",(0,r.yg)("inlineCode",{parentName:"li"},"false")," to disable CORS."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"String")," - set ",(0,r.yg)("inlineCode",{parentName:"li"},"origin")," to a specific origin. For example if you set it to ",(0,r.yg)("inlineCode",{parentName:"li"},'"http://example.com"'),' only requests from "',(0,r.yg)("a",{parentName:"li",href:"http://example.com%22"},'http://example.com"')," will be allowed."),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"RegExp")," - set ",(0,r.yg)("inlineCode",{parentName:"li"},"origin")," to a regular expression pattern which will be used to test the request origin. If it's a match, the request origin will be reflected. For example the pattern ",(0,r.yg)("inlineCode",{parentName:"li"},"/example\\.com$/"),' will reflect any request that is coming from an origin ending with "example.com".'),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"Array")," - set ",(0,r.yg)("inlineCode",{parentName:"li"},"origin")," to an array of valid origins. Each origin can be a ",(0,r.yg)("inlineCode",{parentName:"li"},"String")," or a ",(0,r.yg)("inlineCode",{parentName:"li"},"RegExp"),". For example ",(0,r.yg)("inlineCode",{parentName:"li"},'["http://example1.com", /\\.example2\\.com$/]'),' will accept any request from "',(0,r.yg)("a",{parentName:"li",href:"http://example1.com%22"},'http://example1.com"'),' or from a subdomain of "example2.com".'),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("inlineCode",{parentName:"li"},"Function")," - set ",(0,r.yg)("inlineCode",{parentName:"li"},"origin")," to a function implementing some custom logic. The function takes the request origin as the first parameter and a callback (which expects the signature ",(0,r.yg)("inlineCode",{parentName:"li"},"err [object], allow [bool]"),") as the second.")),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"The option is named ",(0,r.yg)("inlineCode",{parentName:"p"},"origin")," (and not ",(0,r.yg)("inlineCode",{parentName:"p"},"origins"),") even with multiple domains:"),(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const io = new Server(httpServer, {\n  cors: {\n    // BAD\n    origins: ["https://example.com"],\n    // GOOD\n    origin: ["https://example.com"],\n  }\n});\n'))),(0,r.yg)("admonition",{type:"caution"},(0,r.yg)("p",{parentName:"admonition"},"You can't use ",(0,r.yg)("inlineCode",{parentName:"p"},'origin: "*"')," when setting ",(0,r.yg)("inlineCode",{parentName:"p"},"credentials: true"),":"),(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-js"},'// THIS WON\'T WORK\nconst io = new Server(httpServer, {\n  cors: {\n    origin: "*",\n    credentials: true\n  }\n});\n')),(0,r.yg)("p",{parentName:"admonition"},"You will see an error like this in the browser console:"),(0,r.yg)("blockquote",{parentName:"admonition"},(0,r.yg)("p",{parentName:"blockquote"},"Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at \u2018.../socket.io/?EIO=4&transport=polling&t=NvQfU77\u2019. (Reason: Credential is not supported if the CORS header \u2018Access-Control-Allow-Origin\u2019 is \u2018*\u2019)")),(0,r.yg)("p",{parentName:"admonition"},"You need to either provide a list of domains (recommended solution) or use the following method:"),(0,r.yg)("pre",{parentName:"admonition"},(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const io = new Server(httpServer, {\n  cors: {\n    origin: (_req, callback) => {\n      callback(null, true);\n    },\n    credentials: true\n  }\n});\n")),(0,r.yg)("p",{parentName:"admonition"},"Please note that in that case, like with ",(0,r.yg)("inlineCode",{parentName:"p"},'origin: "*"')," or ",(0,r.yg)("inlineCode",{parentName:"p"},"origin: true"),", you are basically disabling the security provided by Cross-Origin Resource Sharing (CORS), as any domain will be able to reach your server. Please use with caution.")),(0,r.yg)("h3",{id:"httpcompression"},(0,r.yg)("inlineCode",{parentName:"h3"},"httpCompression")),(0,r.yg)("p",null,(0,r.yg)("em",{parentName:"p"},"Added in v1.4.0")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"true")),(0,r.yg)("p",null,"Whether to enable the compression for the HTTP long-polling transport."),(0,r.yg)("p",null,"Please note that if ",(0,r.yg)("inlineCode",{parentName:"p"},"httpCompression")," is set to ",(0,r.yg)("inlineCode",{parentName:"p"},"false"),", the compress flag used when emitting (",(0,r.yg)("inlineCode",{parentName:"p"},"socket.compress(true).emit(...)"),") will be ignored when the connection is established with HTTP long-polling requests."),(0,r.yg)("p",null,"All options from the Node.js ",(0,r.yg)("a",{parentName:"p",href:"https://nodejs.org/api/zlib.html#zlib_class_options"},(0,r.yg)("inlineCode",{parentName:"a"},"zlib")," module")," are supported."),(0,r.yg)("p",null,"Example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const io = new Server(httpServer, {\n  httpCompression: {\n    // Engine.IO options\n    threshold: 2048, // defaults to 1024\n    // Node.js zlib options\n    chunkSize: 8 * 1024, // defaults to 16 * 1024\n    windowBits: 14, // defaults to 15\n    memLevel: 7, // defaults to 8\n  }\n});\n")),(0,r.yg)("h3",{id:"maxhttpbuffersize"},(0,r.yg)("inlineCode",{parentName:"h3"},"maxHttpBufferSize")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"1e6")," (1 MB)"),(0,r.yg)("p",null,"This defines how many bytes a single message can be, before closing the socket. You may increase or decrease this value depending on your needs."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const io = new Server(httpServer, {\n  maxHttpBufferSize: 1e8\n});\n")),(0,r.yg)("p",null,"It matches the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/websockets/ws/blob/master/doc/ws.md#new-websocketserveroptions-callback"},"maxPayload")," option of the ws package."),(0,r.yg)("h3",{id:"permessagedeflate"},(0,r.yg)("inlineCode",{parentName:"h3"},"perMessageDeflate")),(0,r.yg)("details",{className:"changelog"},(0,r.yg)("summary",null,"History"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Version"),(0,r.yg)("th",{parentName:"tr",align:null},"Changes"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"v3.0.0"),(0,r.yg)("td",{parentName:"tr",align:null},"The permessage-deflate extension is now disabled by default.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"v1.4.0"),(0,r.yg)("td",{parentName:"tr",align:null},"First implementation."))))),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"false")),(0,r.yg)("p",null,"Whether to enable the ",(0,r.yg)("a",{parentName:"p",href:"https://tools.ietf.org/html/draft-ietf-hybi-permessage-compression-19"},"permessage-deflate extension")," for the WebSocket transport. This extension is known to add a significant overhead in terms of performance and memory consumption, so we suggest to only enable it if it is really needed."),(0,r.yg)("p",null,"Please note that if ",(0,r.yg)("inlineCode",{parentName:"p"},"perMessageDeflate")," is set to ",(0,r.yg)("inlineCode",{parentName:"p"},"false")," (which is the default), the compress flag used when emitting (",(0,r.yg)("inlineCode",{parentName:"p"},"socket.compress(true).emit(...)"),") will be ignored when the connection is established with WebSockets, as the permessage-deflate extension cannot be enabled on a per-message basis."),(0,r.yg)("p",null,"All options from the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/websockets/ws/blob/master/README.md#websocket-compression"},(0,r.yg)("inlineCode",{parentName:"a"},"ws")," module")," are supported:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},"const io = new Server(httpServer, {\n  perMessageDeflate: {\n    threshold: 2048, // defaults to 1024\n\n    zlibDeflateOptions: {\n      chunkSize: 8 * 1024, // defaults to 16 * 1024\n    },\n\n    zlibInflateOptions: {\n      windowBits: 14, // defaults to 15\n      memLevel: 7, // defaults to 8\n    },\n\n    clientNoContextTakeover: true, // defaults to negotiated value.\n    serverNoContextTakeover: true, // defaults to negotiated value.\n    serverMaxWindowBits: 10, // defaults to negotiated value.\n\n    concurrencyLimit: 20, // defaults to 10\n  }\n});\n")),(0,r.yg)("h3",{id:"pinginterval"},(0,r.yg)("inlineCode",{parentName:"h3"},"pingInterval")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"25000")),(0,r.yg)("p",null,"This value is used in the heartbeat mechanism, which periodically checks if the connection is still alive between the server and the client."),(0,r.yg)("p",null,"The server sends a ping packet every ",(0,r.yg)("inlineCode",{parentName:"p"},"pingInterval")," ms, and if the client does not answer with a pong within ",(0,r.yg)("inlineCode",{parentName:"p"},"pingTimeout")," ms, the server considers that the connection is closed."),(0,r.yg)("p",null,"Similarly, if the client does not receive a ping packet from the server within ",(0,r.yg)("inlineCode",{parentName:"p"},"pingInterval + pingTimeout")," ms, then the client also considers that the connection is closed."),(0,r.yg)("p",null,"In both cases, the disconnection reason will be: ",(0,r.yg)("inlineCode",{parentName:"p"},"ping timeout")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'socket.on("disconnect", (reason) => {\n  console.log(reason); // "ping timeout"\n});\n')),(0,r.yg)("admonition",{type:"caution"},(0,r.yg)("p",{parentName:"admonition"},"Using a small value like ",(0,r.yg)("inlineCode",{parentName:"p"},"1000")," (one heartbeat per second) will incur some load on your server, which might become noticeable with a few thousands connected clients.")),(0,r.yg)("h3",{id:"pingtimeout"},(0,r.yg)("inlineCode",{parentName:"h3"},"pingTimeout")),(0,r.yg)("details",{className:"changelog"},(0,r.yg)("summary",null,"History"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Version"),(0,r.yg)("th",{parentName:"tr",align:null},"Changes"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"v4.0.0"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pingTimeout")," now defaults to ",(0,r.yg)("inlineCode",{parentName:"td"},"20000")," ms.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"v2.1.0"),(0,r.yg)("td",{parentName:"tr",align:null},"Defaults to ",(0,r.yg)("inlineCode",{parentName:"td"},"5000")," ms.")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"v1.0.0"),(0,r.yg)("td",{parentName:"tr",align:null},"Defaults to ",(0,r.yg)("inlineCode",{parentName:"td"},"60000")," ms."))))),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"20000")),(0,r.yg)("p",null,"See ",(0,r.yg)("a",{parentName:"p",href:"#pinginterval"},"above"),"."),(0,r.yg)("admonition",{type:"caution"},(0,r.yg)("p",{parentName:"admonition"},"Using a smaller value means that a temporarily unresponsive server might trigger a lot of client reconnections."),(0,r.yg)("p",{parentName:"admonition"},"On the contrary, using a bigger value means that a broken connection will take longer to get detected (and you might get a warning on React Native if ",(0,r.yg)("inlineCode",{parentName:"p"},"pingInterval + pingTimeout")," is bigger than 60 seconds).")),(0,r.yg)("h3",{id:"transports"},(0,r.yg)("inlineCode",{parentName:"h3"},"transports")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},'["polling", "websocket"]')),(0,r.yg)("p",null,"The low-level transports that are allowed on the server-side."),(0,r.yg)("p",null,"Example with WebTransport enabled:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const io = new Server({\n  transports: ["polling", "websocket", "webtransport"]\n});\n')),(0,r.yg)("p",null,"Please check the WebTransport example ",(0,r.yg)("a",{parentName:"p",href:"/get-started/webtransport"},"here"),"."),(0,r.yg)("p",null,"See also: client-side ",(0,r.yg)("a",{parentName:"p",href:"/docs/v4/client-options/#transports"},(0,r.yg)("inlineCode",{parentName:"a"},"transports"))),(0,r.yg)("h3",{id:"upgradetimeout"},(0,r.yg)("inlineCode",{parentName:"h3"},"upgradeTimeout")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},"10000")),(0,r.yg)("p",null,"This is the delay in milliseconds before an uncompleted transport upgrade is cancelled."),(0,r.yg)("h3",{id:"wsengine"},(0,r.yg)("inlineCode",{parentName:"h3"},"wsEngine")),(0,r.yg)("p",null,"Default value: ",(0,r.yg)("inlineCode",{parentName:"p"},'require("ws").Server')," (source code can be found ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/websockets/ws"},"here"),")"),(0,r.yg)("p",null,"The WebSocket server implementation to use. Please see the documentation ",(0,r.yg)("a",{parentName:"p",href:"/docs/v4/server-installation/#other-websocket-server-implementations"},"here"),"."),(0,r.yg)("p",null,"Example:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const io = new Server(httpServer, {\n  wsEngine: require("eiows").Server\n});\n')))}m.isMDXComponent=!0}}]);