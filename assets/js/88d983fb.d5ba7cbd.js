"use strict";(self.webpackChunksample_website=self.webpackChunksample_website||[]).push([[9325],{5680:(e,n,t)=>{t.d(n,{xA:()=>p,yg:()=>h});var o=t(6540);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},s=Object.keys(e);for(o=0;o<s.length;o++)t=s[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)t=s[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var i=o.createContext({}),l=function(e){var n=o.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},p=function(e){var n=l(e.components);return o.createElement(i.Provider,{value:n},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},g=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=l(t),g=r,h=d["".concat(i,".").concat(g)]||d[g]||u[g]||s;return t?o.createElement(h,a(a({ref:n},p),{},{components:t})):o.createElement(h,a({ref:n},p))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var s=t.length,a=new Array(s);a[0]=g;var c={};for(var i in n)hasOwnProperty.call(n,i)&&(c[i]=n[i]);c.originalType=e,c[d]="string"==typeof e?e:r,a[1]=c;for(var l=2;l<s;l++)a[l]=t[l];return o.createElement.apply(null,a)}return o.createElement.apply(null,t)}g.displayName="MDXCreateElement"},4574:(e,n,t)=>{t.r(n),t.d(n,{contentTitle:()=>a,default:()=>d,frontMatter:()=>s,metadata:()=>c,toc:()=>i});var o=t(8168),r=(t(6540),t(5680));const s={title:"How to use with NW.js",toc_max_heading_level:4},a="How to use with NW.js",c={type:"mdx",permalink:"/socket.io-website/how-to/use-with-nwjs",source:"@site/src/pages/how-to/use-with-nwjs.md",title:"How to use with NW.js",description:"This guide shows how to use Socket.IO within a NW.js (previously known as node-webkit) application.",frontMatter:{title:"How to use with NW.js",toc_max_heading_level:4}},i=[{value:"Usage",id:"usage",level:2},{value:"Browser context",id:"browser-context",level:3},{value:"Pros",id:"pros",level:4},{value:"Cons",id:"cons",level:4},{value:"Node context",id:"node-context",level:3},{value:"Pros",id:"pros-1",level:4},{value:"Cons",id:"cons-1",level:4},{value:"Sample project",id:"sample-project",level:2}],l={toc:i},p="wrapper";function d(e){let{components:n,...s}=e;return(0,r.yg)(p,(0,o.A)({},l,s,{components:n,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"how-to-use-with-nwjs"},"How to use with NW.js"),(0,r.yg)("p",null,"This guide shows how to use Socket.IO within a ",(0,r.yg)("a",{parentName:"p",href:"https://nwjs.io/"},"NW.js")," (previously known as node-webkit) application."),(0,r.yg)("h2",{id:"usage"},"Usage"),(0,r.yg)("p",null,"By default, NW.js creates two different JavaScript contexts:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"a browser context, which has access to the ",(0,r.yg)("a",{parentName:"li",href:"https://developer.mozilla.org/en-US/docs/Web/API"},"Web API")," (one context per window/frame)"),(0,r.yg)("li",{parentName:"ul"},"a Node context, which has access to the ",(0,r.yg)("a",{parentName:"li",href:"https://nodejs.org/docs/latest/api/"},"Node.js API")," (shared between all windows/frames)")),(0,r.yg)("p",null,"Reference: ",(0,r.yg)("a",{parentName:"p",href:"https://nwjs.readthedocs.io/en/latest/For%20Users/Advanced/JavaScript%20Contexts%20in%20NW.js/"},"https://nwjs.readthedocs.io/en/latest/For%20Users/Advanced/JavaScript%20Contexts%20in%20NW.js/")),(0,r.yg)("p",null,"The Socket.IO client can be created in both context, depending on your use case."),(0,r.yg)("h3",{id:"browser-context"},"Browser context"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-html",metastring:'title="index.html"',title:'"index.html"'},'<!doctype html>\n<html lang="en">\n  <body>\n    <p>Status: <span id="status"></span></p>\n    <p>Transport: <span id="transport"></span></p>\n\n    \x3c!-- from the socket.io-client package --\x3e\n    <script src="./node_modules/socket.io-client/dist/socket.io.min.js"><\/script>\n\n    \x3c!-- or from a CDN --\x3e\n    \x3c!--<script src="https://cdn.socket.io/4.7.5/socket.io.js"><\/script>--\x3e\n\n    <script>\n      const socket = io("http://localhost:3000");\n\n      const statusSpan = document.getElementById("status");\n      const transportSpan = document.getElementById("transport");\n\n      statusSpan.innerText = "Disconnected";\n      transportSpan.innerText = "N/A";\n\n      socket.on("connect", () => {\n        statusSpan.innerText = "Connected";\n        transportSpan.innerText = socket.io.engine.transport.name;\n        socket.io.engine.on("upgrade", (transport) => {\n          transportSpan.innerText = transport.name;\n        });\n        console.log(`connect ${socket.id}`);\n      });\n\n      socket.on("connect_error", (err) => {\n        console.log(`connect_error due to ${err.message}`);\n      });\n\n      socket.on("disconnect", (reason) => {\n        statusSpan.innerText = "Disconnected";\n        transportSpan.innerText = "N/A";\n        console.log(`disconnect due to ${reason}`);\n      });\n\n      socket.emit("hello", "world");\n    <\/script>\n  </body>\n</html>\n')),(0,r.yg)("p",null,"In that case, the Socket.IO client will use the ",(0,r.yg)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/WebSocket"},"WebSocket object")," provided by the browser."),(0,r.yg)("h4",{id:"pros"},"Pros"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"the Socket.IO connection can be debugged in the ",(0,r.yg)("a",{parentName:"li",href:"https://nwjs.readthedocs.io/en/latest/For%20Users/Debugging%20with%20DevTools/"},"DevTools"),":")),(0,r.yg)("p",null,(0,r.yg)("img",{alt:"DevTools with NW.js",src:t(1089).A,width:"1128",height:"695"})),(0,r.yg)("h4",{id:"cons"},"Cons"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"the ",(0,r.yg)("inlineCode",{parentName:"li"},"extraHeaders")," option will be ignored when using WebSocket only:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const socket = io("http://localhost:3000", {\n  transports: ["websocket"],\n  extraHeaders: {\n    "my-custom-header": "1234" // ignored\n  }\n});\n')),(0,r.yg)("h3",{id:"node-context"},"Node context"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-html",metastring:'title="index.html"',title:'"index.html"'},'<!doctype html>\n<html lang="en">\n  <body>\n    <p>Status: <span id="status"></span></p>\n    <p>Transport: <span id="transport"></span></p>\n\n    <script>\n      const statusSpan = document.getElementById("status");\n      const transportSpan = document.getElementById("transport");\n\n      const { registerListeners, emit } = require("./socket");\n\n      registerListeners({ statusSpan, transportSpan });\n\n      emit("hello", "world");\n    <\/script>\n  </body>\n</html>\n')),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js",metastring:'title="socket.js"',title:'"socket.js"'},'const { io } = require("socket.io-client");\n\nconst socket = io("http://localhost:3000");\n\nexports.registerListeners = function ({ statusSpan, transportSpan }) {\n  statusSpan.innerText = "Disconnected";\n  transportSpan.innerText = "N/A";\n\n  function onConnect() {\n    statusSpan.innerText = "Connected";\n    transportSpan.innerText = socket.io.engine.transport.name;\n    socket.io.engine.on("upgrade", (transport) => {\n      transportSpan.innerText = transport.name;\n    });\n    console.log(`connect ${socket.id}`);\n  }\n\n  if (socket.connected) {\n    onConnect();\n  }\n\n  socket.on("connect", onConnect);\n\n  socket.on("connect_error", (err) => {\n    console.log(`connect_error due to ${err.message}`);\n  });\n\n  socket.on("disconnect", (reason) => {\n    statusSpan.innerText = "Disconnected";\n    transportSpan.innerText = "N/A";\n    console.log(`disconnect due to ${reason}`);\n  });\n}\n\nexports.emit = function (...args) {\n  socket.emit(...args);\n}\n')),(0,r.yg)("p",null,"In that case, the Socket.IO client will use the WebSocket object provided by the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/websockets/ws/"},(0,r.yg)("inlineCode",{parentName:"a"},"ws"))," package."),(0,r.yg)("h4",{id:"pros-1"},"Pros"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"the Socket.IO connection will be shared between the different windows of your application")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"the client supports additional options specific to Node.js such as ",(0,r.yg)("inlineCode",{parentName:"p"},"agent"),", ",(0,r.yg)("inlineCode",{parentName:"p"},"ca")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"cert")))),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const socket = io("https://localhost:3000", {\n  ca: fs.readFileSync("cert.pem")\n});\n')),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"the ",(0,r.yg)("inlineCode",{parentName:"li"},"extraHeaders")," option will properly be sent when using WebSocket only:")),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-js"},'const socket = io("http://localhost:3000", {\n  transports: ["websocket"],\n  extraHeaders: {\n    "my-custom-header": "1234"\n  }\n});\n')),(0,r.yg)("h4",{id:"cons-1"},"Cons"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"the Socket.IO connection cannot be debugged in the ",(0,r.yg)("a",{parentName:"li",href:"https://nwjs.readthedocs.io/en/latest/For%20Users/Debugging%20with%20DevTools/"},"DevTools"),' (even when choosing "Inspect Background Page")')),(0,r.yg)("h2",{id:"sample-project"},"Sample project"),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"https://github.com/socketio/socket.io/tree/main/examples/nwjs-example"},"https://github.com/socketio/socket.io/tree/main/examples/nwjs-example")),(0,r.yg)("p",null,"That's all folks, thanks for reading!"),(0,r.yg)("p",null,(0,r.yg)("a",{parentName:"p",href:"/get-started/"},"Back to the list of examples")))}d.isMDXComponent=!0},1089:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/nwjs-devtools-a6499e484d70d2722090102be196eeaa.png"}}]);