<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-categories/Miscellaneous/eio-protocol" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">The Engine.IO protocol | Socket.IO</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nhonvo.github.io/docs/v4/engine-io-protocol/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="The Engine.IO protocol | Socket.IO"><meta data-rh="true" name="description" content="This document describes the 4th version of the Engine.IO protocol."><meta data-rh="true" property="og:description" content="This document describes the 4th version of the Engine.IO protocol."><link data-rh="true" rel="icon" href="/images/favicon.png"><link data-rh="true" rel="canonical" href="https://nhonvo.github.io/docs/v4/engine-io-protocol/"><link data-rh="true" rel="alternate" href="https://nhonvo.github.io/docs/v4/engine-io-protocol/" hreflang="en"><link data-rh="true" rel="alternate" href="https://nhonvo.github.io/docs/v4/engine-io-protocol/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://ZM7QMFKQCJ-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Socket.IO RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Socket.IO Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Socket.IO" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.5a2bceda.css">
<link rel="preload" href="/assets/js/runtime~main.a7b06535.js" as="script">
<link rel="preload" href="/assets/js/main.0c067318.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,t("light"))}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#25c2a0" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">Latest blog post (July 25, 2024): <a href="/blog/npm-package-provenance/">npm package provenance</a>.</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top navbarHideable_m1mJ"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/images/logo.svg" alt="Socket.IO logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/logo-dark.svg" alt="Socket.IO logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Socket.IO</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Docs</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/v4/">Guide</a></li><li><a class="dropdown__link" href="/docs/v4/tutorial/introduction">Tutorial</a></li><li><a class="dropdown__link" href="/get-started/">Examples</a></li><li><a class="dropdown__link" href="/docs/v4/emit-cheatsheet/">Emit cheatsheet</a></li></ul></div><a class="navbar__item navbar__link" href="/docs/v4/server-api/">Server API</a><a class="navbar__item navbar__link" href="/docs/v4/client-api/">Client API</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Ecosystem</a><ul class="dropdown__menu"><li class="dropdown-category"><b>Help</b></li><li><a class="dropdown__link" href="/docs/v4/troubleshooting-connection-issues/">Troubleshooting</a></li><li><a href="https://stackoverflow.com/questions/tagged/socket.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Stack Overflow<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/socketio/socket.io/discussions" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub Discussions<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://socketio-slackin.herokuapp.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Slack<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr class="dropdown-separator"></li><li class="dropdown-category"><b>News</b></li><li><a class="dropdown__link" href="/blog">Blog</a></li><li><a href="https://twitter.com/SocketIO" target="_blank" rel="noopener noreferrer" class="dropdown__link">Twitter<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr class="dropdown-separator"></li><li class="dropdown-category"><b>Tools</b></li><li><a href="https://cdn.socket.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">CDN<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://admin.socket.io" target="_blank" rel="noopener noreferrer" class="dropdown__link">Admin UI<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">About</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/v4/faq/">FAQ</a></li><li><a class="dropdown__link" href="/docs/v4/changelog/">Changelog</a></li><li><a href="https://github.com/orgs/socketio/projects/3" target="_blank" rel="noopener noreferrer" class="dropdown__link">Roadmap<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://opencollective.com/socketio" target="_blank" rel="noopener noreferrer" class="dropdown__link">Become a sponsor<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/v4/">4.x</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/v4/engine-io-protocol/">4.x</a></li><li><a class="dropdown__link" href="/docs/v3/">3.x</a></li><li><a class="dropdown__link" href="/docs/v2/">2.x</a></li><li><hr class="dropdown-separator"></li><li><a class="dropdown__link" href="/docs/v4/changelog/">Changelog</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/v4/engine-io-protocol/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li></ul></div><a href="https://github.com/socketio/socket.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd sidebarWithHideableNavbar_wUlq"><a tabindex="-1" class="sidebarLogo_isFc" href="/"><img src="/images/logo.svg" alt="Socket.IO logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/images/logo-dark.svg" alt="Socket.IO logo" class="themedImage_ToTc themedImage--dark_i4oU"><b>Socket.IO</b></a><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/v4/">Documentation</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/v4/server-installation/">Server</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/v4/client-installation/">Client</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/v4/emitting-events/">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/v4/adapter/">Adapters</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/v4/namespaces/">Advanced</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/v4/migrating-from-2-x-to-3-0/">Migrations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/v4/faq/">Miscellaneous</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v4/faq/">FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v4/glossary/">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/v4/engine-io-protocol/">The Engine.IO protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/v4/socket-io-protocol/">The Socket.IO protocol</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Miscellaneous</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">The Engine.IO protocol</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 4.x</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>The Engine.IO protocol</h1></header><p>This document describes the 4th version of the Engine.IO protocol.</p><p>The source of this document can be found <a href="https://github.com/socketio/engine.io-protocol" target="_blank" rel="noopener noreferrer">here</a>.</p><p><strong>Table of content</strong></p><ul><li><a href="#introduction">Introduction</a></li><li><a href="#transports">Transports</a><ul><li><a href="#http-long-polling">HTTP long-polling</a><ul><li><a href="#request-path">Request path</a></li><li><a href="#query-parameters">Query parameters</a></li><li><a href="#headers">Headers</a></li><li><a href="#sending-and-receiving-data">Sending and receiving data</a><ul><li><a href="#sending-data">Sending data</a></li><li><a href="#receiving-data">Receiving data</a></li></ul></li></ul></li><li><a href="#websocket">WebSocket</a></li></ul></li><li><a href="#protocol">Protocol</a><ul><li><a href="#handshake">Handshake</a></li><li><a href="#heartbeat">Heartbeat</a></li><li><a href="#upgrade">Upgrade</a></li><li><a href="#message">Message</a></li></ul></li><li><a href="#packet-encoding">Packet encoding</a><ul><li><a href="#http-long-polling-1">HTTP long-polling</a></li><li><a href="#websocket-1">WebSocket</a></li></ul></li><li><a href="#history">History</a><ul><li><a href="#from-v2-to-v3">From v2 to v3</a></li><li><a href="#from-v3-to-v4">From v3 to v4</a></li></ul></li><li><a href="#test-suite">Test suite</a></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><p>The Engine.IO protocol enables <a href="https://en.wikipedia.org/wiki/Duplex_(telecommunications)#FULL-DUPLEX" target="_blank" rel="noopener noreferrer">full-duplex</a> and low-overhead communication between a client and a server.</p><p>It is based on the <a href="https://en.wikipedia.org/wiki/WebSocket" target="_blank" rel="noopener noreferrer">WebSocket protocol</a> and uses <a href="https://en.wikipedia.org/wiki/Push_technology#Long_polling" target="_blank" rel="noopener noreferrer">HTTP long-polling</a> as fallback if the WebSocket connection can&#x27;t be established.</p><p>The reference implementation is written in <a href="https://www.typescriptlang.org/" target="_blank" rel="noopener noreferrer">TypeScript</a>:</p><ul><li>server: <a href="https://github.com/socketio/engine.io" target="_blank" rel="noopener noreferrer">https://github.com/socketio/engine.io</a></li><li>client: <a href="https://github.com/socketio/engine.io-client" target="_blank" rel="noopener noreferrer">https://github.com/socketio/engine.io-client</a></li></ul><p>The <a href="https://github.com/socketio/socket.io-protocol" target="_blank" rel="noopener noreferrer">Socket.IO protocol</a> is built on top of these foundations, bringing additional features over the communication channel provided by the Engine.IO protocol.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="transports">Transports<a href="#transports" class="hash-link" aria-label="Direct link to Transports" title="Direct link to Transports">​</a></h2><p>The connection between an Engine.IO client and an Engine.IO server can be established with:</p><ul><li><a href="#http-long-polling">HTTP long-polling</a></li><li><a href="#websocket">WebSocket</a></li></ul><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http-long-polling">HTTP long-polling<a href="#http-long-polling" class="hash-link" aria-label="Direct link to HTTP long-polling" title="Direct link to HTTP long-polling">​</a></h3><p>The HTTP long-polling transport (also simply referred as &quot;polling&quot;) consists of successive HTTP requests:</p><ul><li>long-running <code>GET</code> requests, for receiving data from the server</li><li>short-running <code>POST</code> requests, for sending data to the server</li></ul><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="request-path">Request path<a href="#request-path" class="hash-link" aria-label="Direct link to Request path" title="Direct link to Request path">​</a></h4><p>The path of the HTTP requests is <code>/engine.io/</code> by default.</p><p>It might be updated by libraries built on top of the protocol (for example, the Socket.IO protocol uses <code>/socket.io/</code>).</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="query-parameters">Query parameters<a href="#query-parameters" class="hash-link" aria-label="Direct link to Query parameters" title="Direct link to Query parameters">​</a></h4><p>The following query parameters are used:</p><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>EIO</code></td><td><code>4</code></td><td>Mandatory, the version of the protocol.</td></tr><tr><td><code>transport</code></td><td><code>polling</code></td><td>Mandatory, the name of the transport.</td></tr><tr><td><code>sid</code></td><td><code>&lt;sid&gt;</code></td><td>Mandatory once the session is established, the session identifier.</td></tr></tbody></table><p>If a mandatory query parameter is missing, then the server MUST respond with an HTTP 400 error status.</p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="headers">Headers<a href="#headers" class="hash-link" aria-label="Direct link to Headers" title="Direct link to Headers">​</a></h4><p>When sending binary data, the sender (client or server) MUST include a <code>Content-Type: application/octet-stream</code> header.</p><p>Without an explicit <code>Content-Type</code> header, the receiver SHOULD infer that the data is plaintext.</p><p>Reference: <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type</a></p><h4 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sending-and-receiving-data">Sending and receiving data<a href="#sending-and-receiving-data" class="hash-link" aria-label="Direct link to Sending and receiving data" title="Direct link to Sending and receiving data">​</a></h4><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="sending-data">Sending data<a href="#sending-data" class="hash-link" aria-label="Direct link to Sending data" title="Direct link to Sending data">​</a></h5><p>To send some packets, a client MUST create an HTTP <code>POST</code> request with the packets encoded in the request body:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CLIENT                                                 SERVER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   POST /engine.io/?EIO=4&amp;transport=polling&amp;sid=...   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │ ───────────────────────────────────────────────────► │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │ ◄──────────────────────────────────────────────────┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                        HTTP 200                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                                                      │</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The server MUST return an HTTP 400 response if the session ID (from the <code>sid</code> query parameter) is not known.</p><p>To indicate success, the server MUST return an HTTP 200 response, with the string <code>ok</code> in the response body.</p><p>To ensure packet ordering, a client MUST NOT have more than one active <code>POST</code> request. Should it happen, the server MUST return an HTTP 400 error status and close the session.</p><h5 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="receiving-data">Receiving data<a href="#receiving-data" class="hash-link" aria-label="Direct link to Receiving data" title="Direct link to Receiving data">​</a></h5><p>To receive some packets, a client MUST create an HTTP <code>GET</code> request:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CLIENT                                                SERVER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   GET /engine.io/?EIO=4&amp;transport=polling&amp;sid=...   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │ ──────────────────────────────────────────────────► │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                                                   . │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                                                   . │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                                                   . │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                                                   . │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │ ◄─────────────────────────────────────────────────┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                       HTTP 200                      │</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The server MUST return an HTTP 400 response if the session ID (from the <code>sid</code> query parameter) is not known.</p><p>The server MAY not respond right away if there are no packets buffered for the given session. Once there are some packets to be sent, the server SHOULD encode them (see <a href="#packet-encoding">Packet encoding</a>) and send them in the response body of the HTTP request.</p><p>To ensure packet ordering, a client MUST NOT have more than one active <code>GET</code> request. Should it happen, the server MUST return an HTTP 400 error status and close the session.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="websocket">WebSocket<a href="#websocket" class="hash-link" aria-label="Direct link to WebSocket" title="Direct link to WebSocket">​</a></h3><p>The WebSocket transport consists of a <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API" target="_blank" rel="noopener noreferrer">WebSocket connection</a>, which provides a bidirectional and low-latency communication channel between the server and the client.</p><p>The following query parameters are used:</p><table><thead><tr><th>Name</th><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>EIO</code></td><td><code>4</code></td><td>Mandatory, the version of the protocol.</td></tr><tr><td><code>transport</code></td><td><code>websocket</code></td><td>Mandatory, the name of the transport.</td></tr><tr><td><code>sid</code></td><td><code>&lt;sid&gt;</code></td><td>Optional, depending on whether it&#x27;s an upgrade from HTTP long-polling or not.</td></tr></tbody></table><p>If a mandatory query parameter is missing, then the server MUST close the WebSocket connection.</p><p>Each packet (read or write) is sent its own <a href="https://datatracker.ietf.org/doc/html/rfc6455#section-5" target="_blank" rel="noopener noreferrer">WebSocket frame</a>.</p><p>A client MUST NOT open more than one WebSocket connection per session. Should it happen, the server MUST close the WebSocket connection.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="protocol">Protocol<a href="#protocol" class="hash-link" aria-label="Direct link to Protocol" title="Direct link to Protocol">​</a></h2><p>An Engine.IO packet consists of:</p><ul><li>a packet type</li><li>an optional packet payload</li></ul><p>Here is the list of available packet types:</p><table><thead><tr><th>Type</th><th>ID</th><th>Usage</th></tr></thead><tbody><tr><td>open</td><td>0</td><td>Used during the <a href="#handshake">handshake</a>.</td></tr><tr><td>close</td><td>1</td><td>Used to indicate that a transport can be closed.</td></tr><tr><td>ping</td><td>2</td><td>Used in the <a href="#heartbeat">heartbeat mechanism</a>.</td></tr><tr><td>pong</td><td>3</td><td>Used in the <a href="#heartbeat">heartbeat mechanism</a>.</td></tr><tr><td>message</td><td>4</td><td>Used to send a payload to the other side.</td></tr><tr><td>upgrade</td><td>5</td><td>Used during the <a href="#upgrade">upgrade process</a>.</td></tr><tr><td>noop</td><td>6</td><td>Used during the <a href="#upgrade">upgrade process</a>.</td></tr></tbody></table><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="handshake">Handshake<a href="#handshake" class="hash-link" aria-label="Direct link to Handshake" title="Direct link to Handshake">​</a></h3><p>To establish a connection, the client MUST send an HTTP <code>GET</code> request to the server:</p><ul><li>HTTP long-polling first (by default)</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CLIENT                                                    SERVER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                                                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │        GET /engine.io/?EIO=4&amp;transport=polling           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │ ───────────────────────────────────────────────────────► │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │ ◄──────────────────────────────────────────────────────┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                        HTTP 200                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                                                          │</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>WebSocket-only session</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CLIENT                                                    SERVER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                                                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │        GET /engine.io/?EIO=4&amp;transport=websocket         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │ ───────────────────────────────────────────────────────► │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │ ◄──────────────────────────────────────────────────────┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                        HTTP 101                          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                                                          │</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the server accepts the connection, then it MUST respond with an <code>open</code> packet with the following JSON-encoded payload:</p><table><thead><tr><th>Key</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>sid</code></td><td><code>string</code></td><td>The session ID.</td></tr><tr><td><code>upgrades</code></td><td><code>string[]</code></td><td>The list of available <a href="#upgrade">transport upgrades</a>.</td></tr><tr><td><code>pingInterval</code></td><td><code>number</code></td><td>The ping interval, used in the <a href="#heartbeat">heartbeat mechanism</a> (in milliseconds).</td></tr><tr><td><code>pingTimeout</code></td><td><code>number</code></td><td>The ping timeout, used in the <a href="#heartbeat">heartbeat mechanism</a> (in milliseconds).</td></tr><tr><td><code>maxPayload</code></td><td><code>number</code></td><td>The maximum number of bytes per chunk, used by the client to aggregate packets into <a href="#packet-encoding">payloads</a>.</td></tr></tbody></table><p>Example:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;sid&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;lv_VI97HAXpY6yYWAAAC&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;upgrades&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;websocket&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;pingInterval&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">25000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;pingTimeout&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">20000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;maxPayload&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The client MUST send the <code>sid</code> value in the query parameters of all subsequent requests.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="heartbeat">Heartbeat<a href="#heartbeat" class="hash-link" aria-label="Direct link to Heartbeat" title="Direct link to Heartbeat">​</a></h3><p>Once the <a href="#handshake">handshake</a> is completed, a heartbeat mechanism is started to check the liveness of the connection:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CLIENT                                                 SERVER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                   *** Handshake ***                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  ◄─────────────────────────────────────────────────  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                           2                          │  (ping packet)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  ─────────────────────────────────────────────────►  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                           3                          │  (pong packet)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>At a given interval (the <code>pingInterval</code> value sent in the handshake) the server sends a <code>ping</code> packet and the client has a few seconds (the <code>pingTimeout</code> value) to send a <code>pong</code> packet back.</p><p>If the server does not receive a <code>pong</code> packet back, then it SHOULD consider that the connection is closed.</p><p>Conversely, if the client does not receive a <code>ping</code> packet within <code>pingInterval + pingTimeout</code>, then it SHOULD consider that the connection is closed.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="upgrade">Upgrade<a href="#upgrade" class="hash-link" aria-label="Direct link to Upgrade" title="Direct link to Upgrade">​</a></h3><p>By default, the client SHOULD create an HTTP long-polling connection, and then upgrade to better transports if available.</p><p>To upgrade to WebSocket, the client MUST:</p><ul><li>pause the HTTP long-polling transport (no more HTTP request gets sent), to ensure that no packet gets lost</li><li>open a WebSocket connection with the same session ID</li><li>send a <code>ping</code> packet with the string <code>probe</code> in the payload</li></ul><p>The server MUST:</p><ul><li>send a <code>noop</code> packet to any pending <code>GET</code> request (if applicable) to cleanly close HTTP long-polling transport</li><li>respond with a <code>pong</code> packet with the string <code>probe</code> in the payload</li></ul><p>Finally, the client MUST send a <code>upgrade</code> packet to complete the upgrade:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CLIENT                                                 SERVER</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │   GET /engine.io/?EIO=4&amp;transport=websocket&amp;sid=...  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │ ───────────────────────────────────────────────────► │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  ◄─────────────────────────────────────────────────┘ │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │            HTTP 101 (WebSocket handshake)            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                                                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │            -----  WebSocket frames -----             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  ─────────────────────────────────────────────────►  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                         2probe                       │ (ping packet)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  ◄─────────────────────────────────────────────────  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                         3probe                       │ (pong packet)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │  ─────────────────────────────────────────────────►  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                         5                            │ (upgrade packet)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  │                                                      │</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="message">Message<a href="#message" class="hash-link" aria-label="Direct link to Message" title="Direct link to Message">​</a></h3><p>Once the <a href="#handshake">handshake</a> is completed, the client and the server can exchange data by including it in a <code>message</code> packet.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="packet-encoding">Packet encoding<a href="#packet-encoding" class="hash-link" aria-label="Direct link to Packet encoding" title="Direct link to Packet encoding">​</a></h2><p>The serialization of an Engine.IO packet depends on the type of the payload (plaintext or binary) and on the transport.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="http-long-polling-1">HTTP long-polling<a href="#http-long-polling-1" class="hash-link" aria-label="Direct link to HTTP long-polling" title="Direct link to HTTP long-polling">​</a></h3><p>Due to the nature of the HTTP long-polling transport, multiple packets might be concatenated in a single payload in order to increase throughput.</p><p>Format:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;packet type&gt;[&lt;data&gt;]&lt;separator&gt;&lt;packet type&gt;[&lt;data&gt;]&lt;separator&gt;&lt;packet type&gt;[&lt;data&gt;][...]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">4hello\x1e2\x1e4world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4      =&gt; message packet type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello  =&gt; message payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\x1e   =&gt; separator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2      =&gt; ping packet type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\x1e   =&gt; separator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4      =&gt; message packet type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">world  =&gt; message payload</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The packets are separated by the <a href="https://en.wikipedia.org/wiki/C0_and_C1_control_codes#Field_separators" target="_blank" rel="noopener noreferrer">record separator character</a>: <code>\x1e</code></p><p>Binary payloads MUST be base64-encoded and prefixed with a <code>b</code> character:</p><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">4hello\x1ebAQIDBA==</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4         =&gt; message packet type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello     =&gt; message payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">\x1e      =&gt; separator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">b         =&gt; binary prefix</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AQIDBA==  =&gt; buffer &lt;01 02 03 04&gt; encoded as base64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The client SHOULD use the <code>maxPayload</code> value sent during the <a href="#handshake">handshake</a> to decide how many packets should be concatenated.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="websocket-1">WebSocket<a href="#websocket-1" class="hash-link" aria-label="Direct link to WebSocket" title="Direct link to WebSocket">​</a></h3><p>Each Engine.IO packet is sent in its own <a href="https://datatracker.ietf.org/doc/html/rfc6455#section-5" target="_blank" rel="noopener noreferrer">WebSocket frame</a>.</p><p>Format:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;packet type&gt;[&lt;data&gt;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">4hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">with:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4      =&gt; message packet type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello  =&gt; message payload (UTF-8 encoded)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Binary payloads are sent as is, without modification.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="history">History<a href="#history" class="hash-link" aria-label="Direct link to History" title="Direct link to History">​</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="from-v2-to-v3">From v2 to v3<a href="#from-v2-to-v3" class="hash-link" aria-label="Direct link to From v2 to v3" title="Direct link to From v2 to v3">​</a></h3><ul><li>add support for binary data</li></ul><p>The <a href="https://github.com/socketio/engine.io-protocol/tree/v2" target="_blank" rel="noopener noreferrer">2nd version</a> of the protocol is used in Socket.IO <code>v0.9</code> and below.</p><p>The <a href="https://github.com/socketio/engine.io-protocol/tree/v3" target="_blank" rel="noopener noreferrer">3rd version</a> of the protocol is used in Socket.IO <code>v1</code> and <code>v2</code>.</p><h3 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="from-v3-to-v4">From v3 to v4<a href="#from-v3-to-v4" class="hash-link" aria-label="Direct link to From v3 to v4" title="Direct link to From v3 to v4">​</a></h3><ul><li>reverse ping/pong mechanism</li></ul><p>The ping packets are now sent by the server, because the timers set in the browsers are not reliable enough. We
suspect that a lot of timeout problems came from timers being delayed on the client-side.</p><ul><li>always use base64 when encoding a payload with binary data</li></ul><p>This change allows to treat all payloads (with or without binary) the same way, without having to take in account
whether the client or the current transport supports binary data or not.</p><p>Please note that this only applies to HTTP long-polling. Binary data is sent in WebSocket frames with no additional transformation.</p><ul><li>use a record separator (<code>\x1e</code>) instead of counting of characters</li></ul><p>Counting characters prevented (or at least makes harder) to implement the protocol in other languages, which may not use
the UTF-16 encoding.</p><p>For example, <code>€</code> was encoded to <code>2:4€</code>, though <code>Buffer.byteLength(&#x27;€&#x27;) === 3</code>.</p><p>Note: this assumes the record separator is not used in the data.</p><p>The 4th version (current) is included in Socket.IO <code>v3</code> and above.</p><h2 class="anchor anchorWithHideOnScrollNavbar_WYt5" id="test-suite">Test suite<a href="#test-suite" class="hash-link" aria-label="Direct link to Test suite" title="Direct link to Test suite">​</a></h2><p>The test suite in the <a href="https://github.com/socketio/engine.io-protocol/tree/main/test-suite" target="_blank" rel="noopener noreferrer"><code>test-suite/</code></a> directory lets you check the compliance of a server implementation.</p><p>Usage:</p><ul><li>in Node.js: <code>npm ci &amp;&amp; npm test</code></li><li>in a browser: simply open the <code>index.html</code> file in your browser</li></ul><p>For reference, here is expected configuration for the JavaScript server to pass all tests:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> listen </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;engine.io&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> server </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">listen</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">pingInterval</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">300</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">pingTimeout</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">maxPayload</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1e6</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token literal-property property" style="color:#36acaa">cors</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token literal-property property" style="color:#36acaa">origin</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">server</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;connection&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token parameter">socket</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;data&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter spread operator" style="color:#393A34">...</span><span class="token parameter">args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    socket</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">args</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/socketio/nhonvo.github.io/edit/main/docs/categories/08-Miscellaneous/eio-protocol.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-03-27T16:25:09.000Z">Mar 27, 2023</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/v4/glossary/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Glossary</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/v4/socket-io-protocol/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">The Socket.IO protocol</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#transports" class="table-of-contents__link toc-highlight">Transports</a><ul><li><a href="#http-long-polling" class="table-of-contents__link toc-highlight">HTTP long-polling</a></li><li><a href="#websocket" class="table-of-contents__link toc-highlight">WebSocket</a></li></ul></li><li><a href="#protocol" class="table-of-contents__link toc-highlight">Protocol</a><ul><li><a href="#handshake" class="table-of-contents__link toc-highlight">Handshake</a></li><li><a href="#heartbeat" class="table-of-contents__link toc-highlight">Heartbeat</a></li><li><a href="#upgrade" class="table-of-contents__link toc-highlight">Upgrade</a></li><li><a href="#message" class="table-of-contents__link toc-highlight">Message</a></li></ul></li><li><a href="#packet-encoding" class="table-of-contents__link toc-highlight">Packet encoding</a><ul><li><a href="#http-long-polling-1" class="table-of-contents__link toc-highlight">HTTP long-polling</a></li><li><a href="#websocket-1" class="table-of-contents__link toc-highlight">WebSocket</a></li></ul></li><li><a href="#history" class="table-of-contents__link toc-highlight">History</a><ul><li><a href="#from-v2-to-v3" class="table-of-contents__link toc-highlight">From v2 to v3</a></li><li><a href="#from-v3-to-v4" class="table-of-contents__link toc-highlight">From v3 to v4</a></li></ul></li><li><a href="#test-suite" class="table-of-contents__link toc-highlight">Test suite</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/v4/">Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/v4/tutorial/introduction">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/get-started/">Examples</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/v4/server-api/">Server API</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/v4/client-api/">Client API</a></li></ul></div><div class="col footer__col"><div class="footer__title">Help</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/v4/troubleshooting-connection-issues/">Troubleshooting</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/socket.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/socketio/socket.io/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://socketio-slackin.herokuapp.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">News</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://twitter.com/SocketIO" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Tools</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://cdn.socket.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">CDN<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://admin.socket.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Admin UI<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">About</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/v4/faq/">FAQ</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/v4/changelog/">Changelog</a></li><li class="footer__item"><a href="https://github.com/orgs/socketio/projects/3" target="_blank" rel="noopener noreferrer" class="footer__link-item">Roadmap<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opencollective.com/socketio" target="_blank" rel="noopener noreferrer" class="footer__link-item">Become a sponsor<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Socket.IO</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a7b06535.js"></script>
<script src="/assets/js/main.0c067318.js"></script>
</body>
</html>